{"version":3,"sources":["i18n.ts","components/analytics/GoogleAnalyticsReporter.tsx","assets/svg/logo_white.svg","assets/images/menu.svg","hooks/useOnClickOutside.tsx","state/application/actions.ts","constants/networks.ts","apollo/client.ts","assets/images/optimism.svg","assets/images/arbitrum.svg","assets/images/ethereum-logo.png","assets/images/polygon-logo.png","connectors/Fortmatic.ts","connectors/NetworkConnector.ts","connectors/index.ts","constants/index.ts","hooks/index.ts","state/application/hooks.ts","state/user/actions.ts","hooks/useAppDispatch.ts","state/user/hooks.tsx","theme/components.tsx","theme/index.tsx","components/Menu/index.tsx","components/Row/index.tsx","state/tokens/actions.ts","data/tokens/poolsForToken.ts","data/tokens/chartData.ts","utils/queries.ts","hooks/useBlocksFromTimestamps.ts","data/tokens/priceData.ts","types/index.ts","utils/tokens.ts","data/tokens/transactions.ts","constants/chains.ts","utils/index.ts","state/tokens/hooks.ts","utils/data.ts","hooks/useEthPrices.ts","data/tokens/tokenData.ts","state/pools/actions.ts","data/pools/chartData.ts","data/pools/transactions.ts","state/pools/hooks.ts","data/search/index.ts","components/Column/index.tsx","components/Logo/index.tsx","constants/lists.ts","utils/listSort.ts","state/lists/wrappedTokenInfo.ts","state/lists/hooks.ts","utils/uriToHttp.ts","hooks/useHttpLocations.ts","components/CurrencyLogo/index.tsx","utils/numbers.ts","components/DoubleLogo/index.tsx","components/Card/index.tsx","hooks/useTheme.ts","components/Button/index.tsx","hooks/useInterval.ts","components/Popover/index.tsx","components/Tooltip/index.tsx","components/HoverInlineText/index.tsx","utils/networkPrefix.ts","components/Search/index.tsx","components/Menu/NetworkDropdown.tsx","components/Header/index.tsx","components/Header/URLWarning.tsx","state/lists/actions.ts","utils/listVersionLabel.ts","components/Popups/ListUpdatePopup.tsx","components/Popups/TransactionPopup.tsx","components/Popups/PopupItem.tsx","components/Popups/index.tsx","theme/DarkModeQueryParamReader.tsx","components/LineChart/alt.tsx","state/protocol/actions.ts","state/protocol/hooks.ts","components/Percent/index.tsx","assets/images/whitev3.svg","components/Loader/index.tsx","components/Text/index.ts","components/shared/index.tsx","components/tokens/TokenTable.tsx","components/pools/PoolTable.tsx","pages/styled.ts","utils/date.ts","components/BarChart/alt.tsx","components/TransactionsTable/index.tsx","hooks/chart.ts","pages/Home/index.tsx","pages/Pool/PoolsOverview.tsx","components/tokens/TopTokenMovers.tsx","pages/Token/TokensOverview.tsx","components/Header/Polling.tsx","components/Header/TopBar.tsx","hooks/useColor.ts","components/Toggle/index.tsx","components/CandleChart/index.tsx","hooks/useCMCLink.ts","assets/images/cmc.png","pages/Token/TokenPage.tsx","constants/intervals.ts","pages/Token/redirects.tsx","data/pools/tickData.ts","components/DensityChart/CurrentPriceLabel.tsx","components/DensityChart/CustomToolTip.tsx","components/DensityChart/index.tsx","pages/Pool/PoolPage.tsx","pages/App.tsx","state/application/reducer.ts","state/global/actions.ts","state/user/reducer.ts","state/lists/reducer.ts","state/multicall/actions.ts","state/multicall/reducer.ts","state/protocol/reducer.ts","state/tokens/reducer.ts","state/pools/reducer.ts","state/index.ts","state/user/updater.tsx","data/protocol/overview.ts","data/protocol/chart.ts","data/protocol/transactions.ts","state/protocol/updater.ts","data/tokens/topTokens.ts","state/tokens/updater.ts","data/pools/topPools.ts","data/pools/poolData.ts","state/pools/updater.ts","data/application/index.ts","state/application/updater.ts","utils/getTokenList.ts","hooks/useIsWindowVisible.ts","state/lists/updater.ts","hooks/useFetchListCallback.ts","index.tsx"],"names":["i18next","use","XHR","LanguageDetector","initReactI18next","init","backend","loadPath","react","useSuspense","fallbackLng","preload","keySeparator","interpolation","escapeValue","GoogleAnalyticsReporter","location","pathname","search","useEffect","ReactGA","pageview","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","SvgMenu","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","ForwardRef","useOnClickOutside","node","handler","handlerRef","useRef","current","handleClickOutside","e","contains","document","addEventListener","removeEventListener","ApplicationModal","SupportedNetwork","updateBlockNumber","createAction","setOpenModal","addPopup","removePopup","updateSubgraphStatus","updateActiveNetworkVersion","healthClient","ApolloClient","uri","cache","InMemoryCache","blockClient","queryDeduplication","defaultOptions","watchQuery","fetchPolicy","query","errorPolicy","client","typePolicies","Token","keyFields","Pool","arbitrumClient","arbitrumBlockClient","optimismClient","optimismBlockClient","polygonClient","polygonBlockClient","EthereumNetworkInfo","ETHEREUM","route","name","bgColor","primaryColor","secondaryColor","imageURL","ETHEREUM_LOGO_URL","ArbitrumNetworkInfo","ARBITRUM","ARBITRUM_LOGO_URL","blurb","OptimismNetworkInfo","OPTIMISM","OPTIMISM_LOGO_URL","PolygonNetworkInfo","POLYGON","POLYGON_LOGO_URL","SUPPORTED_NETWORK_VERSIONS","CHAIN_ID_NETWORK_ARGUMENT","undefined","FortmaticConnector","a","fortmatic","Fortmatic","default","apiKey","chainId","Error","provider","getProvider","pollForOverlayReady","Promise","resolve","interval","setInterval","overlayReady","clearInterval","emit","all","enable","then","accounts","account","FortmaticConnectorCore","RequestError","message","code","data","MiniRpcProvider","url","batchWaitTimeMs","isMetaMask","host","path","nextId","batchTimeoutId","batch","clearBatch","console","debug","fetch","method","headers","accept","body","JSON","stringify","map","item","request","response","forEach","reject","ok","status","statusText","json","byKey","reduce","memo","result","error","sendAsync","callback","params","jsonrpc","catch","toString","promise","push","setTimeout","parsed","URL","NetworkConnector","urls","defaultChainId","invariant","supportedChainIds","k","Number","providers","currentChainId","accumulator","AbstractConnector","NETWORK_URL","process","FORMATIC_KEY","REACT_APP_FORTMATIC_KEY","PORTIS_ID","REACT_APP_PORTIS_ID","NETWORK_CHAIN_ID","parseInt","InjectedConnector","WalletConnectConnector","rpc","1","bridge","qrcode","pollingInterval","PortisConnector","dAppId","networks","WalletLinkConnector","appName","appLogoUrl","MAX_UINT128","BigNumber","from","pow","sub","WETH_ADDRESSES","TOKEN_HIDE","POOL_HIDE","BIPS_BASE","JSBI","BigInt","Percent","exponentiate","useActiveWeb3React","context","useWeb3ReactCore","contextNetwork","active","useModalOpen","modal","useSelector","state","application","openModal","useToggleModal","open","dispatch","useDispatch","useCallback","useRemovePopup","useSubgraphStatus","subgraphStatus","available","syncedBlock","headBlock","useActiveNetworkVersion","activeNetworkVersion","useClients","dataClient","useDataClient","useBlockClient","updateMatchesDarkMode","updateUserDarkMode","addSerializedToken","removeSerializedToken","addSavedToken","addSavedPool","addSerializedPair","removeSerializedPair","toggleURLWarning","useAppDispatch","useSavedTokens","savedTokens","user","address","useSavedPools","savedPools","useURLWarningVisible","URLWarningVisible","StyledInternalLink","styled","button","attrs","warning","theme","backgroundColor","red1","primary1","white","darken","bg1","text4","X","div","size","marginRight","marginLeft","blue1","disabled","text2","Link","fontSize","StyledLink","rotateImg","LinkIconFeather","Trash","text3","keyframes","img","ExternalLink","href","rel","rest","handleClick","event","ctrlKey","metaKey","outboundLink","label","preventDefault","window","onClick","rotate","Spinner","text1","span","mediaWidth","upToMedium","HideMedium","HideSmall","upToSmall","HideExtraSmall","upToExtraSmall","ExtraSmallOnly","MEDIA_WIDTHS","upToLarge","mediaWidthTemplates","b","c","css","colors","darkMode","black","text5","bg0","bg2","bg3","bg4","bg5","modalBG","advancedBG","primary2","primary3","primary4","primary5","primaryText1","secondary1","secondary2","secondary3","pink1","red2","red3","green1","yellow1","yellow2","yellow3","blue2","ThemeProvider","children","matchesDarkMode","userDarkMode","shallowEqual","useIsDarkMode","themeObject","useMemo","grids","sm","md","lg","shadow1","flexColumnNoWrap","flexRowNoWrap","TextWrapper","Text","color","TYPE","fontWeight","FixedGlobalStyle","createGlobalStyle","ThemedGlobalStyle","StyledMenuIcon","MenuIcon","StyledMenuButton","StyledMenu","MenuFlyout","MenuItem","Menu","MENU","toggle","Row","Box","align","justify","padding","border","borderRadius","RowBetween","RowFlat","AutoRow","gap","RowFixed","ResponsiveRow","updateTokenData","addTokenKeys","addPoolAddresses","updateChartData","updateTransactions","updatePriceData","POOLS_FOR_TOKEN","gql","fetchPoolsForToken","variables","loading","Boolean","addresses","formattedData","asToken0","concat","asToken1","p","dayjs","extend","utc","weekOfYear","ONE_DAY_UNIX","TOKEN_CHART","fetchTokenChartData","startTimestamp","endTimestamp","unix","skip","allFound","startTime","chartResData","tokenDayDatas","formattedExisting","accum","dayData","date","toFixed","volumeUSD","parseFloat","totalValueLockedUSD","firstEntry","timestamp","latestTvl","nextDay","currentDayIndex","includes","dateMap","splitQuery","vars","values","skipCount","fetchedData","end","sliced","slice","log","useDeltaTimestamps","utcCurrentTime","subtract","startOf","GET_BLOCKS","timestamps","queryString","useBlocksFromTimestamps","blockClientOverride","activeNetwork","useState","blocks","setBlocks","setError","activeBlockClient","networkBlocks","results","fetchData","formatted","t","split","number","getBlocksFromTimestamps","VolumeWindow","TransactionType","PRICE_CHART","fetchTokenPriceData","time","priceData","errors","tokenHourDatas","formattedHistory","periodStartUnix","close","high","low","formatTokenSymbol","symbol","formatTokenName","GLOBAL_TRANSACTIONS","fetchTokenTransactions","mints0","mintsAs0","m","type","MINT","hash","transaction","sender","origin","token0Symbol","pool","token0","token1Symbol","token1","token0Address","token1Address","amountUSD","amountToken0","amount0","amountToken1","amount1","mints1","mintsAs1","burns0","burnsAs0","BURN","owner","burns1","burnsAs1","swaps0","swapsAs0","SWAP","swaps1","swapsAs1","SupportedChainId","MAINNET","ROPSTEN","RINKEBY","GOERLI","KOVAN","ARBITRUM_ONE","ARBITRUM_RINKEBY","OPTIMISTIC_KOVAN","isAddress","value","getAddress","ETHERSCAN_PREFIXES","getEtherscanLink","networkVersion","prefix","currentTimestamp","Date","getTime","shortenAddress","chars","substring","Fraction","escapeRegExp","string","replace","feeTierPercent","fee","toPrecision","notEmpty","useAllTokenData","tokens","byAddress","useAddTokenKeys","tokenAddresses","networkId","useTokenDatas","allTokenData","filter","get2DayChange","valueNow","value24HoursAgo","value48HoursAgo","currentChange","previousChange","adjustedPercentChange","isNaN","isFinite","getPercentChange","change","ETH_PRICES","fetchEthPrices","block24","block48","blockWeek","ethPriceUSD","oneDay","twoDay","week","oneWeek","useEthPrices","prices","setPrices","blockError","indexedPrices","formattedBlocks","TOKENS_BULK","block","tokenString","useFetchedTokenDatas","ethPrices","useQuery","loading24","error24","data24","loading48","error48","data48","loadingWeek","errorWeek","dataWeek","anyError","anyLoading","poolData","parsed24","parsed48","parsedWeek","volumeUSDChange","volumeUSDWeek","tvlUSD","tvlUSDChange","tvlToken","totalValueLocked","priceUSD","derivedETH","priceUSDOneDay","priceUSDWeek","priceUSDChange","priceUSDChangeWeek","txCount","feesUSD","exists","updatePoolData","addPoolKeys","updatePoolChartData","updatePoolTransactions","updateTickData","POOL_CHART","fetchPoolChartData","poolDayDatas","POOL_TRANSACTIONS","fetchPoolTransactions","mints","burns","swaps","useAllPoolData","network","pools","useAddPoolKeys","poolAddresses","usePoolDatas","allPoolData","untrackedAddresses","TOKEN_SEARCH","POOL_SEARCH","Column","AutoColumn","BAD_SRCS","GenericImageWrapper","UNSUPPORTED_LIST_URLS","OPTIMISM_LIST","ARBITRUM_LIST","POLYGON_LIST","DEFAULT_LIST_OF_LISTS","DEFAULT_ACTIVE_LIST_URLS","sortByListPriority","urlA","urlB","first","MAX_SAFE_INTEGER","second","WrappedTokenInfo","tokenInfo","list","isNative","isToken","_checksummedAddress","_tags","checksummedAddress","decimals","logoURI","tags","listTags","tagId","other","toLowerCase","equals","listCache","WeakMap","listToTokenMap","get","tokenMap","token","set","TRANSFORMED_DEFAULT_TOKEN_LIST","DEFAULT_TOKEN_LIST","useAllLists","lists","byUrl","combineMaps","map1","map2","useCombinedTokenMapFromUrls","sort","allTokens","currentUrl","useActiveListUrls","activeListUrls","useCombinedActiveList","uriToHttp","substr","match","useHttpLocations","getTokenLogoURL","StyledLogo","srcs","alt","refresh","src","find","onError","StyledEthereumLogo","CurrencyLogo","style","optimismList","arbitrumList","polygon","checkSummed","uriLocationsOptimism","uriLocationsArbitrum","uriLocationsPOlygon","tempSources","override","EthereumLogo","formatDollarAmount","num","digits","round","numbro","formatCurrency","average","mantissa","abbreviations","million","billion","formatAmount","format","Wrapper","sizeraw","margin","HigherLogo","CoveredLogo","DoubleCurrencyLogo","address0","address1","Card","LightCard","LightGreyCard","GreyCard","DarkGreyCard","GreyBadge","useTheme","useContext","ThemeContext","Base","RebassButton","ButtonPrimary","altDisabledStyle","ButtonGray","ButtonSecondary","ButtonOutlined","lighten","HoverIcon","SavedIcon","SmallOptionButton","useInterval","delay","leading","savedCallback","tick","PopoverContainer","show","transparentize","ReferenceElement","Arrow","Popover","content","placement","referenceElement","setReferenceElement","popperElement","setPopperElement","arrowElement","setArrowElement","usePopper","strategy","modifiers","options","offset","element","styles","update","attributes","popper","className","arrow","TooltipContainer","Tooltip","text","link","adjustSize","HoverInlineText","maxCharacters","showHover","setShowHover","onMouseEnter","onMouseLeave","networkPrefix","activeNewtork","toLocaleLowerCase","Container","StyledInput","input","hide","Blackout","ResponsiveGrid","Break","HoverText","HoverRowLink","OptionButton","enabled","Search","history","useHistory","menuRef","textRef","handleDown","focus","focused","setFocused","showMenu","setShowMenu","setValue","allPools","tokenData","setTokenData","setPoolData","toUpperCase","asSymbol","allFetchedTokens","asAddress","asName","allFetchedPools","as0","as1","tokenFullDatas","tokenFullLoading","poolDatasFull","formattedTokens","newTokens","combinedTokens","filteredSortedTokens","tokenEntryKey","RegExp","some","newPools","combinedPools","useFetchSearchResults","tokensShown","setTokensShown","poolsShown","setPoolsShown","handleNav","to","watchListTokenData","watchListPoolData","showWatchlist","setShowWatchlist","tokensForList","t0","t1","poolForList","p0","p1","keyName","onKeyDown","onChange","placeholder","onFocus","onBlur","pl","textAlign","ml","stopPropagation","whiteSpace","feeTier","token0Price","LogaContainer","LogoWrapper","FlyOut","NetworkRow","Badge","GreenDot","NetworkDropdown","mt","mr","n","HeaderFrame","HeaderControls","HeaderRow","HeaderLinks","Title","NavLink","UniIcon","activeClassName","StyledNavLink","SmallContentGrouping","Header","LogoDark","isActive","PhishAlert","StyledClose","URLWarning","useURLWarningToggle","showURLWarning","isMobile","display","hostname","fetchTokenList","pending","fulfilled","rejected","addList","removeList","enableList","disableList","acceptListUpdate","listVersionLabel","version","major","minor","patch","ChangesList","ul","ListUpdatePopup","popKey","listUrl","oldList","newList","auto","removeThisPopup","handleAcceptUpdate","category","action","diffTokenLists","tokensAdded","added","tokensChanged","changed","tokensRemoved","removed","numTokensChanged","flex","Fragment","flexGrow","RowNoFlex","TransactionPopup","success","summary","paddingRight","Popup","Fader","AnimatedFader","animated","PopupItem","removeAfterMs","timeout","clearTimeout","popupContent","txn","listUpdate","faderStyle","useSpring","config","duration","MobilePopupWrapper","MobilePopupInner","FixedPopupColumn","extraPadding","Popups","activePopups","popupList","useActivePopups","urlWarningActive","reverse","DarkModeQueryParamReader","parse","parseArrays","ignoreQueryPrefix","Chart","setLabel","topLeft","topRight","bottomLeft","bottomRight","minHeight","parsedValue","ResponsiveContainer","AreaChart","top","right","left","bottom","x1","y1","x2","y2","stopColor","stopOpacity","XAxis","dataKey","axisLine","tickLine","tickFormatter","minTickGap","cursor","contentStyle","formatter","payload","formattedTime","Area","updateProtocolData","useProtocolData","protocolData","protocol","useProtocolChartData","chartData","useProtocolTransactions","transactions","negative","wrap","simple","truncated","neutral","Math","abs","StyledSVG","svg","Loader","pulse","AnimatedImg","LocalLoader","v3","loadingAnimation","LoadingRows","Label","ClickableText","PageButtons","faded","MonoSpace","LinkWrapper","ResponsiveLogo","DataRow","index","SORT_FIELD","TokenTable","tokenDatas","maxItems","sortField","setSortField","sortDirection","setSortDirection","page","setPage","maxPage","setMaxPage","extraPages","floor","sortedTokens","x","handleSort","newField","field","PoolTable","poolDatas","sortedPools","PageWrapper","ThemedBackground","ThemedBackgroundGlobal","unixToDate","formatTime","buffer","now","add","inSeconds","diff","inMinutes","inHours","inDays","CustomBar","y","rx","activeWindow","alignItems","BarChart","monthly","formattedTimeDaily","formattedTimePlusWeek","formattedTimePlusMonth","weekly","isCurrent","isAfter","Bar","shape","SortText","abs0","abs1","outputTokenSymbol","inputTokenSymbol","TransactionTable","txFilter","setTxFilter","sortedTransactions","useTransformedVolumeData","group","String","year","unixToType","ChartWrapper","Home","scrollTo","volumeHover","setVolumeHover","liquidityHover","setLiquidityHover","leftLabel","setLeftLabel","rightLabel","setRightLabel","formattedTvlData","day","formattedVolumeData","weeklyVolumeData","monthlyVolumeData","daily","volumeWindow","setVolumeWindow","marginTop","feeChange","PoolPage","watchlistPools","CardWrapper","FixedContainer","ScrollableRow","DataCard","lineHeight","TopTokenMovers","topPriceIncrease","min","increaseRef","increaseSet","setIncreaseSet","scrollLeft","scrollWidth","entry","TokensOverview","watchListTokens","paddingTop","StyledPolling","StyledPollingDot","rotate360","Polling","isMounted","setIsMounted","latestBlock","timer1","opacity","Item","TopBar","justifyContent","Vibrant","getPalette","palette","detectedHex","hex","AAscore","shade","useColor","setColor","formattedAddress","useLayoutEffect","stale","getColorFromToken","tokenColor","isOnSwitch","ToggleWrapper","ToggleElementFree","CandleChart","textColor","chartRef","chartCreated","setChart","handleResize","parentElement","resize","clientWidth","timeScale","fitContent","scrollToPosition","isClient","chart","createChart","layout","fontFamily","rightPriceScale","scaleMargins","borderVisible","secondsVisible","tickMarkFormatter","unixTime","watermark","visible","grid","horzLines","vertLines","crosshair","horzLine","labelVisible","mode","vertLine","labelBackgroundColor","series","addCandlestickSeries","upColor","downColor","borderDownColor","borderUpColor","wickDownColor","wickUpColor","setData","subscribeCrosshairMove","param","point","seriesPrices","cmcEndpoint","ChartView","PriceText","ContentLayout","StyledCMCLogo","TokenPage","useTokenData","poolsForToken","tokenAddress","usePoolsForToken","useTokenTransactions","useTokenChartData","cmcLink","setLink","fetchLink","useCMCLink","PRICE","view","setView","latestValue","setLatestValue","valueLabel","setValueLabel","timeWindow","oldestTimestampFetched","oldestFetchedTimestamp","fetchingError","secondsInterval","useTokenPriceData","adjustedToCurrent","adjusted","onClickCapture","VOL","TVL","RedirectInvalidToken","FEE_TIER_TO_TICK_SPACING","fetchInitializedTicks","poolAddress","tickIdxLowerBound","tickIdxUpperBound","tickQuery","surroundingTicks","surroundingTicksResult","ticks","poolQuery","fetchTicksSurroundingPrice","numSurroundingTicks","poolResult","poolCurrentTick","liquidity","token0Decimals","token1Decimals","poolCurrentTickIdx","tickSpacing","activeTickIdx","initializedTicksResult","initializedTicks","tickIdxToInitializedTick","keyBy","activeTickIdxForPrice","TickMath","MIN_TICK","MAX_TICK","activeTickProcessed","liquidityActive","tickIdx","liquidityNet","price0","tickToPrice","price1","liquidityGross","activeTick","Direction","subsequentTicks","computeSurroundingTicks","direction","previousTickProcessed","processedTicks","currentTickIdx","ASC","currentTickProcessed","currentInitializedTick","DESC","notEqual","previousTicks","ticksProcessed","CurrentPriceLabel","chartProps","labelData","entryData","toLocaleString","minimumSignificantDigits","TooltipWrapper","CustomToolTip","currentPrice","tvlToken0","tvlToken1","ControlsWrapper","ActionButton","ZOOM_INTERVAL","initialState","INITIAL_TICKS_TO_FETCH","refAreaLeft","refAreaRight","DensityChart","formattedAddress0","formattedAddress1","tickData","usePoolTickData","poolTickData","updatePoolTickData","ticksToFetch","setTicksToFetch","amountTicks","setLoading","zoomState","setZoomState","setFormattedData","sqrtPriceX96","getSqrtRatioAtTick","feeAmount","mockTicks","TICK_SPACINGS","multiply","nextSqrtX96","maxAmountToken0","CurrencyAmount","fromRawAmount","getOutputAmount","outputRes0","token1Amount","toExact","activeLiquidity","newData","formatData","atZoomMax","atZoomMin","handleZoomIn","handleZoomOut","zoomedData","reversed","isAnimationActive","Cell","LabelList","position","TokenButton","ToggleRow","usePoolChartData","usePoolTransactions","formattedFeesUSD","token1Price","DENSITY","FEES","AppWrapper","HeaderWrapper","BodyWrapper","warningActive","Marginer","Hide1080","WarningWrapper","WarningBanner","App","useLocation","setActiveNetwork","showNotSyncedWarning","fallback","component","maxWidth","exact","strict","PoolsOverview","blockNumber","createReducer","builder","addCase","max","popup","nanoid","updateVersion","pairKey","pairs","lastUpdateVersionTimestamp","serializedToken","serializedPair","tokenAAddress","tokenBAddress","NEW_LIST_STATE","loadingRequestId","pendingUpdate","lastInitializedDefaultListOfLists","requestId","tokenList","getVersionUpgrade","VersionUpgrade","NONE","errorMessage","u","lastInitializedSet","s","l","Set","newListOfListsSet","has","ADDRESS_REGEX","LOWER_HEX_REGEX","toCallKey","test","callData","addMulticallListeners","removeMulticallListeners","fetchingMulticallResults","errorFetchingMulticallResults","updateMulticallResults","callResults","calls","blocksPerFetch","listeners","callListeners","callKey","fetchingBlockNumber","lastUpdated","PERSISTED_KEYS","store","configureStore","reducer","multicall","middleware","getDefaultMiddleware","thunk","immutableCheck","save","states","preloadedState","load","Updater","darkHandler","matches","matchMedia","addListener","removeListener","GLOBAL_DATA","GLOBAL_CHART","fetchChartData","uniswapDayDatas","useFetchGlobalChartData","onEthereum","indexedData","adjustedData","useAdjustedData","fetchTopTransactions","mintEntries","burnEntries","swapEntries","dataClientOverride","activeDataClient","factories","totalVolumeUSD","volumeOneWindowAgo","txCountOneWindowAgo","txCountChange","feesOneWindowAgo","totalFeesUSD","useFetchProtocolData","fetchedProtocolData","fetchedChartData","chartError","TOP_TOKENS","updateTokenDatas","useUpdateTokenData","useTopTokenAddresses","tokenDataError","tokenDataLoading","TOP_POOLS","POOLS_BULK","poolString","useUpdatePoolData","useTopPoolAddresses","totalValueLockedToken0","totalValueLockedToken1","sqrtPrice","poolDataError","poolDataLoading","SUBGRAPH_HEALTH","updateStatus","indexingStatusForCurrentVersion","chains","chainHeadBlock","useFetchedSubgraphStatus","newSyncedBlock","tokenListValidator","Ajv","allErrors","compile","schema","getTokenList","isLast","validationErrors","dataPath","VISIBILITY_STATE_SUPPORTED","isWindowVisible","visibilityState","listener","useIsWindowVisible","fetchList","sendDispatch","useFetchListCallback","fetchAllListsCallback","bump","PATCH","MINOR","minVersionBump","MAJOR","GOOGLE_ANALYTICS_ID","REACT_APP_GOOGLE_ANALYTICS_ID","Updaters","initialize","customBrowserType","testMode","exception","description","filename","lineno","colno","fatal","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.49fc207d.chunk.js","sourcesContent":["import i18next from 'i18next'\r\nimport { initReactI18next } from 'react-i18next'\r\nimport XHR from 'i18next-xhr-backend'\r\nimport LanguageDetector from 'i18next-browser-languagedetector'\r\n\r\ni18next\r\n  .use(XHR)\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    backend: {\r\n      loadPath: `./locales/{{lng}}.json`,\r\n    },\r\n    react: {\r\n      useSuspense: true,\r\n    },\r\n    fallbackLng: 'en',\r\n    preload: ['en'],\r\n    keySeparator: false,\r\n    interpolation: { escapeValue: false },\r\n  })\r\n\r\nexport default i18next\r\n","import { useEffect } from 'react'\r\nimport ReactGA from 'react-ga'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\n\r\n// fires a GA pageview every time the route changes\r\nexport default function GoogleAnalyticsReporter({ location: { pathname, search } }: RouteComponentProps): null {\r\n  useEffect(() => {\r\n    ReactGA.pageview(`${pathname}${search}`)\r\n  }, [pathname, search])\r\n  return null\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo_white.57af584b.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z\",\n  stroke: \"black\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z\",\n  stroke: \"black\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z\",\n  stroke: \"black\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n});\n\nfunction SvgMenu(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMenu);\nexport default __webpack_public_path__ + \"static/media/menu.f7a8c0ea.svg\";\nexport { ForwardRef as ReactComponent };","import { RefObject, useEffect, useRef } from 'react'\r\n\r\nexport function useOnClickOutside<T extends HTMLElement>(\r\n  node: RefObject<T | undefined>,\r\n  handler: undefined | (() => void)\r\n) {\r\n  const handlerRef = useRef<undefined | (() => void)>(handler)\r\n  useEffect(() => {\r\n    handlerRef.current = handler\r\n  }, [handler])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (node.current?.contains(e.target as Node) ?? false) {\r\n        return\r\n      }\r\n      if (handlerRef.current) handlerRef.current()\r\n    }\r\n\r\n    document.addEventListener('click', handleClickOutside)\r\n\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside)\r\n    }\r\n  }, [node])\r\n}\r\n","import { createAction } from '@reduxjs/toolkit'\r\nimport { TokenList } from '@uniswap/token-lists'\r\nimport { NetworkInfo } from 'constants/networks'\r\n\r\nexport type PopupContent = {\r\n  listUpdate: {\r\n    listUrl: string\r\n    oldList: TokenList\r\n    newList: TokenList\r\n    auto: boolean\r\n  }\r\n}\r\n\r\nexport enum ApplicationModal {\r\n  WALLET,\r\n  SETTINGS,\r\n  MENU,\r\n}\r\n\r\nexport const updateBlockNumber = createAction<{ chainId: number; blockNumber: number }>('application/updateBlockNumber')\r\nexport const setOpenModal = createAction<ApplicationModal | null>('application/setOpenModal')\r\nexport const addPopup = createAction<{ key?: string; removeAfterMs?: number | null; content: PopupContent }>(\r\n  'application/addPopup'\r\n)\r\nexport const removePopup = createAction<{ key: string }>('application/removePopup')\r\nexport const updateSubgraphStatus = createAction<{\r\n  available: boolean | null\r\n  syncedBlock: number | undefined\r\n  headBlock: number | undefined\r\n}>('application/updateSubgraphStatus')\r\nexport const updateActiveNetworkVersion = createAction<{ activeNetworkVersion: NetworkInfo }>(\r\n  'application/updateActiveNetworkVersion'\r\n)\r\n","import OPTIMISM_LOGO_URL from '../assets/images/optimism.svg'\r\nimport ARBITRUM_LOGO_URL from '../assets/images/arbitrum.svg'\r\nimport ETHEREUM_LOGO_URL from '../assets/images/ethereum-logo.png'\r\nimport POLYGON_LOGO_URL from '../assets/images/polygon-logo.png'\r\n\r\nexport enum SupportedNetwork {\r\n  ETHEREUM,\r\n  ARBITRUM,\r\n  OPTIMISM,\r\n  POLYGON,\r\n}\r\n\r\nexport type NetworkInfo = {\r\n  id: SupportedNetwork\r\n  route: string\r\n  name: string\r\n  imageURL: string\r\n  bgColor: string\r\n  primaryColor: string\r\n  secondaryColor: string\r\n  blurb?: string\r\n}\r\n\r\nexport const EthereumNetworkInfo: NetworkInfo = {\r\n  id: SupportedNetwork.ETHEREUM,\r\n  route: '',\r\n  name: 'Ethereum',\r\n  bgColor: '#fc077d',\r\n  primaryColor: '#fc077d',\r\n  secondaryColor: '#2172E5',\r\n  imageURL: ETHEREUM_LOGO_URL,\r\n}\r\n\r\nexport const ArbitrumNetworkInfo: NetworkInfo = {\r\n  id: SupportedNetwork.ARBITRUM,\r\n  route: 'arbitrum',\r\n  name: 'Arbitrum',\r\n  imageURL: ARBITRUM_LOGO_URL,\r\n  bgColor: '#0A294B',\r\n  primaryColor: '#0490ED',\r\n  secondaryColor: '#96BEDC',\r\n  blurb: 'Beta',\r\n}\r\n\r\nexport const OptimismNetworkInfo: NetworkInfo = {\r\n  id: SupportedNetwork.OPTIMISM,\r\n  route: 'optimism',\r\n  name: 'Optimism',\r\n  bgColor: '#F01B36',\r\n  primaryColor: '#F01B36',\r\n  secondaryColor: '#FB7876',\r\n  imageURL: OPTIMISM_LOGO_URL,\r\n  blurb: 'Beta',\r\n}\r\n\r\nexport const PolygonNetworkInfo: NetworkInfo = {\r\n  id: SupportedNetwork.POLYGON,\r\n  route: 'polygon',\r\n  name: 'Polygon',\r\n  bgColor: '#8247e5',\r\n  primaryColor: '#8247e5',\r\n  secondaryColor: '#FB7876',\r\n  imageURL: POLYGON_LOGO_URL,\r\n  blurb: '',\r\n}\r\n\r\nexport const SUPPORTED_NETWORK_VERSIONS: NetworkInfo[] = [\r\n  EthereumNetworkInfo,\r\n  PolygonNetworkInfo,\r\n  OptimismNetworkInfo,\r\n  ArbitrumNetworkInfo,\r\n]\r\n","import { ApolloClient, InMemoryCache } from '@apollo/client'\r\n\r\nexport const healthClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/index-node/graphql',\r\n  cache: new InMemoryCache(),\r\n})\r\n\r\nexport const blockClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/blocklytics/ethereum-blocks',\r\n  cache: new InMemoryCache(),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'no-cache',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'no-cache',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const client = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/uniswap-v3-subgraph',\r\n  cache: new InMemoryCache({\r\n    typePolicies: {\r\n      Token: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n      Pool: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n    },\r\n  }),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'no-cache',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'no-cache',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const arbitrumClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/arbitrum-dev',\r\n  cache: new InMemoryCache({\r\n    typePolicies: {\r\n      Token: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n      Pool: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n    },\r\n  }),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'cache-first',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'cache-first',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const arbitrumBlockClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/arbitrum-one-blocks',\r\n  cache: new InMemoryCache(),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'cache-first',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'cache-first',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const optimismClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/optimism-post-regenesis',\r\n  cache: new InMemoryCache({\r\n    typePolicies: {\r\n      Token: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n      Pool: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n    },\r\n  }),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'no-cache',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'no-cache',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const optimismBlockClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/uni-testing-subgraph',\r\n  cache: new InMemoryCache(),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'cache-first',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'cache-first',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const polygonClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/uniswap-v3-polygon',\r\n  cache: new InMemoryCache({\r\n    typePolicies: {\r\n      Token: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n      Pool: {\r\n        // Singleton types that have no identifying field can use an empty\r\n        // array for their keyFields.\r\n        keyFields: false,\r\n      },\r\n    },\r\n  }),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'no-cache',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'no-cache',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport const polygonBlockClient = new ApolloClient({\r\n  uri: 'https://api.thegraph.com/subgraphs/name/ianlapham/polygon-blocks',\r\n  cache: new InMemoryCache(),\r\n  queryDeduplication: true,\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      fetchPolicy: 'cache-first',\r\n    },\r\n    query: {\r\n      fetchPolicy: 'cache-first',\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n","export default __webpack_public_path__ + \"static/media/optimism.c432ee1c.svg\";","export default __webpack_public_path__ + \"static/media/arbitrum.abae01ba.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/polygon-logo.1140771b.png\";","import { FortmaticConnector as FortmaticConnectorCore } from '@web3-react/fortmatic-connector'\r\n\r\nexport const OVERLAY_READY = 'OVERLAY_READY'\r\n\r\ntype FormaticSupportedChains = 1 | 3 | 4 | 42\r\n\r\nconst CHAIN_ID_NETWORK_ARGUMENT: { readonly [chainId in FormaticSupportedChains]: string | undefined } = {\r\n  [1]: undefined,\r\n  [3]: 'ropsten',\r\n  [4]: 'rinkeby',\r\n  [42]: 'kovan',\r\n}\r\n\r\nexport class FortmaticConnector extends FortmaticConnectorCore {\r\n  async activate() {\r\n    if (!this.fortmatic) {\r\n      const { default: Fortmatic } = await import('fortmatic')\r\n\r\n      const { apiKey, chainId } = this as any\r\n      if (chainId in CHAIN_ID_NETWORK_ARGUMENT) {\r\n        this.fortmatic = new Fortmatic(apiKey, CHAIN_ID_NETWORK_ARGUMENT[chainId as FormaticSupportedChains])\r\n      } else {\r\n        throw new Error(`Unsupported network ID: ${chainId}`)\r\n      }\r\n    }\r\n\r\n    const provider = this.fortmatic.getProvider()\r\n\r\n    const pollForOverlayReady = new Promise<void>((resolve) => {\r\n      const interval = setInterval(() => {\r\n        if (provider.overlayReady) {\r\n          clearInterval(interval)\r\n          this.emit(OVERLAY_READY)\r\n          resolve()\r\n        }\r\n      }, 200)\r\n    })\r\n\r\n    const [account] = await Promise.all([\r\n      provider.enable().then((accounts: string[]) => accounts[0]),\r\n      pollForOverlayReady,\r\n    ])\r\n\r\n    return { provider: this.fortmatic.getProvider(), chainId: (this as any).chainId, account }\r\n  }\r\n}\r\n","import { ConnectorUpdate } from '@web3-react/types'\r\nimport { AbstractConnector } from '@web3-react/abstract-connector'\r\nimport invariant from 'tiny-invariant'\r\n\r\ninterface NetworkConnectorArguments {\r\n  urls: { [chainId: number]: string }\r\n  defaultChainId?: number\r\n}\r\n\r\n// taken from ethers.js, compatible interface with web3 provider\r\ntype AsyncSendable = {\r\n  isMetaMask?: boolean\r\n  host?: string\r\n  path?: string\r\n  sendAsync?: (request: any, callback: (error: any, response: any) => void) => void\r\n  send?: (request: any, callback: (error: any, response: any) => void) => void\r\n}\r\n\r\nclass RequestError extends Error {\r\n  constructor(message: string, public code: number, public data?: unknown) {\r\n    super(message)\r\n  }\r\n}\r\n\r\ninterface BatchItem {\r\n  request: { jsonrpc: '2.0'; id: number; method: string; params: unknown }\r\n  resolve: (result: any) => void\r\n  reject: (error: Error) => void\r\n}\r\n\r\nclass MiniRpcProvider implements AsyncSendable {\r\n  public readonly isMetaMask: false = false\r\n  public readonly chainId: number\r\n  public readonly url: string\r\n  public readonly host: string\r\n  public readonly path: string\r\n  public readonly batchWaitTimeMs: number\r\n\r\n  private nextId = 1\r\n  private batchTimeoutId: ReturnType<typeof setTimeout> | null = null\r\n  private batch: BatchItem[] = []\r\n\r\n  constructor(chainId: number, url: string, batchWaitTimeMs?: number) {\r\n    this.chainId = chainId\r\n    this.url = url\r\n    const parsed = new URL(url)\r\n    this.host = parsed.host\r\n    this.path = parsed.pathname\r\n    // how long to wait to batch calls\r\n    this.batchWaitTimeMs = batchWaitTimeMs ?? 50\r\n  }\r\n\r\n  public readonly clearBatch = async () => {\r\n    console.debug('Clearing batch', this.batch)\r\n    const batch = this.batch\r\n    this.batch = []\r\n    this.batchTimeoutId = null\r\n    let response: Response\r\n    try {\r\n      response = await fetch(this.url, {\r\n        method: 'POST',\r\n        headers: { 'content-type': 'application/json', accept: 'application/json' },\r\n        body: JSON.stringify(batch.map((item) => item.request)),\r\n      })\r\n    } catch (error) {\r\n      batch.forEach(({ reject }) => reject(new Error('Failed to send batch call')))\r\n      return\r\n    }\r\n\r\n    if (!response.ok) {\r\n      batch.forEach(({ reject }) => reject(new RequestError(`${response.status}: ${response.statusText}`, -32000)))\r\n      return\r\n    }\r\n\r\n    let json\r\n    try {\r\n      json = await response.json()\r\n    } catch (error) {\r\n      batch.forEach(({ reject }) => reject(new Error('Failed to parse JSON response')))\r\n      return\r\n    }\r\n    const byKey = batch.reduce<{ [id: number]: BatchItem }>((memo, current) => {\r\n      memo[current.request.id] = current\r\n      return memo\r\n    }, {})\r\n    for (const result of json) {\r\n      const {\r\n        resolve,\r\n        reject,\r\n        request: { method },\r\n      } = byKey[result.id]\r\n      if (resolve && reject) {\r\n        if ('error' in result) {\r\n          reject(new RequestError(result?.error?.message, result?.error?.code, result?.error?.data))\r\n        } else if ('result' in result) {\r\n          resolve(result.result)\r\n        } else {\r\n          reject(new RequestError(`Received unexpected JSON-RPC response to ${method} request.`, -32000, result))\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public readonly sendAsync = (\r\n    request: {\r\n      jsonrpc: '2.0'\r\n      id: number | string | null\r\n      method: string\r\n      params?: unknown[] | Record<string, unknown>\r\n    },\r\n    callback: (error: any, response: any) => void\r\n  ): void => {\r\n    this.request(request.method, request.params)\r\n      .then((result) => callback(null, { jsonrpc: '2.0', id: request.id, result }))\r\n      .catch((error) => callback(error, null))\r\n  }\r\n\r\n  public readonly request = async (\r\n    method: string | { method: string; params: unknown[] },\r\n    params?: unknown[] | Record<string, unknown>\r\n  ): Promise<unknown> => {\r\n    if (typeof method !== 'string') {\r\n      return this.request(method.method, method.params)\r\n    }\r\n    if (method === 'eth_chainId') {\r\n      return `0x${this.chainId.toString(16)}`\r\n    }\r\n    const promise = new Promise((resolve, reject) => {\r\n      this.batch.push({\r\n        request: {\r\n          jsonrpc: '2.0',\r\n          id: this.nextId++,\r\n          method,\r\n          params,\r\n        },\r\n        resolve,\r\n        reject,\r\n      })\r\n    })\r\n    this.batchTimeoutId = this.batchTimeoutId ?? setTimeout(this.clearBatch, this.batchWaitTimeMs)\r\n    return promise\r\n  }\r\n}\r\n\r\nexport class NetworkConnector extends AbstractConnector {\r\n  private readonly providers: { [chainId: number]: MiniRpcProvider }\r\n  private currentChainId: number\r\n\r\n  constructor({ urls, defaultChainId }: NetworkConnectorArguments) {\r\n    invariant(defaultChainId || Object.keys(urls).length === 1, 'defaultChainId is a required argument with >1 url')\r\n    super({ supportedChainIds: Object.keys(urls).map((k): number => Number(k)) })\r\n\r\n    this.currentChainId = defaultChainId || Number(Object.keys(urls)[0])\r\n    this.providers = Object.keys(urls).reduce<{ [chainId: number]: MiniRpcProvider }>((accumulator, chainId) => {\r\n      accumulator[Number(chainId)] = new MiniRpcProvider(Number(chainId), urls[Number(chainId)])\r\n      return accumulator\r\n    }, {})\r\n  }\r\n\r\n  public get provider(): MiniRpcProvider {\r\n    return this.providers[this.currentChainId]\r\n  }\r\n\r\n  public async activate(): Promise<ConnectorUpdate> {\r\n    return { provider: this.providers[this.currentChainId], chainId: this.currentChainId, account: null }\r\n  }\r\n\r\n  public async getProvider(): Promise<MiniRpcProvider> {\r\n    return this.providers[this.currentChainId]\r\n  }\r\n\r\n  public async getChainId(): Promise<number> {\r\n    return this.currentChainId\r\n  }\r\n\r\n  public async getAccount(): Promise<null> {\r\n    return null\r\n  }\r\n\r\n  public deactivate() {\r\n    return\r\n  }\r\n}\r\n","import { Web3Provider } from '@ethersproject/providers'\r\nimport { InjectedConnector } from '@web3-react/injected-connector'\r\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector'\r\nimport { WalletLinkConnector } from '@web3-react/walletlink-connector'\r\nimport { PortisConnector } from '@web3-react/portis-connector'\r\n\r\nimport { FortmaticConnector } from './Fortmatic'\r\nimport { NetworkConnector } from './NetworkConnector'\r\n\r\nconst NETWORK_URL = process.env.REACT_APP_NETWORK_URL\r\nconst FORMATIC_KEY = process.env.REACT_APP_FORTMATIC_KEY\r\nconst PORTIS_ID = process.env.REACT_APP_PORTIS_ID\r\n\r\nexport const NETWORK_CHAIN_ID: number = parseInt(process.env.REACT_APP_CHAIN_ID ?? '1')\r\n\r\nif (typeof NETWORK_URL === 'undefined') {\r\n  throw new Error(`REACT_APP_NETWORK_URL must be a defined environment variable`)\r\n}\r\n\r\nexport const network = new NetworkConnector({\r\n  urls: { [NETWORK_CHAIN_ID]: NETWORK_URL },\r\n})\r\n\r\nlet networkLibrary: Web3Provider | undefined\r\nexport function getNetworkLibrary(): Web3Provider {\r\n  return (networkLibrary = networkLibrary ?? new Web3Provider(network.provider as any))\r\n}\r\n\r\nexport const injected = new InjectedConnector({\r\n  supportedChainIds: [1, 3, 4, 5, 42],\r\n})\r\n\r\n// mainnet only\r\nexport const walletconnect = new WalletConnectConnector({\r\n  rpc: { 1: NETWORK_URL },\r\n  bridge: 'https://bridge.walletconnect.org',\r\n  qrcode: true,\r\n  pollingInterval: 15000,\r\n})\r\n\r\n// mainnet only\r\nexport const fortmatic = new FortmaticConnector({\r\n  apiKey: FORMATIC_KEY ?? '',\r\n  chainId: 1,\r\n})\r\n\r\n// mainnet only\r\nexport const portis = new PortisConnector({\r\n  dAppId: PORTIS_ID ?? '',\r\n  networks: [1],\r\n})\r\n\r\n// mainnet only\r\nexport const walletlink = new WalletLinkConnector({\r\n  url: NETWORK_URL,\r\n  appName: 'Uniswap',\r\n  appLogoUrl:\r\n    'https://mpng.pngfly.com/20181202/bex/kisspng-emoji-domain-unicorn-pin-badges-sticker-unicorn-tumblr-emoji-unicorn-iphoneemoji-5c046729264a77.5671679315437924251569.jpg',\r\n})\r\n","import { BigNumber } from '@ethersproject/bignumber'\r\nimport { Percent, Token } from '@uniswap/sdk-core'\r\nimport JSBI from 'jsbi'\r\nimport { AbstractConnector } from '@web3-react/abstract-connector'\r\n\r\nimport { fortmatic, injected, portis, walletconnect, walletlink } from '../connectors'\r\n\r\nexport const FACTORY_ADDRESS = '0xFeabCc62240297F1e4b238937D68e7516f0918D7'\r\n\r\nexport const ROUTER_ADDRESS = '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D'\r\n\r\nexport const ZERO_ADDRESS = '0x0000000000000000000000000000000000000000'\r\n\r\nexport const MAX_UINT128 = BigNumber.from(2).pow(128).sub(1)\r\n\r\n// a list of tokens by chain\r\ntype ChainTokenList = {\r\n  readonly [chainId: number]: Token[]\r\n}\r\n\r\nexport const WETH_ADDRESS = '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2'\r\n\r\nexport const WETH_ADDRESSES = [WETH_ADDRESS, '0x82af49447d8a07e3bd95bd0d56f35241523fbab1']\r\n\r\n// Block time here is slightly higher (~1s) than average in order to avoid ongoing proposals past the displayed time\r\nexport const AVERAGE_BLOCK_TIME_IN_SECS = 13\r\nexport const PROPOSAL_LENGTH_IN_BLOCKS = 40_320\r\nexport const PROPOSAL_LENGTH_IN_SECS = AVERAGE_BLOCK_TIME_IN_SECS * PROPOSAL_LENGTH_IN_BLOCKS\r\n\r\nexport const GOVERNANCE_ADDRESS = '0x5e4be8Bc9637f0EAA1A755019e06A68ce081D58F'\r\n\r\nexport const TIMELOCK_ADDRESS = '0x1a9C8182C09F50C8318d769245beA52c32BE35BC'\r\n\r\nexport const NETWORK_ONLY = {\r\n  fetchPolicy: 'network-only',\r\n}\r\n\r\n// temporary! fixing USD accounting on subgraph - open issue if urgent\r\nexport const TOKEN_HIDE = [\r\n  '0xd46ba6d942050d489dbd938a2c909a5d5039a161',\r\n  '0x7dfb72a2aad08c937706f21421b15bfc34cba9ca',\r\n  '0x12b32f10a499bf40db334efe04226cca00bf2d9b',\r\n]\r\nexport const POOL_HIDE = [\r\n  '0x86d257cdb7bc9c0df10e84c8709697f92770b335',\r\n  '0xf8dbd52488978a79dfe6ffbd81a01fc5948bf9ee',\r\n  '0x8fe8d9bb8eeba3ed688069c3d6b556c9ca258248',\r\n  '0xa850478adaace4c08fc61de44d8cf3b64f359bec',\r\n]\r\n\r\nexport interface WalletInfo {\r\n  connector?: AbstractConnector\r\n  name: string\r\n  iconName: string\r\n  description: string\r\n  href: string | null\r\n  color: string\r\n  primary?: true\r\n  mobile?: true\r\n  mobileOnly?: true\r\n}\r\n\r\nexport const SUPPORTED_WALLETS: { [key: string]: WalletInfo } = {\r\n  INJECTED: {\r\n    connector: injected,\r\n    name: 'Injected',\r\n    iconName: 'arrow-right.svg',\r\n    description: 'Injected web3 provider.',\r\n    href: null,\r\n    color: '#010101',\r\n    primary: true,\r\n  },\r\n  METAMASK: {\r\n    connector: injected,\r\n    name: 'MetaMask',\r\n    iconName: 'metamask.png',\r\n    description: 'Easy-to-use browser extension.',\r\n    href: null,\r\n    color: '#E8831D',\r\n  },\r\n  WALLET_CONNECT: {\r\n    connector: walletconnect,\r\n    name: 'WalletConnect',\r\n    iconName: 'walletConnectIcon.svg',\r\n    description: 'Connect to Trust Wallet, Rainbow Wallet and more...',\r\n    href: null,\r\n    color: '#4196FC',\r\n    mobile: true,\r\n  },\r\n  WALLET_LINK: {\r\n    connector: walletlink,\r\n    name: 'Coinbase Wallet',\r\n    iconName: 'coinbaseWalletIcon.svg',\r\n    description: 'Use Coinbase Wallet app on mobile device',\r\n    href: null,\r\n    color: '#315CF5',\r\n  },\r\n  COINBASE_LINK: {\r\n    name: 'Open in Coinbase Wallet',\r\n    iconName: 'coinbaseWalletIcon.svg',\r\n    description: 'Open in Coinbase Wallet app.',\r\n    href: 'https://go.cb-w.com/mtUDhEZPy1',\r\n    color: '#315CF5',\r\n    mobile: true,\r\n    mobileOnly: true,\r\n  },\r\n  FORTMATIC: {\r\n    connector: fortmatic,\r\n    name: 'Fortmatic',\r\n    iconName: 'fortmaticIcon.png',\r\n    description: 'Login using Fortmatic hosted wallet',\r\n    href: null,\r\n    color: '#6748FF',\r\n    mobile: true,\r\n  },\r\n  Portis: {\r\n    connector: portis,\r\n    name: 'Portis',\r\n    iconName: 'portisIcon.png',\r\n    description: 'Login using Portis hosted wallet',\r\n    href: null,\r\n    color: '#4A6C9B',\r\n    mobile: true,\r\n  },\r\n}\r\n\r\nexport const NetworkContextName = 'NETWORK'\r\n\r\n// used for rewards deadlines\r\nexport const BIG_INT_SECONDS_IN_WEEK = JSBI.BigInt(60 * 60 * 24 * 7)\r\n\r\nexport const BIG_INT_ZERO = JSBI.BigInt(0)\r\n\r\n// one basis point\r\nexport const ONE_BIPS = new Percent(JSBI.BigInt(1), JSBI.BigInt(10000))\r\nexport const BIPS_BASE = JSBI.BigInt(10000)\r\n// used for warning states\r\nexport const ALLOWED_PRICE_IMPACT_LOW: Percent = new Percent(JSBI.BigInt(100), BIPS_BASE) // 1%\r\nexport const ALLOWED_PRICE_IMPACT_MEDIUM: Percent = new Percent(JSBI.BigInt(300), BIPS_BASE) // 3%\r\nexport const ALLOWED_PRICE_IMPACT_HIGH: Percent = new Percent(JSBI.BigInt(500), BIPS_BASE) // 5%\r\n// if the price slippage exceeds this number, force the user to type 'confirm' to execute\r\nexport const PRICE_IMPACT_WITHOUT_FEE_CONFIRM_MIN: Percent = new Percent(JSBI.BigInt(1000), BIPS_BASE) // 10%\r\n// for non expert mode disable swaps above this\r\nexport const BLOCKED_PRICE_IMPACT_NON_EXPERT: Percent = new Percent(JSBI.BigInt(1500), BIPS_BASE) // 15%\r\n\r\n// used to ensure the user doesn't send so much ETH so they end up with <.01\r\nexport const MIN_ETH: JSBI = JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(16)) // .01 ETH\r\nexport const BETTER_TRADE_LESS_HOPS_THRESHOLD = new Percent(JSBI.BigInt(50), JSBI.BigInt(10000))\r\n\r\nexport const ZERO_PERCENT = new Percent('0')\r\nexport const ONE_HUNDRED_PERCENT = new Percent('1')\r\n\r\n// SDN OFAC addresses\r\nexport const BLOCKED_ADDRESSES: string[] = [\r\n  '0x7F367cC41522cE07553e823bf3be79A889DEbe1B',\r\n  '0xd882cFc20F52f2599D84b8e8D58C7FB62cfE344b',\r\n  '0x901bb9583b24D97e995513C6778dc6888AB6870e',\r\n  '0xA7e5d5A720f06526557c513402f2e6B5fA20b008',\r\n]\r\n","import { Web3Provider } from '@ethersproject/providers'\r\nimport { useWeb3React as useWeb3ReactCore } from '@web3-react/core'\r\nimport { Web3ReactContextInterface } from '@web3-react/core/dist/types'\r\nimport { useEffect, useState } from 'react'\r\nimport { isMobile } from 'react-device-detect'\r\nimport { injected } from '../connectors'\r\nimport { NetworkContextName } from '../constants'\r\n\r\nexport function useActiveWeb3React(): Web3ReactContextInterface<Web3Provider> & { chainId?: number } {\r\n  const context = useWeb3ReactCore<Web3Provider>()\r\n  const contextNetwork = useWeb3ReactCore<Web3Provider>(NetworkContextName)\r\n  return context.active ? context : contextNetwork\r\n}\r\n\r\nexport function useEagerConnect() {\r\n  const { activate, active } = useWeb3ReactCore() // specifically using useWeb3ReactCore because of what this hook does\r\n  const [tried, setTried] = useState(false)\r\n\r\n  useEffect(() => {\r\n    injected.isAuthorized().then((isAuthorized) => {\r\n      if (isAuthorized) {\r\n        activate(injected, undefined, true).catch(() => {\r\n          setTried(true)\r\n        })\r\n      } else {\r\n        if (isMobile && window.ethereum) {\r\n          activate(injected, undefined, true).catch(() => {\r\n            setTried(true)\r\n          })\r\n        } else {\r\n          setTried(true)\r\n        }\r\n      }\r\n    })\r\n  }, [activate]) // intentionally only running on mount (make sure it's only mounted once :))\r\n\r\n  // if the connection worked, wait until we get confirmation of that to flip the flag\r\n  useEffect(() => {\r\n    if (active) {\r\n      setTried(true)\r\n    }\r\n  }, [active])\r\n\r\n  return tried\r\n}\r\n\r\n/**\r\n * Use for network and injected - logs user in\r\n * and out after checking what network theyre on\r\n */\r\nexport function useInactiveListener(suppress = false) {\r\n  const { active, error, activate } = useWeb3ReactCore() // specifically using useWeb3React because of what this hook does\r\n\r\n  useEffect(() => {\r\n    const { ethereum } = window\r\n\r\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\r\n      const handleChainChanged = () => {\r\n        // eat errors\r\n        activate(injected, undefined, true).catch((error) => {\r\n          console.error('Failed to activate after chain changed', error)\r\n        })\r\n      }\r\n\r\n      const handleAccountsChanged = (accounts: string[]) => {\r\n        if (accounts.length > 0) {\r\n          // eat errors\r\n          activate(injected, undefined, true).catch((error) => {\r\n            console.error('Failed to activate after accounts changed', error)\r\n          })\r\n        }\r\n      }\r\n\r\n      ethereum.on('chainChanged', handleChainChanged)\r\n      ethereum.on('accountsChanged', handleAccountsChanged)\r\n\r\n      return () => {\r\n        if (ethereum.removeListener) {\r\n          ethereum.removeListener('chainChanged', handleChainChanged)\r\n          ethereum.removeListener('accountsChanged', handleAccountsChanged)\r\n        }\r\n      }\r\n    }\r\n    return undefined\r\n  }, [active, error, suppress, activate])\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport {\r\n  arbitrumBlockClient,\r\n  arbitrumClient,\r\n  blockClient,\r\n  client,\r\n  optimismClient,\r\n  optimismBlockClient,\r\n  polygonBlockClient,\r\n  polygonClient,\r\n} from 'apollo/client'\r\nimport { NetworkInfo, SupportedNetwork } from 'constants/networks'\r\nimport { useCallback, useMemo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { AppDispatch, AppState } from '../index'\r\nimport {\r\n  addPopup,\r\n  ApplicationModal,\r\n  PopupContent,\r\n  removePopup,\r\n  setOpenModal,\r\n  updateActiveNetworkVersion,\r\n  updateSubgraphStatus,\r\n} from './actions'\r\n\r\nexport function useBlockNumber(): number | undefined {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  return useSelector((state: AppState) => state.application.blockNumber[chainId ?? -1])\r\n}\r\n\r\nexport function useModalOpen(modal: ApplicationModal): boolean {\r\n  const openModal = useSelector((state: AppState) => state.application.openModal)\r\n  return openModal === modal\r\n}\r\n\r\nexport function useToggleModal(modal: ApplicationModal): () => void {\r\n  const open = useModalOpen(modal)\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  return useCallback(() => dispatch(setOpenModal(open ? null : modal)), [dispatch, modal, open])\r\n}\r\n\r\nexport function useOpenModal(modal: ApplicationModal): () => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  return useCallback(() => dispatch(setOpenModal(modal)), [dispatch, modal])\r\n}\r\n\r\nexport function useCloseModals(): () => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  return useCallback(() => dispatch(setOpenModal(null)), [dispatch])\r\n}\r\n\r\nexport function useWalletModalToggle(): () => void {\r\n  return useToggleModal(ApplicationModal.WALLET)\r\n}\r\n\r\nexport function useToggleSettingsMenu(): () => void {\r\n  return useToggleModal(ApplicationModal.SETTINGS)\r\n}\r\n\r\n// returns a function that allows adding a popup\r\nexport function useAddPopup(): (content: PopupContent, key?: string) => void {\r\n  const dispatch = useDispatch()\r\n\r\n  return useCallback(\r\n    (content: PopupContent, key?: string) => {\r\n      dispatch(addPopup({ content, key }))\r\n    },\r\n    [dispatch]\r\n  )\r\n}\r\n\r\n// returns a function that allows removing a popup via its key\r\nexport function useRemovePopup(): (key: string) => void {\r\n  const dispatch = useDispatch()\r\n  return useCallback(\r\n    (key: string) => {\r\n      dispatch(removePopup({ key }))\r\n    },\r\n    [dispatch]\r\n  )\r\n}\r\n\r\n// get the list of active popups\r\nexport function useActivePopups(): AppState['application']['popupList'] {\r\n  const list = useSelector((state: AppState) => state.application.popupList)\r\n  return useMemo(() => list.filter((item) => item.show), [list])\r\n}\r\n\r\n// returns a function that allows adding a popup\r\nexport function useSubgraphStatus(): [\r\n  {\r\n    available: boolean | null\r\n    syncedBlock: number | undefined\r\n    headBlock: number | undefined\r\n  },\r\n  (available: boolean | null, syncedBlock: number | undefined, headBlock: number | undefined) => void\r\n] {\r\n  const dispatch = useDispatch()\r\n  const status = useSelector((state: AppState) => state.application.subgraphStatus)\r\n\r\n  const update = useCallback(\r\n    (available: boolean | null, syncedBlock: number | undefined, headBlock: number | undefined) => {\r\n      dispatch(updateSubgraphStatus({ available, syncedBlock, headBlock }))\r\n    },\r\n    [dispatch]\r\n  )\r\n  return [status, update]\r\n}\r\n\r\n// returns a function that allows adding a popup\r\nexport function useActiveNetworkVersion(): [NetworkInfo, (activeNetworkVersion: NetworkInfo) => void] {\r\n  const dispatch = useDispatch()\r\n  const activeNetwork = useSelector((state: AppState) => state.application.activeNetworkVersion)\r\n  const update = useCallback(\r\n    (activeNetworkVersion: NetworkInfo) => {\r\n      dispatch(updateActiveNetworkVersion({ activeNetworkVersion }))\r\n    },\r\n    [dispatch]\r\n  )\r\n  return [activeNetwork, update]\r\n}\r\n\r\n// get the apollo client related to the active network\r\nexport function useDataClient(): ApolloClient<NormalizedCacheObject> {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  switch (activeNetwork.id) {\r\n    case SupportedNetwork.ETHEREUM:\r\n      return client\r\n    case SupportedNetwork.ARBITRUM:\r\n      return arbitrumClient\r\n    case SupportedNetwork.OPTIMISM:\r\n      return optimismClient\r\n    case SupportedNetwork.POLYGON:\r\n      return polygonClient\r\n    default:\r\n      return client\r\n  }\r\n}\r\n\r\n// get the apollo client related to the active network for fetching blocks\r\nexport function useBlockClient(): ApolloClient<NormalizedCacheObject> {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  switch (activeNetwork.id) {\r\n    case SupportedNetwork.ETHEREUM:\r\n      return blockClient\r\n    case SupportedNetwork.ARBITRUM:\r\n      return arbitrumBlockClient\r\n    case SupportedNetwork.OPTIMISM:\r\n      return optimismBlockClient\r\n    case SupportedNetwork.POLYGON:\r\n      return polygonBlockClient\r\n    default:\r\n      return blockClient\r\n  }\r\n}\r\n\r\n// Get all required subgraph clients\r\nexport function useClients(): {\r\n  dataClient: ApolloClient<NormalizedCacheObject>\r\n  blockClient: ApolloClient<NormalizedCacheObject>\r\n} {\r\n  const dataClient = useDataClient()\r\n  const blockClient = useBlockClient()\r\n  return {\r\n    dataClient,\r\n    blockClient,\r\n  }\r\n}\r\n","import { createAction } from '@reduxjs/toolkit'\r\n\r\nexport interface SerializedToken {\r\n  chainId: number\r\n  address: string\r\n  decimals: number\r\n  symbol?: string\r\n  name?: string\r\n}\r\n\r\nexport interface SerializedPair {\r\n  token0: SerializedToken\r\n  token1: SerializedToken\r\n}\r\n\r\nexport const updateMatchesDarkMode = createAction<{ matchesDarkMode: boolean }>('user/updateMatchesDarkMode')\r\nexport const updateUserDarkMode = createAction<{ userDarkMode: boolean }>('user/updateUserDarkMode')\r\nexport const addSerializedToken = createAction<{ serializedToken: SerializedToken }>('user/addSerializedToken')\r\nexport const removeSerializedToken = createAction<{ chainId: number; address: string }>('user/removeSerializedToken')\r\nexport const addSavedToken = createAction<{ address: string }>('user/addSavedToken')\r\nexport const addSavedPool = createAction<{ address: string }>('user/addSavedPool')\r\nexport const addSerializedPair = createAction<{ serializedPair: SerializedPair }>('user/addSerializedPair')\r\nexport const removeSerializedPair = createAction<{ chainId: number; tokenAAddress: string; tokenBAddress: string }>(\r\n  'user/removeSerializedPair'\r\n)\r\nexport const toggleURLWarning = createAction<void>('app/toggleURLWarning')\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\r\nimport { AppDispatch, AppState } from 'state'\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<AppState> = useSelector\r\n","import { Token } from '@uniswap/sdk-core'\r\nimport { useCallback, useMemo } from 'react'\r\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { AppDispatch, AppState } from '../index'\r\nimport {\r\n  addSerializedToken,\r\n  removeSerializedToken,\r\n  SerializedToken,\r\n  updateUserDarkMode,\r\n  toggleURLWarning,\r\n  addSavedToken,\r\n  addSavedPool,\r\n} from './actions'\r\nimport { useAppSelector } from 'hooks/useAppDispatch'\r\n\r\nfunction serializeToken(token: Token): SerializedToken {\r\n  return {\r\n    chainId: token.chainId,\r\n    address: token.address,\r\n    decimals: token.decimals,\r\n    symbol: token.symbol,\r\n    name: token.name,\r\n  }\r\n}\r\n\r\nfunction deserializeToken(serializedToken: SerializedToken): Token {\r\n  return new Token(\r\n    serializedToken.chainId,\r\n    serializedToken.address,\r\n    serializedToken.decimals,\r\n    serializedToken.symbol,\r\n    serializedToken.name\r\n  )\r\n}\r\n\r\nexport function useIsDarkMode(): boolean {\r\n  const { userDarkMode, matchesDarkMode } = useSelector<\r\n    AppState,\r\n    { userDarkMode: boolean | null; matchesDarkMode: boolean }\r\n  >(\r\n    ({ user: { matchesDarkMode, userDarkMode } }) => ({\r\n      userDarkMode,\r\n      matchesDarkMode,\r\n    }),\r\n    shallowEqual\r\n  )\r\n\r\n  return userDarkMode === null ? matchesDarkMode : userDarkMode\r\n}\r\n\r\nexport function useDarkModeManager(): [boolean, () => void] {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const darkMode = true\r\n\r\n  const toggleSetDarkMode = useCallback(() => {\r\n    dispatch(updateUserDarkMode({ userDarkMode: !darkMode }))\r\n  }, [darkMode, dispatch])\r\n\r\n  return [darkMode, toggleSetDarkMode]\r\n}\r\n\r\nexport function useAddUserToken(): (token: Token) => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  return useCallback(\r\n    (token: Token) => {\r\n      dispatch(addSerializedToken({ serializedToken: serializeToken(token) }))\r\n    },\r\n    [dispatch]\r\n  )\r\n}\r\n\r\nexport function useSavedTokens(): [string[], (address: string) => void] {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const savedTokens = useSelector((state: AppState) => state.user.savedTokens)\r\n  const updatedSavedTokens = useCallback(\r\n    (address: string) => {\r\n      dispatch(addSavedToken({ address }))\r\n    },\r\n    [dispatch]\r\n  )\r\n  return [savedTokens ?? [], updatedSavedTokens]\r\n}\r\n\r\nexport function useSavedPools(): [string[], (address: string) => void] {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const savedPools = useSelector((state: AppState) => state.user.savedPools)\r\n  const updateSavedPools = useCallback(\r\n    (address: string) => {\r\n      dispatch(addSavedPool({ address }))\r\n    },\r\n    [dispatch]\r\n  )\r\n  return [savedPools ?? [], updateSavedPools]\r\n}\r\n\r\nexport function useRemoveUserAddedToken(): (chainId: number, address: string) => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  return useCallback(\r\n    (chainId: number, address: string) => {\r\n      dispatch(removeSerializedToken({ chainId, address }))\r\n    },\r\n    [dispatch]\r\n  )\r\n}\r\n\r\nexport function useUserAddedTokens(): Token[] {\r\n  const { chainId } = useActiveWeb3React()\r\n  const serializedTokensMap = useAppSelector(({ user: { tokens } }) => tokens)\r\n\r\n  return useMemo(() => {\r\n    if (!chainId) return []\r\n    return Object.values(serializedTokensMap?.[chainId] ?? {}).map(deserializeToken)\r\n  }, [serializedTokensMap, chainId])\r\n}\r\n\r\nexport function useURLWarningVisible(): boolean {\r\n  return useSelector((state: AppState) => state.user.URLWarningVisible)\r\n}\r\n\r\nexport function useURLWarningToggle(): () => void {\r\n  const dispatch = useDispatch()\r\n  return useCallback(() => dispatch(toggleURLWarning()), [dispatch])\r\n}\r\n","import React, { HTMLProps, useCallback } from 'react'\r\nimport ReactGA from 'react-ga'\r\nimport { Link } from 'react-router-dom'\r\nimport styled, { keyframes } from 'styled-components'\r\nimport { darken } from 'polished'\r\nimport { MEDIA_WIDTHS } from './index'\r\nimport { ArrowLeft, X, ExternalLink as LinkIconFeather, Trash } from 'react-feather'\r\n\r\nexport const ButtonText = styled.button`\r\n  outline: none;\r\n  border: none;\r\n  font-size: inherit;\r\n  padding: 0;\r\n  margin: 0;\r\n  background: none;\r\n  cursor: pointer;\r\n\r\n  :hover {\r\n    opacity: 0.7;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`\r\n\r\nexport const Button = styled.button.attrs<{ warning: boolean }, { backgroundColor: string }>(({ warning, theme }) => ({\r\n  backgroundColor: warning ? theme.red1 : theme.primary1,\r\n}))`\r\n  padding: 1rem 2rem 1rem 2rem;\r\n  border-radius: 3rem;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  font-size: 1rem;\r\n  border: none;\r\n  outline: none;\r\n  background-color: ${({ backgroundColor }) => backgroundColor};\r\n  color: ${({ theme }) => theme.white};\r\n  width: 100%;\r\n\r\n  :hover,\r\n  :focus {\r\n    background-color: ${({ backgroundColor }) => darken(0.05, backgroundColor)};\r\n  }\r\n\r\n  :active {\r\n    background-color: ${({ backgroundColor }) => darken(0.1, backgroundColor)};\r\n  }\r\n\r\n  :disabled {\r\n    background-color: ${({ theme }) => theme.bg1};\r\n    color: ${({ theme }) => theme.text4};\r\n    cursor: auto;\r\n  }\r\n`\r\n\r\nexport const CloseIcon = styled(X)<{ onClick: () => void }>`\r\n  cursor: pointer;\r\n`\r\n\r\n// for wrapper react feather icons\r\nexport const IconWrapper = styled.div<{ stroke?: string; size?: string; marginRight?: string; marginLeft?: string }>`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: ${({ size }) => size ?? '20px'};\r\n  height: ${({ size }) => size ?? '20px'};\r\n  margin-right: ${({ marginRight }) => marginRight ?? 0};\r\n  margin-left: ${({ marginLeft }) => marginLeft ?? 0};\r\n  & > * {\r\n    stroke: ${({ theme, stroke }) => stroke ?? theme.blue1};\r\n  }\r\n`\r\n\r\n// A button that triggers some onClick result, but looks like a link.\r\nexport const LinkStyledButton = styled.button<{ disabled?: boolean }>`\r\n  border: none;\r\n  text-decoration: none;\r\n  background: none;\r\n\r\n  cursor: ${({ disabled }) => (disabled ? 'default' : 'pointer')};\r\n  color: ${({ theme, disabled }) => (disabled ? theme.text2 : theme.primary1)};\r\n  font-weight: 500;\r\n\r\n  :hover {\r\n    text-decoration: ${({ disabled }) => (disabled ? null : 'underline')};\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n    text-decoration: ${({ disabled }) => (disabled ? null : 'underline')};\r\n  }\r\n\r\n  :active {\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\n// An internal link from the react-router-dom library that is correctly styled\r\nexport const StyledInternalLink = styled(Link)<{ fontSize?: string }>`\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  color: inherit;\r\n  font-weight: 500;\r\n  font-size: ${({ fontSize }) => fontSize ?? '16px'};\r\n\r\n  :hover {\r\n    text-decoration: none;\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n    text-decoration: none;\r\n  }\r\n\r\n  :active {\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\nconst StyledLink = styled.a`\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  color: ${({ theme }) => theme.primary1};\r\n  font-weight: 500;\r\n  display: inline;\r\n  flex-direction: center;\r\n  align-items: center;\r\n  display: flex;\r\n\r\n  :hover {\r\n    text-decoration: underline;\r\n    text-decoration: none;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n    text-decoration: none;\r\n  }\r\n\r\n  :active {\r\n    outline: none;\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\nconst LinkIconWrapper = styled.a`\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n\r\n  :hover {\r\n    text-decoration: none;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  :focus {\r\n    outline: none;\r\n    text-decoration: none;\r\n  }\r\n\r\n  :active {\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\nexport const LinkIcon = styled(LinkIconFeather)`\r\n  height: 16px;\r\n  width: 18px;\r\n  margin-left: 10px;\r\n  stroke: ${({ theme }) => theme.blue1};\r\n`\r\n\r\nexport const TrashIcon = styled(Trash)`\r\n  height: 16px;\r\n  width: 18px;\r\n  margin-left: 10px;\r\n  stroke: ${({ theme }) => theme.text3};\r\n\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n\r\n  :hover {\r\n    opacity: 0.7;\r\n  }\r\n`\r\n\r\nconst rotateImg = keyframes`\r\n  0% {\r\n    transform: perspective(1000px) rotateY(0deg);\r\n  }\r\n\r\n  100% {\r\n    transform: perspective(1000px) rotateY(360deg);\r\n  }\r\n`\r\n\r\nexport const UniTokenAnimated = styled.img`\r\n  animation: ${rotateImg} 5s cubic-bezier(0.83, 0, 0.17, 1) infinite;\r\n  padding: 2rem 0 0 0;\r\n  filter: drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15));\r\n`\r\n\r\n/**\r\n * Outbound link that handles firing google analytics events\r\n */\r\nexport function ExternalLink({\r\n  target = '_blank',\r\n  href,\r\n  rel = 'noopener noreferrer',\r\n  ...rest\r\n}: Omit<HTMLProps<HTMLAnchorElement>, 'as' | 'ref' | 'onClick'> & { href: string }) {\r\n  const handleClick = useCallback(\r\n    (event: React.MouseEvent<HTMLAnchorElement>) => {\r\n      // don't prevent default, don't redirect if it's a new tab\r\n      if (target === '_blank' || event.ctrlKey || event.metaKey) {\r\n        ReactGA.outboundLink({ label: href }, () => {\r\n          console.debug('Fired outbound link event', href)\r\n        })\r\n      } else {\r\n        event.preventDefault()\r\n        // send a ReactGA event and then trigger a location change\r\n        ReactGA.outboundLink({ label: href }, () => {\r\n          window.location.href = href\r\n        })\r\n      }\r\n    },\r\n    [href, target]\r\n  )\r\n  return <StyledLink target={target} rel={rel} href={href} onClick={handleClick} {...rest} />\r\n}\r\n\r\nexport function ExternalLinkIcon({\r\n  target = '_blank',\r\n  href,\r\n  rel = 'noopener noreferrer',\r\n  ...rest\r\n}: Omit<HTMLProps<HTMLAnchorElement>, 'as' | 'ref' | 'onClick'> & { href: string }) {\r\n  const handleClick = useCallback(\r\n    (event: React.MouseEvent<HTMLAnchorElement>) => {\r\n      // don't prevent default, don't redirect if it's a new tab\r\n      if (target === '_blank' || event.ctrlKey || event.metaKey) {\r\n        ReactGA.outboundLink({ label: href }, () => {\r\n          console.debug('Fired outbound link event', href)\r\n        })\r\n      } else {\r\n        event.preventDefault()\r\n        // send a ReactGA event and then trigger a location change\r\n        ReactGA.outboundLink({ label: href }, () => {\r\n          window.location.href = href\r\n        })\r\n      }\r\n    },\r\n    [href, target]\r\n  )\r\n  return (\r\n    <LinkIconWrapper target={target} rel={rel} href={href} onClick={handleClick} {...rest}>\r\n      <LinkIcon />\r\n    </LinkIconWrapper>\r\n  )\r\n}\r\n\r\nconst rotate = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n`\r\n\r\nexport const Spinner = styled.img`\r\n  animation: 2s ${rotate} linear infinite;\r\n  width: 16px;\r\n  height: 16px;\r\n`\r\n\r\nconst BackArrowLink = styled(StyledInternalLink)`\r\n  color: ${({ theme }) => theme.text1};\r\n`\r\nexport function BackArrow({ to }: { to: string }) {\r\n  return (\r\n    <BackArrowLink to={to}>\r\n      <ArrowLeft />\r\n    </BackArrowLink>\r\n  )\r\n}\r\n\r\nexport const CustomLightSpinner = styled(Spinner)<{ size: string }>`\r\n  height: ${({ size }) => size};\r\n  width: ${({ size }) => size};\r\n`\r\n\r\nexport const OnlyMedium = styled.span`\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    display: none;\r\n  `};\r\n`\r\n\r\nexport const HideMedium = styled.span`\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    display: none;\r\n  `};\r\n`\r\n\r\nexport const HideSmall = styled.span`\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    display: none;\r\n  `};\r\n`\r\n\r\nexport const HideExtraSmall = styled.span`\r\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\r\n    display: none;\r\n  `};\r\n`\r\n\r\nexport const ExtraSmallOnly = styled.span`\r\n  display: none;\r\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\r\n    display: block;\r\n  `};\r\n`\r\n","import React, { useMemo } from 'react'\r\nimport styled, {\r\n  ThemeProvider as StyledComponentsThemeProvider,\r\n  createGlobalStyle,\r\n  css,\r\n  DefaultTheme,\r\n} from 'styled-components'\r\nimport { useIsDarkMode } from '../state/user/hooks'\r\nimport { Text, TextProps } from 'rebass'\r\nimport { Colors } from './styled'\r\n\r\nexport * from './components'\r\n\r\nexport const MEDIA_WIDTHS = {\r\n  upToExtraSmall: 500,\r\n  upToSmall: 720,\r\n  upToMedium: 960,\r\n  upToLarge: 1280,\r\n}\r\n\r\nconst mediaWidthTemplates: { [width in keyof typeof MEDIA_WIDTHS]: typeof css } = Object.keys(MEDIA_WIDTHS).reduce(\r\n  (accumulator, size) => {\r\n    ;(accumulator as any)[size] = (a: any, b: any, c: any) => css`\r\n      @media (max-width: ${(MEDIA_WIDTHS as any)[size]}px) {\r\n        ${css(a, b, c)}\r\n      }\r\n    `\r\n    return accumulator\r\n  },\r\n  {}\r\n) as any\r\n\r\nconst white = '#FFFFFF'\r\nconst black = '#000000'\r\n\r\nexport function colors(darkMode: boolean): Colors {\r\n  return {\r\n    // base\r\n    white,\r\n    black,\r\n\r\n    // text\r\n    text1: darkMode ? '#FFFFFF' : '#000000',\r\n    text2: darkMode ? '#C3C5CB' : '#565A69',\r\n    text3: darkMode ? '#6C7284' : '#888D9B',\r\n    text4: darkMode ? '#565A69' : '#C3C5CB',\r\n    text5: darkMode ? '#2C2F36' : '#EDEEF2',\r\n\r\n    // backgrounds / greys\r\n    bg0: darkMode ? '#191B1F' : '#F7F8FA',\r\n    bg1: darkMode ? '#1F2128' : '#FFFFFF',\r\n    bg2: darkMode ? '#2C2F36' : '#F7F8FA',\r\n    bg3: darkMode ? '#40444F' : '#EDEEF2',\r\n    bg4: darkMode ? '#565A69' : '#CED0D9',\r\n    bg5: darkMode ? '#6C7284' : '#888D9B',\r\n\r\n    //specialty colors\r\n    modalBG: darkMode ? 'rgba(0,0,0,.425)' : 'rgba(0,0,0,0.3)',\r\n    advancedBG: darkMode ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.6)',\r\n\r\n    //primary colors\r\n    primary1: darkMode ? '#2172E5' : '#ff007a',\r\n    primary2: darkMode ? '#3680E7' : '#FF8CC3',\r\n    primary3: darkMode ? '#4D8FEA' : '#FF99C9',\r\n    primary4: darkMode ? '#376bad70' : '#F6DDE8',\r\n    primary5: darkMode ? '#153d6f70' : '#FDEAF1',\r\n\r\n    // color text\r\n    primaryText1: darkMode ? '#6da8ff' : '#ff007a',\r\n\r\n    // secondary colors\r\n    secondary1: darkMode ? '#2172E5' : '#ff007a',\r\n    secondary2: darkMode ? '#17000b26' : '#F6DDE8',\r\n    secondary3: darkMode ? '#17000b26' : '#FDEAF1',\r\n\r\n    // other\r\n    pink1: '#ff007a',\r\n    red1: '#FD4040',\r\n    red2: '#F82D3A',\r\n    red3: '#D60000',\r\n    green1: '#27AE60',\r\n    yellow1: '#FFE270',\r\n    yellow2: '#F3841E',\r\n    yellow3: '#F3B71E',\r\n    blue1: '#2172E5',\r\n    blue2: '#5199FF',\r\n\r\n    // dont wanna forget these blue yet\r\n    // blue4: darkMode ? '#153d6f70' : '#C4D9F8',\r\n    // blue5: darkMode ? '#153d6f70' : '#EBF4FF',\r\n  }\r\n}\r\n\r\nexport function theme(darkMode: boolean): DefaultTheme {\r\n  return {\r\n    ...colors(darkMode),\r\n\r\n    grids: {\r\n      sm: 8,\r\n      md: 12,\r\n      lg: 24,\r\n    },\r\n\r\n    //shadows\r\n    shadow1: darkMode ? '#000' : '#2F80ED',\r\n\r\n    // media queries\r\n    mediaWidth: mediaWidthTemplates,\r\n\r\n    // css snippets\r\n    flexColumnNoWrap: css`\r\n      display: flex;\r\n      flex-flow: column nowrap;\r\n    `,\r\n    flexRowNoWrap: css`\r\n      display: flex;\r\n      flex-flow: row nowrap;\r\n    `,\r\n  }\r\n}\r\n\r\nexport default function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const darkMode = useIsDarkMode()\r\n\r\n  const themeObject = useMemo(() => theme(darkMode), [darkMode])\r\n\r\n  return <StyledComponentsThemeProvider theme={themeObject}>{children}</StyledComponentsThemeProvider>\r\n}\r\n\r\nconst TextWrapper = styled(Text)<{ color: keyof Colors }>`\r\n  color: ${({ color, theme }) => (theme as any)[color]};\r\n`\r\n\r\nexport const TYPE = {\r\n  main(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'text2'} {...props} />\r\n  },\r\n  link(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'primary1'} {...props} />\r\n  },\r\n  label(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'text1'} {...props} />\r\n  },\r\n  black(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'text1'} {...props} />\r\n  },\r\n  white(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'white'} {...props} />\r\n  },\r\n  body(props: TextProps) {\r\n    return <TextWrapper fontWeight={400} fontSize={16} color={'text1'} {...props} />\r\n  },\r\n  largeHeader(props: TextProps) {\r\n    return <TextWrapper fontWeight={600} fontSize={24} color={'text1'} {...props} />\r\n  },\r\n  mediumHeader(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} fontSize={20} color={'text3'} {...props} />\r\n  },\r\n  subHeader(props: TextProps) {\r\n    return <TextWrapper fontWeight={400} fontSize={14} {...props} />\r\n  },\r\n  small(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} fontSize={11} {...props} />\r\n  },\r\n  blue(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'blue1'} {...props} />\r\n  },\r\n  yellow(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'yellow3'} {...props} />\r\n  },\r\n  darkGray(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'text3'} {...props} />\r\n  },\r\n  gray(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} color={'bg3'} {...props} />\r\n  },\r\n  italic(props: TextProps) {\r\n    return <TextWrapper fontWeight={500} fontSize={12} fontStyle={'italic'} color={'text2'} {...props} />\r\n  },\r\n  error({ error, ...props }: { error: boolean } & TextProps) {\r\n    return <TextWrapper fontWeight={500} color={error ? 'red1' : 'text2'} {...props} />\r\n  },\r\n}\r\n\r\nexport const FixedGlobalStyle = createGlobalStyle`\r\nhtml, input, textarea, button {\r\n  font-family: 'Inter', sans-serif;\r\n  font-display: fallback;\r\n}\r\n@supports (font-variation-settings: normal) {\r\n  html, input, textarea, button {\r\n    font-family: 'Inter var', sans-serif;\r\n  }\r\n}\r\n\r\nhtml,\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n a {\r\n   color: ${colors(false).blue1}; \r\n }\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbutton {\r\n  user-select: none;\r\n}\r\n\r\nhtml {\r\n  font-size: 16px;\r\n  font-variant: none;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n  font-feature-settings: 'ss01' on, 'ss02' on, 'cv01' on, 'cv03' on;\r\n  \r\n}\r\n`\r\n\r\nexport const ThemedGlobalStyle = createGlobalStyle`\r\nhtml {\r\n  color: ${({ theme }) => theme.text1};\r\n  background-color: ${({ theme }) => theme.bg1};\r\n}\r\n\r\n.three-line-legend-dark {\r\n\twidth: 100%;\r\n\theight: 70px;\r\n\tposition: absolute;\r\n\tpadding: 8px;\r\n\tfont-size: 12px;\r\n\tcolor: white;\r\n\tbackground-color: transparent;\r\n\ttext-align: left;\r\n\tz-index: 10;\r\n  pointer-events: none;\r\n}\r\n\r\n.tv-lightweight-charts{\r\n  width: 100% !important;\r\n  \r\n  & > * {\r\n    width: 100% !important;\r\n  }\r\n}\r\n\r\nbody {\r\n  min-height: 100vh;\r\n  background-position: 0 -30vh;\r\n  background-repeat: no-repeat;\r\n\r\n}\r\n`\r\n","import React, { useRef } from 'react'\r\nimport { BookOpen, Code, Info, MessageCircle } from 'react-feather'\r\nimport styled from 'styled-components'\r\nimport { ReactComponent as MenuIcon } from '../../assets/images/menu.svg'\r\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\r\nimport { ApplicationModal } from '../../state/application/actions'\r\nimport { useModalOpen, useToggleModal } from '../../state/application/hooks'\r\n\r\nimport { ExternalLink } from '../../theme'\r\n\r\nconst StyledMenuIcon = styled(MenuIcon)`\r\n  path {\r\n    stroke: ${({ theme }) => theme.text1};\r\n  }\r\n`\r\n\r\nconst StyledMenuButton = styled.button`\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  background-color: transparent;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: 35px;\r\n  background-color: ${({ theme }) => theme.bg3};\r\n\r\n  padding: 0.15rem 0.5rem;\r\n  border-radius: 0.5rem;\r\n\r\n  :hover,\r\n  :focus {\r\n    cursor: pointer;\r\n    outline: none;\r\n    background-color: ${({ theme }) => theme.bg4};\r\n  }\r\n\r\n  svg {\r\n    margin-top: 2px;\r\n  }\r\n`\r\n\r\nconst StyledMenu = styled.div`\r\n  margin-left: 0.5rem;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: relative;\r\n  border: none;\r\n  text-align: left;\r\n`\r\n\r\nconst MenuFlyout = styled.span`\r\n  min-width: 8.125rem;\r\n  background-color: ${({ theme }) => theme.bg3};\r\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\r\n    0px 24px 32px rgba(0, 0, 0, 0.01);\r\n  border-radius: 12px;\r\n  padding: 0.5rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  font-size: 1rem;\r\n  position: absolute;\r\n  top: 2.6rem;\r\n  right: 0rem;\r\n  z-index: 100;\r\n`\r\n\r\nconst MenuItem = styled(ExternalLink)`\r\n  flex: 1;\r\n  padding: 0.5rem 0.5rem;\r\n  color: ${({ theme }) => theme.text2};\r\n  :hover {\r\n    color: ${({ theme }) => theme.text1};\r\n    cursor: pointer;\r\n    text-decoration: none;\r\n    opacity: 0.6;\r\n  }\r\n  > svg {\r\n    margin-right: 8px;\r\n  }\r\n`\r\n\r\nconst CODE_LINK = 'https://github.com/Uniswap/uniswap-v3-info'\r\n\r\nexport default function Menu() {\r\n  const node = useRef<HTMLDivElement>()\r\n  const open = useModalOpen(ApplicationModal.MENU)\r\n  const toggle = useToggleModal(ApplicationModal.MENU)\r\n  useOnClickOutside(node, open ? toggle : undefined)\r\n\r\n  return (\r\n    // https://github.com/DefinitelyTyped/DefinitelyTyped/issues/30451\r\n    <StyledMenu ref={node as any}>\r\n      <StyledMenuButton onClick={toggle}>\r\n        <StyledMenuIcon />\r\n      </StyledMenuButton>\r\n\r\n      {open && (\r\n        <MenuFlyout>\r\n          <MenuItem id=\"link\" href=\"https://uniswap.org/\">\r\n            <Info size={14} />\r\n            About\r\n          </MenuItem>\r\n          <MenuItem id=\"link\" href=\"https://docs.uniswap.org/\">\r\n            <BookOpen size={14} />\r\n            Docs\r\n          </MenuItem>\r\n          <MenuItem id=\"link\" href={CODE_LINK}>\r\n            <Code size={14} />\r\n            Github\r\n          </MenuItem>\r\n          <MenuItem id=\"link\" href=\"https://discord.gg/FCfyBSbCU5\">\r\n            <MessageCircle size={14} />\r\n            Discord\r\n          </MenuItem>\r\n        </MenuFlyout>\r\n      )}\r\n    </StyledMenu>\r\n  )\r\n}\r\n","import styled from 'styled-components'\r\nimport { Box } from 'rebass/styled-components'\r\n\r\nconst Row = styled(Box)<{\r\n  width?: string\r\n  align?: string\r\n  justify?: string\r\n  padding?: string\r\n  border?: string\r\n  borderRadius?: string\r\n}>`\r\n  width: ${({ width }) => width ?? '100%'};\r\n  display: flex;\r\n  padding: 0;\r\n  align-items: ${({ align }) => align ?? 'center'};\r\n  justify-content: ${({ justify }) => justify ?? 'flex-start'};\r\n  padding: ${({ padding }) => padding};\r\n  border: ${({ border }) => border};\r\n  border-radius: ${({ borderRadius }) => borderRadius};\r\n`\r\n\r\nexport const RowBetween = styled(Row)`\r\n  justify-content: space-between;\r\n`\r\n\r\nexport const RowFlat = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n`\r\n\r\nexport const AutoRow = styled(Row)<{ gap?: string; justify?: string }>`\r\n  flex-wrap: wrap;\r\n  margin: ${({ gap }) => gap && `-${gap}`};\r\n  justify-content: ${({ justify }) => justify && justify};\r\n\r\n  & > * {\r\n    margin: ${({ gap }) => gap} !important;\r\n  }\r\n`\r\n\r\nexport const RowFixed = styled(Row)<{ gap?: string; justify?: string }>`\r\n  width: fit-content;\r\n  margin: ${({ gap }) => gap && `-${gap}`};\r\n`\r\n\r\nexport const ResponsiveRow = styled(RowBetween)`\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    flex-direction: column;\r\n    row-gap: 1rem;\r\n  `};\r\n`\r\n\r\nexport default Row\r\n","import { createAction } from '@reduxjs/toolkit'\r\nimport { TokenData, TokenChartEntry } from './reducer'\r\nimport { PriceChartEntry, Transaction } from 'types'\r\nimport { SupportedNetwork } from 'constants/networks'\r\n\r\n// protocol wide info\r\nexport const updateTokenData = createAction<{ tokens: TokenData[]; networkId: SupportedNetwork }>(\r\n  'tokens/updateTokenData'\r\n)\r\n\r\n// add token address to byAddress\r\nexport const addTokenKeys = createAction<{ tokenAddresses: string[]; networkId: SupportedNetwork }>(\r\n  'tokens/addTokenKeys'\r\n)\r\n\r\n// add list of pools token is in\r\nexport const addPoolAddresses = createAction<{\r\n  tokenAddress: string\r\n  poolAddresses: string[]\r\n  networkId: SupportedNetwork\r\n}>('tokens/addPoolAddresses')\r\n\r\n// tvl and volume data over time\r\nexport const updateChartData = createAction<{\r\n  tokenAddress: string\r\n  chartData: TokenChartEntry[]\r\n  networkId: SupportedNetwork\r\n}>('tokens/updateChartData')\r\n\r\n// transactions\r\nexport const updateTransactions = createAction<{\r\n  tokenAddress: string\r\n  transactions: Transaction[]\r\n  networkId: SupportedNetwork\r\n}>('tokens/updateTransactions')\r\n\r\n// price data at arbitrary intervals\r\nexport const updatePriceData = createAction<{\r\n  tokenAddress: string\r\n  secondsInterval: number\r\n  priceData: PriceChartEntry[] | undefined\r\n  oldestFetchedTimestamp: number\r\n  networkId: SupportedNetwork\r\n}>('tokens/updatePriceData')\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\n\r\nexport const POOLS_FOR_TOKEN = gql`\r\n  query topPools($address: Bytes!) {\r\n    asToken0: pools(\r\n      first: 200\r\n      orderBy: totalValueLockedUSD\r\n      orderDirection: desc\r\n      where: { token0: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      id\r\n    }\r\n    asToken1: pools(\r\n      first: 200\r\n      orderBy: totalValueLockedUSD\r\n      orderDirection: desc\r\n      where: { token1: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\ninterface PoolsForTokenResponse {\r\n  asToken0: {\r\n    id: string\r\n  }[]\r\n  asToken1: {\r\n    id: string\r\n  }[]\r\n}\r\n\r\n/**\r\n * Fetch top addresses by volume\r\n */\r\nexport async function fetchPoolsForToken(\r\n  address: string,\r\n  client: ApolloClient<NormalizedCacheObject>\r\n): Promise<{\r\n  loading: boolean\r\n  error: boolean\r\n  addresses: string[] | undefined\r\n}> {\r\n  try {\r\n    const { loading, error, data } = await client.query<PoolsForTokenResponse>({\r\n      query: POOLS_FOR_TOKEN,\r\n      variables: {\r\n        address: address,\r\n      },\r\n      fetchPolicy: 'cache-first',\r\n    })\r\n\r\n    if (loading || error || !data) {\r\n      return {\r\n        loading,\r\n        error: Boolean(error),\r\n        addresses: undefined,\r\n      }\r\n    }\r\n\r\n    const formattedData = data.asToken0.concat(data.asToken1).map((p) => p.id)\r\n\r\n    return {\r\n      loading,\r\n      error: Boolean(error),\r\n      addresses: formattedData,\r\n    }\r\n  } catch {\r\n    return {\r\n      loading: false,\r\n      error: true,\r\n      addresses: undefined,\r\n    }\r\n  }\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\r\nimport gql from 'graphql-tag'\r\nimport { TokenChartEntry } from 'state/tokens/reducer'\r\n\r\n// format dayjs with the libraries that we need\r\ndayjs.extend(utc)\r\ndayjs.extend(weekOfYear)\r\nconst ONE_DAY_UNIX = 24 * 60 * 60\r\n\r\nconst TOKEN_CHART = gql`\r\n  query tokenDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\r\n    tokenDayDatas(\r\n      first: 1000\r\n      skip: $skip\r\n      where: { token: $address, date_gt: $startTime }\r\n      orderBy: date\r\n      orderDirection: asc\r\n      subgraphError: allow\r\n    ) {\r\n      date\r\n      volumeUSD\r\n      totalValueLockedUSD\r\n    }\r\n  }\r\n`\r\n\r\ninterface ChartResults {\r\n  tokenDayDatas: {\r\n    date: number\r\n    volumeUSD: string\r\n    totalValueLockedUSD: string\r\n  }[]\r\n}\r\n\r\nexport async function fetchTokenChartData(address: string, client: ApolloClient<NormalizedCacheObject>) {\r\n  let data: {\r\n    date: number\r\n    volumeUSD: string\r\n    totalValueLockedUSD: string\r\n  }[] = []\r\n  const startTimestamp = 1619170975\r\n  const endTimestamp = dayjs.utc().unix()\r\n\r\n  let error = false\r\n  let skip = 0\r\n  let allFound = false\r\n\r\n  try {\r\n    while (!allFound) {\r\n      const { data: chartResData, error, loading } = await client.query<ChartResults>({\r\n        query: TOKEN_CHART,\r\n        variables: {\r\n          address: address,\r\n          startTime: startTimestamp,\r\n          skip,\r\n        },\r\n        fetchPolicy: 'cache-first',\r\n      })\r\n      if (!loading) {\r\n        skip += 1000\r\n        if (chartResData.tokenDayDatas.length < 1000 || error) {\r\n          allFound = true\r\n        }\r\n        if (chartResData) {\r\n          data = data.concat(chartResData.tokenDayDatas)\r\n        }\r\n      }\r\n    }\r\n  } catch {\r\n    error = true\r\n  }\r\n\r\n  if (data) {\r\n    const formattedExisting = data.reduce((accum: { [date: number]: TokenChartEntry }, dayData) => {\r\n      const roundedDate = parseInt((dayData.date / ONE_DAY_UNIX).toFixed(0))\r\n      accum[roundedDate] = {\r\n        date: dayData.date,\r\n        volumeUSD: parseFloat(dayData.volumeUSD),\r\n        totalValueLockedUSD: parseFloat(dayData.totalValueLockedUSD),\r\n      }\r\n      return accum\r\n    }, {})\r\n\r\n    const firstEntry = formattedExisting[parseInt(Object.keys(formattedExisting)[0])]\r\n\r\n    // fill in empty days ( there will be no day datas if no trades made that day )\r\n    let timestamp = firstEntry?.date ?? startTimestamp\r\n    let latestTvl = firstEntry?.totalValueLockedUSD ?? 0\r\n    while (timestamp < endTimestamp - ONE_DAY_UNIX) {\r\n      const nextDay = timestamp + ONE_DAY_UNIX\r\n      const currentDayIndex = parseInt((nextDay / ONE_DAY_UNIX).toFixed(0))\r\n      if (!Object.keys(formattedExisting).includes(currentDayIndex.toString())) {\r\n        formattedExisting[currentDayIndex] = {\r\n          date: nextDay,\r\n          volumeUSD: 0,\r\n          totalValueLockedUSD: latestTvl,\r\n        }\r\n      } else {\r\n        latestTvl = formattedExisting[currentDayIndex].totalValueLockedUSD\r\n      }\r\n      timestamp = nextDay\r\n    }\r\n\r\n    const dateMap = Object.keys(formattedExisting).map((key) => {\r\n      return formattedExisting[parseInt(key)]\r\n    })\r\n\r\n    return {\r\n      data: dateMap,\r\n      error: false,\r\n    }\r\n  } else {\r\n    return {\r\n      data: undefined,\r\n      error,\r\n    }\r\n  }\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport dayjs from 'dayjs'\r\n\r\n/**\r\n * Used to get large amounts of data when\r\n * @param query\r\n * @param localClient\r\n * @param vars - any variables that are passed in every query\r\n * @param values - the keys that are used as the values to map over if\r\n * @param skipCount - amount of entities to skip per query\r\n */\r\nexport async function splitQuery<Type>(\r\n  query: any,\r\n  client: ApolloClient<NormalizedCacheObject>,\r\n  vars: any[],\r\n  values: any[],\r\n  skipCount = 1000\r\n) {\r\n  let fetchedData = {}\r\n  let allFound = false\r\n  let skip = 0\r\n  try {\r\n    while (!allFound) {\r\n      let end = values.length\r\n      if (skip + skipCount < values.length) {\r\n        end = skip + skipCount\r\n      }\r\n      const sliced = values.slice(skip, end)\r\n      const result = await client.query<Type>({\r\n        query: query(...vars, sliced),\r\n        fetchPolicy: 'network-only',\r\n      })\r\n      fetchedData = {\r\n        ...fetchedData,\r\n        ...result.data,\r\n      }\r\n      if (Object.keys(result.data).length < skipCount || skip + skipCount > values.length) {\r\n        allFound = true\r\n      } else {\r\n        skip += skipCount\r\n      }\r\n    }\r\n    return fetchedData\r\n  } catch (e) {\r\n    console.log(e)\r\n    return undefined\r\n  }\r\n}\r\n\r\nexport function useDeltaTimestamps(): [number, number, number] {\r\n  const utcCurrentTime = dayjs()\r\n  const t1 = utcCurrentTime.subtract(1, 'day').startOf('minute').unix()\r\n  const t2 = utcCurrentTime.subtract(2, 'day').startOf('minute').unix()\r\n  const tWeek = utcCurrentTime.subtract(1, 'week').startOf('minute').unix()\r\n  return [t1, t2, tWeek]\r\n}\r\n","import gql from 'graphql-tag'\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport { splitQuery } from 'utils/queries'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\n\r\nexport const GET_BLOCKS = (timestamps: string[]) => {\r\n  let queryString = 'query blocks {'\r\n  queryString += timestamps.map((timestamp) => {\r\n    return `t${timestamp}:blocks(first: 1, orderBy: timestamp, orderDirection: desc, where: { timestamp_gt: ${timestamp}, timestamp_lt: ${\r\n      timestamp + 600\r\n    } }) {\r\n        number\r\n      }`\r\n  })\r\n  queryString += '}'\r\n  return gql(queryString)\r\n}\r\n\r\n/**\r\n * for a given array of timestamps, returns block entities\r\n * @param timestamps\r\n */\r\nexport function useBlocksFromTimestamps(\r\n  timestamps: number[],\r\n  blockClientOverride?: ApolloClient<NormalizedCacheObject>\r\n): {\r\n  blocks:\r\n    | {\r\n        timestamp: string\r\n        number: any\r\n      }[]\r\n    | undefined\r\n  error: boolean\r\n} {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const [blocks, setBlocks] = useState<any>()\r\n  const [error, setError] = useState(false)\r\n\r\n  const { blockClient } = useClients()\r\n  const activeBlockClient = blockClientOverride ?? blockClient\r\n\r\n  // derive blocks based on active network\r\n  const networkBlocks = blocks?.[activeNetwork.id]\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const results = await splitQuery(GET_BLOCKS, activeBlockClient, [], timestamps)\r\n      if (results) {\r\n        setBlocks({ ...(blocks ?? {}), [activeNetwork.id]: results })\r\n      } else {\r\n        setError(true)\r\n      }\r\n    }\r\n    if (!networkBlocks && !error) {\r\n      fetchData()\r\n    }\r\n  })\r\n\r\n  const blocksFormatted = useMemo(() => {\r\n    if (blocks?.[activeNetwork.id]) {\r\n      const networkBlocks = blocks?.[activeNetwork.id]\r\n      const formatted = []\r\n      for (const t in networkBlocks) {\r\n        if (networkBlocks[t].length > 0) {\r\n          formatted.push({\r\n            timestamp: t.split('t')[1],\r\n            number: networkBlocks[t][0]['number'],\r\n          })\r\n        }\r\n      }\r\n      return formatted\r\n    }\r\n    return undefined\r\n  }, [activeNetwork.id, blocks])\r\n\r\n  return {\r\n    blocks: blocksFormatted,\r\n    error,\r\n  }\r\n}\r\n\r\n/**\r\n * @notice Fetches block objects for an array of timestamps.\r\n * @dev blocks are returned in chronological order (ASC) regardless of input.\r\n * @dev blocks are returned at string representations of Int\r\n * @dev timestamps are returns as they were provided; not the block time.\r\n * @param {Array} timestamps\r\n */\r\nexport async function getBlocksFromTimestamps(\r\n  timestamps: number[],\r\n  blockClient: ApolloClient<NormalizedCacheObject>,\r\n  skipCount = 500\r\n) {\r\n  if (timestamps?.length === 0) {\r\n    return []\r\n  }\r\n  const fetchedData: any = await splitQuery(GET_BLOCKS, blockClient, [], timestamps, skipCount)\r\n\r\n  const blocks: any[] = []\r\n  if (fetchedData) {\r\n    for (const t in fetchedData) {\r\n      if (fetchedData[t].length > 0) {\r\n        blocks.push({\r\n          timestamp: t.split('t')[1],\r\n          number: fetchedData[t][0]['number'],\r\n        })\r\n      }\r\n    }\r\n  }\r\n  return blocks\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\r\nimport gql from 'graphql-tag'\r\nimport { getBlocksFromTimestamps } from 'hooks/useBlocksFromTimestamps'\r\nimport { PriceChartEntry } from 'types'\r\n\r\n// format dayjs with the libraries that we need\r\ndayjs.extend(utc)\r\ndayjs.extend(weekOfYear)\r\n\r\nexport const PRICES_BY_BLOCK = (tokenAddress: string, blocks: any) => {\r\n  let queryString = 'query blocks {'\r\n  queryString += blocks.map(\r\n    (block: any) => `\r\n      t${block.timestamp}:token(id:\"${tokenAddress}\", block: { number: ${block.number} }, subgraphError: allow) { \r\n        derivedETH\r\n      }\r\n    `\r\n  )\r\n  queryString += ','\r\n  queryString += blocks.map(\r\n    (block: any) => `\r\n      b${block.timestamp}: bundle(id:\"1\", block: { number: ${block.number} }, subgraphError: allow) { \r\n        ethPriceUSD\r\n      }\r\n    `\r\n  )\r\n\r\n  queryString += '}'\r\n  return gql(queryString)\r\n}\r\n\r\nconst PRICE_CHART = gql`\r\n  query tokenHourDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\r\n    tokenHourDatas(\r\n      first: 100\r\n      skip: $skip\r\n      where: { token: $address, periodStartUnix_gt: $startTime }\r\n      orderBy: periodStartUnix\r\n      orderDirection: asc\r\n    ) {\r\n      periodStartUnix\r\n      high\r\n      low\r\n      open\r\n      close\r\n    }\r\n  }\r\n`\r\n\r\ninterface PriceResults {\r\n  tokenHourDatas: {\r\n    periodStartUnix: number\r\n    high: string\r\n    low: string\r\n    open: string\r\n    close: string\r\n  }[]\r\n}\r\n\r\nexport async function fetchTokenPriceData(\r\n  address: string,\r\n  interval: number,\r\n  startTimestamp: number,\r\n  dataClient: ApolloClient<NormalizedCacheObject>,\r\n  blockClient: ApolloClient<NormalizedCacheObject>\r\n): Promise<{\r\n  data: PriceChartEntry[]\r\n  error: boolean\r\n}> {\r\n  // start and end bounds\r\n\r\n  try {\r\n    const endTimestamp = dayjs.utc().unix()\r\n\r\n    if (!startTimestamp) {\r\n      console.log('Error constructing price start timestamp')\r\n      return {\r\n        data: [],\r\n        error: false,\r\n      }\r\n    }\r\n\r\n    // create an array of hour start times until we reach current hour\r\n    const timestamps = []\r\n    let time = startTimestamp\r\n    while (time <= endTimestamp) {\r\n      timestamps.push(time)\r\n      time += interval\r\n    }\r\n\r\n    // backout if invalid timestamp format\r\n    if (timestamps.length === 0) {\r\n      return {\r\n        data: [],\r\n        error: false,\r\n      }\r\n    }\r\n\r\n    // fetch blocks based on timestamp\r\n    const blocks = await getBlocksFromTimestamps(timestamps, blockClient, 500)\r\n    if (!blocks || blocks.length === 0) {\r\n      console.log('Error fetching blocks')\r\n      return {\r\n        data: [],\r\n        error: false,\r\n      }\r\n    }\r\n\r\n    let data: {\r\n      periodStartUnix: number\r\n      high: string\r\n      low: string\r\n      open: string\r\n      close: string\r\n    }[] = []\r\n    let skip = 0\r\n    let allFound = false\r\n    while (!allFound) {\r\n      const { data: priceData, errors, loading } = await dataClient.query<PriceResults>({\r\n        query: PRICE_CHART,\r\n        variables: {\r\n          address: address,\r\n          startTime: startTimestamp,\r\n          skip,\r\n        },\r\n        fetchPolicy: 'no-cache',\r\n      })\r\n\r\n      if (!loading) {\r\n        skip += 100\r\n        if ((priceData && priceData.tokenHourDatas.length < 100) || errors) {\r\n          allFound = true\r\n        }\r\n        if (priceData) {\r\n          data = data.concat(priceData.tokenHourDatas)\r\n        }\r\n      }\r\n    }\r\n\r\n    const formattedHistory = data.map((d) => {\r\n      return {\r\n        time: d.periodStartUnix,\r\n        open: parseFloat(d.open),\r\n        close: parseFloat(d.close),\r\n        high: parseFloat(d.high),\r\n        low: parseFloat(d.low),\r\n      }\r\n    })\r\n\r\n    return {\r\n      data: formattedHistory,\r\n      error: false,\r\n    }\r\n  } catch (e) {\r\n    console.log(e)\r\n    return {\r\n      data: [],\r\n      error: true,\r\n    }\r\n  }\r\n}\r\n","export interface Block {\r\n  number: number\r\n  timestamp: string\r\n}\r\n\r\nexport enum VolumeWindow {\r\n  daily,\r\n  weekly,\r\n  monthly,\r\n}\r\n\r\nexport interface ChartDayData {\r\n  date: number\r\n  volumeUSD: number\r\n  tvlUSD: number\r\n}\r\n\r\nexport interface GenericChartEntry {\r\n  time: string\r\n  value: number\r\n}\r\n\r\nexport enum TransactionType {\r\n  SWAP,\r\n  MINT,\r\n  BURN,\r\n}\r\n\r\nexport type Transaction = {\r\n  type: TransactionType\r\n  hash: string\r\n  timestamp: string\r\n  sender: string\r\n  token0Symbol: string\r\n  token1Symbol: string\r\n  token0Address: string\r\n  token1Address: string\r\n  amountUSD: number\r\n  amountToken0: number\r\n  amountToken1: number\r\n}\r\n\r\n/**\r\n * Formatted type for Candlestick charts\r\n */\r\nexport type PriceChartEntry = {\r\n  time: number // unix timestamp\r\n  open: number\r\n  close: number\r\n  high: number\r\n  low: number\r\n}\r\n","import { Token } from '@uniswap/sdk-core'\r\nimport { NetworkInfo, PolygonNetworkInfo } from 'constants/networks'\r\nimport { WETH_ADDRESSES } from '../constants/index'\r\n\r\nexport interface SerializedToken {\r\n  chainId: number\r\n  address: string\r\n  decimals: number\r\n  symbol?: string\r\n  name?: string\r\n}\r\n\r\nexport function serializeToken(token: Token): SerializedToken {\r\n  return {\r\n    chainId: token.chainId,\r\n    address: token.address,\r\n    decimals: token.decimals,\r\n    symbol: token.symbol,\r\n    name: token.name,\r\n  }\r\n}\r\n\r\nexport function deserializeToken(serializedToken: SerializedToken): Token {\r\n  return new Token(\r\n    serializedToken.chainId,\r\n    serializedToken.address,\r\n    serializedToken.decimals,\r\n    serializedToken.symbol,\r\n    serializedToken.name\r\n  )\r\n}\r\n\r\nexport function formatTokenSymbol(address: string, symbol: string, activeNetwork?: NetworkInfo) {\r\n  // dumb catch for matic\r\n  if (address === '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270' && activeNetwork === PolygonNetworkInfo) {\r\n    return 'MATIC'\r\n  }\r\n\r\n  if (WETH_ADDRESSES.includes(address)) {\r\n    return 'ETH'\r\n  }\r\n  return symbol\r\n}\r\n\r\nexport function formatTokenName(address: string, name: string, activeNetwork?: NetworkInfo) {\r\n  // dumb catch for matic\r\n  if (address === '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270' && activeNetwork === PolygonNetworkInfo) {\r\n    return 'MATIC'\r\n  }\r\n\r\n  if (WETH_ADDRESSES.includes(address)) {\r\n    return 'Ether'\r\n  }\r\n  return name\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { Transaction, TransactionType } from 'types'\r\nimport { formatTokenSymbol } from 'utils/tokens'\r\n\r\nconst GLOBAL_TRANSACTIONS = gql`\r\n  query transactions($address: Bytes!) {\r\n    mintsAs0: mints(\r\n      first: 500\r\n      orderBy: timestamp\r\n      orderDirection: desc\r\n      where: { token0: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      owner\r\n      sender\r\n      origin\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    mintsAs1: mints(\r\n      first: 500\r\n      orderBy: timestamp\r\n      orderDirection: desc\r\n      where: { token0: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      owner\r\n      sender\r\n      origin\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    swapsAs0: swaps(\r\n      first: 500\r\n      orderBy: timestamp\r\n      orderDirection: desc\r\n      where: { token0: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      origin\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    swapsAs1: swaps(\r\n      first: 500\r\n      orderBy: timestamp\r\n      orderDirection: desc\r\n      where: { token1: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      origin\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    burnsAs0: burns(\r\n      first: 500\r\n      orderBy: timestamp\r\n      orderDirection: desc\r\n      where: { token0: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      owner\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    burnsAs1: burns(\r\n      first: 500\r\n      orderBy: timestamp\r\n      orderDirection: desc\r\n      where: { token1: $address }\r\n      subgraphError: allow\r\n    ) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      owner\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n  }\r\n`\r\n\r\ninterface TransactionResults {\r\n  mintsAs0: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  mintsAs1: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  swapsAs0: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  swapsAs1: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  burnsAs0: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    owner: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  burnsAs1: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    owner: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n}\r\n\r\nexport async function fetchTokenTransactions(\r\n  address: string,\r\n  client: ApolloClient<NormalizedCacheObject>\r\n): Promise<{ data: Transaction[] | undefined; error: boolean; loading: boolean }> {\r\n  try {\r\n    const { data, error, loading } = await client.query<TransactionResults>({\r\n      query: GLOBAL_TRANSACTIONS,\r\n      variables: {\r\n        address: address,\r\n      },\r\n      fetchPolicy: 'cache-first',\r\n    })\r\n\r\n    if (error) {\r\n      return {\r\n        data: undefined,\r\n        error: true,\r\n        loading: false,\r\n      }\r\n    }\r\n\r\n    if (loading && !data) {\r\n      return {\r\n        data: undefined,\r\n        error: false,\r\n        loading: true,\r\n      }\r\n    }\r\n\r\n    const mints0 = data.mintsAs0.map((m) => {\r\n      return {\r\n        type: TransactionType.MINT,\r\n        hash: m.transaction.id,\r\n        timestamp: m.timestamp,\r\n        sender: m.origin,\r\n        token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n        token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n        token0Address: m.pool.token0.id,\r\n        token1Address: m.pool.token1.id,\r\n        amountUSD: parseFloat(m.amountUSD),\r\n        amountToken0: parseFloat(m.amount0),\r\n        amountToken1: parseFloat(m.amount1),\r\n      }\r\n    })\r\n    const mints1 = data.mintsAs1.map((m) => {\r\n      return {\r\n        type: TransactionType.MINT,\r\n        hash: m.transaction.id,\r\n        timestamp: m.timestamp,\r\n        sender: m.origin,\r\n        token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n        token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n        token0Address: m.pool.token0.id,\r\n        token1Address: m.pool.token1.id,\r\n        amountUSD: parseFloat(m.amountUSD),\r\n        amountToken0: parseFloat(m.amount0),\r\n        amountToken1: parseFloat(m.amount1),\r\n      }\r\n    })\r\n\r\n    const burns0 = data.burnsAs0.map((m) => {\r\n      return {\r\n        type: TransactionType.BURN,\r\n        hash: m.transaction.id,\r\n        timestamp: m.timestamp,\r\n        sender: m.owner,\r\n        token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n        token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n        token0Address: m.pool.token0.id,\r\n        token1Address: m.pool.token1.id,\r\n        amountUSD: parseFloat(m.amountUSD),\r\n        amountToken0: parseFloat(m.amount0),\r\n        amountToken1: parseFloat(m.amount1),\r\n      }\r\n    })\r\n    const burns1 = data.burnsAs1.map((m) => {\r\n      return {\r\n        type: TransactionType.BURN,\r\n        hash: m.transaction.id,\r\n        timestamp: m.timestamp,\r\n        sender: m.owner,\r\n        token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n        token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n        token0Address: m.pool.token0.id,\r\n        token1Address: m.pool.token1.id,\r\n        amountUSD: parseFloat(m.amountUSD),\r\n        amountToken0: parseFloat(m.amount0),\r\n        amountToken1: parseFloat(m.amount1),\r\n      }\r\n    })\r\n\r\n    const swaps0 = data.swapsAs0.map((m) => {\r\n      return {\r\n        type: TransactionType.SWAP,\r\n        hash: m.transaction.id,\r\n        timestamp: m.timestamp,\r\n        sender: m.origin,\r\n        token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n        token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n        token0Address: m.pool.token0.id,\r\n        token1Address: m.pool.token1.id,\r\n        amountUSD: parseFloat(m.amountUSD),\r\n        amountToken0: parseFloat(m.amount0),\r\n        amountToken1: parseFloat(m.amount1),\r\n      }\r\n    })\r\n\r\n    const swaps1 = data.swapsAs1.map((m) => {\r\n      return {\r\n        type: TransactionType.SWAP,\r\n        hash: m.transaction.id,\r\n        timestamp: m.timestamp,\r\n        sender: m.origin,\r\n        token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n        token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n        token0Address: m.pool.token0.id,\r\n        token1Address: m.pool.token1.id,\r\n        amountUSD: parseFloat(m.amountUSD),\r\n        amountToken0: parseFloat(m.amount0),\r\n        amountToken1: parseFloat(m.amount1),\r\n      }\r\n    })\r\n\r\n    return { data: [...mints0, ...mints1, ...burns0, ...burns1, ...swaps0, ...swaps1], error: false, loading: false }\r\n  } catch {\r\n    return {\r\n      data: undefined,\r\n      error: true,\r\n      loading: false,\r\n    }\r\n  }\r\n}\r\n","export enum SupportedChainId {\r\n  MAINNET = 1,\r\n  ROPSTEN = 3,\r\n  RINKEBY = 4,\r\n  GOERLI = 5,\r\n  KOVAN = 42,\r\n\r\n  ARBITRUM_ONE = 42161,\r\n  ARBITRUM_RINKEBY = 421611,\r\n  OPTIMISM = 10,\r\n  OPTIMISTIC_KOVAN = 69,\r\n}\r\n\r\nexport const ALL_SUPPORTED_CHAIN_IDS: SupportedChainId[] = [\r\n  SupportedChainId.MAINNET,\r\n  SupportedChainId.ROPSTEN,\r\n  SupportedChainId.RINKEBY,\r\n  SupportedChainId.GOERLI,\r\n  SupportedChainId.KOVAN,\r\n\r\n  SupportedChainId.ARBITRUM_ONE,\r\n  SupportedChainId.ARBITRUM_RINKEBY,\r\n  SupportedChainId.OPTIMISM,\r\n  SupportedChainId.OPTIMISTIC_KOVAN,\r\n]\r\n","import { getAddress } from '@ethersproject/address'\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\nimport { AddressZero } from '@ethersproject/constants'\r\nimport { Contract } from '@ethersproject/contracts'\r\nimport { JsonRpcSigner, Web3Provider } from '@ethersproject/providers'\r\nimport { Currency, CurrencyAmount, Fraction, Percent, Token } from '@uniswap/sdk-core'\r\nimport { abi as IUniswapV2Router02ABI } from '@uniswap/v2-periphery/build/IUniswapV2Router02.json'\r\nimport { SupportedChainId } from 'constants/chains'\r\nimport { ArbitrumNetworkInfo, NetworkInfo, PolygonNetworkInfo } from 'constants/networks'\r\nimport JSBI from 'jsbi'\r\nimport { ROUTER_ADDRESS } from '../constants'\r\nimport { TokenAddressMap } from '../state/lists/hooks'\r\nimport { OptimismNetworkInfo } from './../constants/networks'\r\n\r\n// returns the checksummed address if the address is valid, otherwise returns false\r\nexport function isAddress(value: any): string | false {\r\n  try {\r\n    return getAddress(value)\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\nconst ETHERSCAN_PREFIXES: { [chainId: number]: string } = {\r\n  [SupportedChainId.MAINNET]: '',\r\n  [SupportedChainId.ROPSTEN]: 'ropsten.',\r\n  [SupportedChainId.RINKEBY]: 'rinkeby.',\r\n  [SupportedChainId.GOERLI]: 'goerli.',\r\n  [SupportedChainId.KOVAN]: 'kovan.',\r\n  [SupportedChainId.OPTIMISM]: 'optimistic.',\r\n  [SupportedChainId.OPTIMISTIC_KOVAN]: 'kovan-optimistic.',\r\n}\r\n\r\nexport function getEtherscanLink(\r\n  chainId: number,\r\n  data: string,\r\n  type: 'transaction' | 'token' | 'address' | 'block',\r\n  networkVersion: NetworkInfo\r\n): string {\r\n  const prefix =\r\n    networkVersion === PolygonNetworkInfo\r\n      ? 'https://polygonscan.com/'\r\n      : networkVersion === ArbitrumNetworkInfo\r\n      ? 'https://arbiscan.io/'\r\n      : networkVersion === OptimismNetworkInfo\r\n      ? 'https://optimistic.etherscan.io'\r\n      : `https://${ETHERSCAN_PREFIXES[chainId] || ETHERSCAN_PREFIXES[1]}etherscan.io`\r\n\r\n  if (networkVersion === OptimismNetworkInfo) {\r\n    switch (type) {\r\n      case 'transaction': {\r\n        return `${prefix}/tx/${data}`\r\n      }\r\n      case 'token': {\r\n        return `${prefix}/address/${data}`\r\n      }\r\n      case 'block': {\r\n        return `https://optimistic.etherscan.io`\r\n      }\r\n      case 'address':\r\n      default: {\r\n        return `${prefix}/address/${data}`\r\n      }\r\n    }\r\n  }\r\n\r\n  if (networkVersion === ArbitrumNetworkInfo) {\r\n    switch (type) {\r\n      case 'transaction': {\r\n        return `${prefix}/tx/${data}`\r\n      }\r\n      case 'token': {\r\n        return `${prefix}/address/${data}`\r\n      }\r\n      case 'block': {\r\n        return 'https://arbiscan.io/'\r\n      }\r\n      case 'address':\r\n      default: {\r\n        return `${prefix}/address/${data}`\r\n      }\r\n    }\r\n  }\r\n\r\n  switch (type) {\r\n    case 'transaction': {\r\n      return `${prefix}/tx/${data}`\r\n    }\r\n    case 'token': {\r\n      return `${prefix}/token/${data}`\r\n    }\r\n    case 'block': {\r\n      return `${prefix}/block/${data}`\r\n    }\r\n    case 'address':\r\n    default: {\r\n      return `${prefix}/address/${data}`\r\n    }\r\n  }\r\n}\r\n\r\nexport const currentTimestamp = () => new Date().getTime()\r\n\r\n// shorten the checksummed version of the input address to have 0x + 4 characters at start and end\r\nexport function shortenAddress(address: string, chars = 4): string {\r\n  const parsed = isAddress(address)\r\n  if (!parsed) {\r\n    throw Error(`Invalid 'address' parameter '${address}'.`)\r\n  }\r\n  return `${parsed.substring(0, chars + 2)}...${parsed.substring(42 - chars)}`\r\n}\r\n\r\n// add 10%\r\nexport function calculateGasMargin(value: BigNumber): BigNumber {\r\n  return value.mul(BigNumber.from(10000).add(BigNumber.from(1000))).div(BigNumber.from(10000))\r\n}\r\n\r\n// converts a basis points value to a sdk percent\r\nexport function basisPointsToPercent(num: number): Percent {\r\n  return new Percent(JSBI.BigInt(num), JSBI.BigInt(10000))\r\n}\r\n\r\nconst ONE = new Fraction(1, 1)\r\nexport function calculateSlippageAmount(value: CurrencyAmount<Currency>, slippage: Percent): [JSBI, JSBI] {\r\n  if (slippage.lessThan(0) || slippage.greaterThan(ONE)) throw new Error('Unexpected slippage')\r\n  return [value.multiply(ONE.subtract(slippage)).quotient, value.multiply(ONE.add(slippage)).quotient]\r\n}\r\n// account is not optional\r\nexport function getSigner(library: Web3Provider, account: string): JsonRpcSigner {\r\n  return library.getSigner(account).connectUnchecked()\r\n}\r\n\r\n// account is optional\r\nexport function getProviderOrSigner(library: Web3Provider, account?: string): Web3Provider | JsonRpcSigner {\r\n  return account ? getSigner(library, account) : library\r\n}\r\n\r\n// account is optional\r\nexport function getContract(address: string, ABI: any, library: Web3Provider, account?: string): Contract {\r\n  if (!isAddress(address) || address === AddressZero) {\r\n    throw Error(`Invalid 'address' parameter '${address}'.`)\r\n  }\r\n\r\n  return new Contract(address, ABI, getProviderOrSigner(library, account) as any)\r\n}\r\n\r\n// account is optional\r\nexport function getRouterContract(_: number, library: Web3Provider, account?: string): Contract {\r\n  return getContract(ROUTER_ADDRESS, IUniswapV2Router02ABI, library, account)\r\n}\r\n\r\nexport function escapeRegExp(string: string): string {\r\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\r\n}\r\n\r\nexport function isTokenOnList(tokenAddressMap: TokenAddressMap, token?: Token): boolean {\r\n  return Boolean(token?.isToken && tokenAddressMap[token.chainId]?.[token.address])\r\n}\r\n\r\nexport function feeTierPercent(fee: number): string {\r\n  return (fee / 10000).toPrecision(1) + '%'\r\n}\r\n\r\nexport function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\r\n  return value !== null && value !== undefined\r\n}\r\n","import { AppState, AppDispatch } from './../index'\r\nimport { TokenData, TokenChartEntry } from './reducer'\r\nimport { useCallback, useEffect, useState, useMemo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {\r\n  updateTokenData,\r\n  addTokenKeys,\r\n  addPoolAddresses,\r\n  updateChartData,\r\n  updatePriceData,\r\n  updateTransactions,\r\n} from './actions'\r\nimport { isAddress } from 'ethers/lib/utils'\r\nimport { fetchPoolsForToken } from 'data/tokens/poolsForToken'\r\nimport { fetchTokenChartData } from 'data/tokens/chartData'\r\nimport { fetchTokenPriceData } from 'data/tokens/priceData'\r\nimport { fetchTokenTransactions } from 'data/tokens/transactions'\r\nimport { PriceChartEntry, Transaction } from 'types'\r\nimport { notEmpty } from 'utils'\r\nimport dayjs, { OpUnitType } from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\n// format dayjs with the libraries that we need\r\ndayjs.extend(utc)\r\n\r\nexport function useAllTokenData(): {\r\n  [address: string]: { data: TokenData | undefined; lastUpdated: number | undefined }\r\n} {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  return useSelector((state: AppState) => state.tokens.byAddress[activeNetwork.id] ?? {})\r\n}\r\n\r\nexport function useUpdateTokenData(): (tokens: TokenData[]) => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  return useCallback(\r\n    (tokens: TokenData[]) => {\r\n      dispatch(updateTokenData({ tokens, networkId: activeNetwork.id }))\r\n    },\r\n    [activeNetwork.id, dispatch]\r\n  )\r\n}\r\n\r\nexport function useAddTokenKeys(): (addresses: string[]) => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  return useCallback(\r\n    (tokenAddresses: string[]) => dispatch(addTokenKeys({ tokenAddresses, networkId: activeNetwork.id })),\r\n    [activeNetwork.id, dispatch]\r\n  )\r\n}\r\n\r\nexport function useTokenDatas(addresses: string[] | undefined): TokenData[] | undefined {\r\n  const allTokenData = useAllTokenData()\r\n  const addTokenKeys = useAddTokenKeys()\r\n\r\n  // if token not tracked yet track it\r\n  addresses?.map((a) => {\r\n    if (!allTokenData[a]) {\r\n      addTokenKeys([a])\r\n    }\r\n  })\r\n\r\n  const data = useMemo(() => {\r\n    if (!addresses) {\r\n      return undefined\r\n    }\r\n    return addresses\r\n      .map((a) => {\r\n        return allTokenData[a]?.data\r\n      })\r\n      .filter(notEmpty)\r\n  }, [addresses, allTokenData])\r\n\r\n  return data\r\n}\r\n\r\nexport function useTokenData(address: string | undefined): TokenData | undefined {\r\n  const allTokenData = useAllTokenData()\r\n  const addTokenKeys = useAddTokenKeys()\r\n\r\n  // if invalid address return\r\n  if (!address || !isAddress(address)) {\r\n    return undefined\r\n  }\r\n\r\n  // if token not tracked yet track it\r\n  if (!allTokenData[address]) {\r\n    addTokenKeys([address])\r\n  }\r\n\r\n  // return data\r\n  return allTokenData[address]?.data\r\n}\r\n\r\n/**\r\n * Get top pools addresses that token is included in\r\n * If not loaded, fetch and store\r\n * @param address\r\n */\r\nexport function usePoolsForToken(address: string): string[] | undefined {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const token = useSelector((state: AppState) => state.tokens.byAddress[activeNetwork.id]?.[address])\r\n  const poolsForToken = token.poolAddresses\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { loading, error, addresses } = await fetchPoolsForToken(address, dataClient)\r\n      if (!loading && !error && addresses) {\r\n        dispatch(addPoolAddresses({ tokenAddress: address, poolAddresses: addresses, networkId: activeNetwork.id }))\r\n      }\r\n      if (error) {\r\n        setError(error)\r\n      }\r\n    }\r\n    if (!poolsForToken && !error) {\r\n      fetch()\r\n    }\r\n  }, [address, dispatch, error, poolsForToken, dataClient, activeNetwork.id])\r\n\r\n  // return data\r\n  return poolsForToken\r\n}\r\n\r\n/**\r\n * Get top pools addresses that token is included in\r\n * If not loaded, fetch and store\r\n * @param address\r\n */\r\nexport function useTokenChartData(address: string): TokenChartEntry[] | undefined {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const token = useSelector((state: AppState) => state.tokens.byAddress[activeNetwork.id]?.[address])\r\n  const chartData = token.chartData\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { error, data } = await fetchTokenChartData(address, dataClient)\r\n      if (!error && data) {\r\n        dispatch(updateChartData({ tokenAddress: address, chartData: data, networkId: activeNetwork.id }))\r\n      }\r\n      if (error) {\r\n        setError(error)\r\n      }\r\n    }\r\n    if (!chartData && !error) {\r\n      fetch()\r\n    }\r\n  }, [address, dispatch, error, chartData, dataClient, activeNetwork.id])\r\n\r\n  // return data\r\n  return chartData\r\n}\r\n\r\n/**\r\n * Get top pools addresses that token is included in\r\n * If not loaded, fetch and store\r\n * @param address\r\n */\r\nexport function useTokenPriceData(\r\n  address: string,\r\n  interval: number,\r\n  timeWindow: OpUnitType\r\n): PriceChartEntry[] | undefined {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const token = useSelector((state: AppState) => state.tokens.byAddress[activeNetwork.id]?.[address])\r\n  const priceData = token.priceData[interval]\r\n  const [error, setError] = useState(false)\r\n  const { dataClient, blockClient } = useClients()\r\n\r\n  // construct timestamps and check if we need to fetch more data\r\n  const oldestTimestampFetched = token.priceData.oldestFetchedTimestamp\r\n  const utcCurrentTime = dayjs()\r\n  const startTimestamp = utcCurrentTime.subtract(1, timeWindow).startOf('hour').unix()\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { data, error: fetchingError } = await fetchTokenPriceData(\r\n        address,\r\n        interval,\r\n        startTimestamp,\r\n        dataClient,\r\n        blockClient\r\n      )\r\n      if (data) {\r\n        dispatch(\r\n          updatePriceData({\r\n            tokenAddress: address,\r\n            secondsInterval: interval,\r\n            priceData: data,\r\n            oldestFetchedTimestamp: startTimestamp,\r\n            networkId: activeNetwork.id,\r\n          })\r\n        )\r\n      }\r\n      if (fetchingError) {\r\n        setError(true)\r\n      }\r\n    }\r\n\r\n    if (!priceData && !error) {\r\n      fetch()\r\n    }\r\n  }, [\r\n    activeNetwork.id,\r\n    address,\r\n    blockClient,\r\n    dataClient,\r\n    dispatch,\r\n    error,\r\n    interval,\r\n    oldestTimestampFetched,\r\n    priceData,\r\n    startTimestamp,\r\n    timeWindow,\r\n  ])\r\n\r\n  // return data\r\n  return priceData\r\n}\r\n\r\n/**\r\n * Get top pools addresses that token is included in\r\n * If not loaded, fetch and store\r\n * @param address\r\n */\r\nexport function useTokenTransactions(address: string): Transaction[] | undefined {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const token = useSelector((state: AppState) => state.tokens.byAddress[activeNetwork.id]?.[address])\r\n  const transactions = token.transactions\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { error, data } = await fetchTokenTransactions(address, dataClient)\r\n      if (error) {\r\n        setError(true)\r\n      } else if (data) {\r\n        dispatch(updateTransactions({ tokenAddress: address, transactions: data, networkId: activeNetwork.id }))\r\n      }\r\n    }\r\n    if (!transactions && !error) {\r\n      fetch()\r\n    }\r\n  }, [activeNetwork.id, address, dataClient, dispatch, error, transactions])\r\n\r\n  // return data\r\n  return transactions\r\n}\r\n","/**\r\n * gets the amoutn difference plus the % change in change itself (second order change)\r\n * @param {*} valueNow\r\n * @param {*} value24HoursAgo\r\n * @param {*} value48HoursAgo\r\n */\r\nexport const get2DayChange = (valueNow: string, value24HoursAgo: string, value48HoursAgo: string): [number, number] => {\r\n  // get volume info for both 24 hour periods\r\n  const currentChange = parseFloat(valueNow) - parseFloat(value24HoursAgo)\r\n  const previousChange = parseFloat(value24HoursAgo) - parseFloat(value48HoursAgo)\r\n  const adjustedPercentChange = ((currentChange - previousChange) / previousChange) * 100\r\n  if (isNaN(adjustedPercentChange) || !isFinite(adjustedPercentChange)) {\r\n    return [currentChange, 0]\r\n  }\r\n  return [currentChange, adjustedPercentChange]\r\n}\r\n\r\n/**\r\n * get standard percent change between two values\r\n * @param {*} valueNow\r\n * @param {*} value24HoursAgo\r\n */\r\nexport const getPercentChange = (valueNow: string | undefined, value24HoursAgo: string | undefined): number => {\r\n  if (valueNow && value24HoursAgo) {\r\n    const change = ((parseFloat(valueNow) - parseFloat(value24HoursAgo)) / parseFloat(value24HoursAgo)) * 100\r\n    if (isFinite(change)) return change\r\n  }\r\n  return 0\r\n}\r\n","import { useBlocksFromTimestamps } from 'hooks/useBlocksFromTimestamps'\r\nimport { useDeltaTimestamps } from 'utils/queries'\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport gql from 'graphql-tag'\r\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\n\r\nexport interface EthPrices {\r\n  current: number\r\n  oneDay: number\r\n  twoDay: number\r\n  week: number\r\n}\r\n\r\nexport const ETH_PRICES = gql`\r\n  query prices($block24: Int!, $block48: Int!, $blockWeek: Int!) {\r\n    current: bundles(first: 1, subgraphError: allow) {\r\n      ethPriceUSD\r\n    }\r\n    oneDay: bundles(first: 1, block: { number: $block24 }, subgraphError: allow) {\r\n      ethPriceUSD\r\n    }\r\n    twoDay: bundles(first: 1, block: { number: $block48 }, subgraphError: allow) {\r\n      ethPriceUSD\r\n    }\r\n    oneWeek: bundles(first: 1, block: { number: $blockWeek }, subgraphError: allow) {\r\n      ethPriceUSD\r\n    }\r\n  }\r\n`\r\n\r\ninterface PricesResponse {\r\n  current: {\r\n    ethPriceUSD: string\r\n  }[]\r\n  oneDay: {\r\n    ethPriceUSD: string\r\n  }[]\r\n  twoDay: {\r\n    ethPriceUSD: string\r\n  }[]\r\n  oneWeek: {\r\n    ethPriceUSD: string\r\n  }[]\r\n}\r\n\r\nasync function fetchEthPrices(\r\n  blocks: [number, number, number],\r\n  client: ApolloClient<NormalizedCacheObject>\r\n): Promise<{ data: EthPrices | undefined; error: boolean }> {\r\n  try {\r\n    const { data, error } = await client.query<PricesResponse>({\r\n      query: ETH_PRICES,\r\n      variables: {\r\n        block24: blocks[0],\r\n        block48: blocks[1] ?? 1,\r\n        blockWeek: blocks[2] ?? 1,\r\n      },\r\n    })\r\n\r\n    if (error) {\r\n      return {\r\n        error: true,\r\n        data: undefined,\r\n      }\r\n    } else if (data) {\r\n      return {\r\n        data: {\r\n          current: parseFloat(data.current[0].ethPriceUSD ?? 0),\r\n          oneDay: parseFloat(data.oneDay[0]?.ethPriceUSD ?? 0),\r\n          twoDay: parseFloat(data.twoDay[0]?.ethPriceUSD ?? 0),\r\n          week: parseFloat(data.oneWeek[0]?.ethPriceUSD ?? 0),\r\n        },\r\n        error: false,\r\n      }\r\n    } else {\r\n      return {\r\n        data: undefined,\r\n        error: true,\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.log(e)\r\n    return {\r\n      data: undefined,\r\n      error: true,\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * returns eth prices at current, 24h, 48h, and 1w intervals\r\n */\r\nexport function useEthPrices(): EthPrices | undefined {\r\n  const [prices, setPrices] = useState<{ [network: string]: EthPrices | undefined }>()\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  const [t24, t48, tWeek] = useDeltaTimestamps()\r\n  const { blocks, error: blockError } = useBlocksFromTimestamps([t24, t48, tWeek])\r\n\r\n  // index on active network\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const indexedPrices = prices?.[activeNetwork.id]\r\n\r\n  const formattedBlocks = useMemo(() => {\r\n    if (blocks) {\r\n      return blocks.map((b) => parseFloat(b.number))\r\n    }\r\n    return undefined\r\n  }, [blocks])\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { data, error } = await fetchEthPrices(formattedBlocks as [number, number, number], dataClient)\r\n      if (error || blockError) {\r\n        setError(true)\r\n      } else if (data) {\r\n        setPrices({\r\n          [activeNetwork.id]: data,\r\n        })\r\n      }\r\n    }\r\n    if (!indexedPrices && !error && formattedBlocks) {\r\n      fetch()\r\n    }\r\n  }, [error, prices, formattedBlocks, blockError, dataClient, indexedPrices, activeNetwork.id])\r\n\r\n  return prices?.[activeNetwork.id]\r\n}\r\n","import { getPercentChange } from './../../utils/data'\r\nimport { useQuery } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { useDeltaTimestamps } from 'utils/queries'\r\nimport { useBlocksFromTimestamps } from 'hooks/useBlocksFromTimestamps'\r\nimport { get2DayChange } from 'utils/data'\r\nimport { TokenData } from 'state/tokens/reducer'\r\nimport { useEthPrices } from 'hooks/useEthPrices'\r\nimport { formatTokenSymbol, formatTokenName } from 'utils/tokens'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\n\r\nexport const TOKENS_BULK = (block: number | undefined, tokens: string[]) => {\r\n  let tokenString = `[`\r\n  tokens.map((address) => {\r\n    return (tokenString += `\"${address}\",`)\r\n  })\r\n  tokenString += ']'\r\n  const queryString =\r\n    `\r\n    query tokens {\r\n      tokens(where: {id_in: ${tokenString}},` +\r\n    (block ? `block: {number: ${block}} ,` : ``) +\r\n    ` orderBy: totalValueLockedUSD, orderDirection: desc, subgraphError: allow) {\r\n        id\r\n        symbol\r\n        name\r\n        derivedETH\r\n        volumeUSD\r\n        volume\r\n        txCount\r\n        totalValueLocked\r\n        feesUSD\r\n        totalValueLockedUSD\r\n      }\r\n    }\r\n    `\r\n  return gql(queryString)\r\n}\r\n\r\ninterface TokenFields {\r\n  id: string\r\n  symbol: string\r\n  name: string\r\n  derivedETH: string\r\n  volumeUSD: string\r\n  volume: string\r\n  feesUSD: string\r\n  txCount: string\r\n  totalValueLocked: string\r\n  totalValueLockedUSD: string\r\n}\r\n\r\ninterface TokenDataResponse {\r\n  tokens: TokenFields[]\r\n  bundles: {\r\n    ethPriceUSD: string\r\n  }[]\r\n}\r\n\r\n/**\r\n * Fetch top addresses by volume\r\n */\r\nexport function useFetchedTokenDatas(\r\n  tokenAddresses: string[]\r\n): {\r\n  loading: boolean\r\n  error: boolean\r\n  data:\r\n    | {\r\n        [address: string]: TokenData\r\n      }\r\n    | undefined\r\n} {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const { dataClient } = useClients()\r\n\r\n  // get blocks from historic timestamps\r\n  const [t24, t48, tWeek] = useDeltaTimestamps()\r\n\r\n  const { blocks, error: blockError } = useBlocksFromTimestamps([t24, t48, tWeek])\r\n  const [block24, block48, blockWeek] = blocks ?? []\r\n  const ethPrices = useEthPrices()\r\n\r\n  const { loading, error, data } = useQuery<TokenDataResponse>(TOKENS_BULK(undefined, tokenAddresses), {\r\n    client: dataClient,\r\n  })\r\n\r\n  const { loading: loading24, error: error24, data: data24 } = useQuery<TokenDataResponse>(\r\n    TOKENS_BULK(parseInt(block24?.number), tokenAddresses),\r\n    {\r\n      client: dataClient,\r\n    }\r\n  )\r\n\r\n  const { loading: loading48, error: error48, data: data48 } = useQuery<TokenDataResponse>(\r\n    TOKENS_BULK(parseInt(block48?.number), tokenAddresses),\r\n    {\r\n      client: dataClient,\r\n    }\r\n  )\r\n\r\n  const { loading: loadingWeek, error: errorWeek, data: dataWeek } = useQuery<TokenDataResponse>(\r\n    TOKENS_BULK(parseInt(blockWeek?.number), tokenAddresses),\r\n    {\r\n      client: dataClient,\r\n    }\r\n  )\r\n\r\n  const anyError = Boolean(error || error24 || error48 || blockError || errorWeek)\r\n  const anyLoading = Boolean(loading || loading24 || loading48 || loadingWeek || !blocks)\r\n\r\n  if (!ethPrices) {\r\n    return {\r\n      loading: true,\r\n      error: false,\r\n      data: undefined,\r\n    }\r\n  }\r\n\r\n  // return early if not all data yet\r\n  if (anyError || anyLoading) {\r\n    return {\r\n      loading: anyLoading,\r\n      error: anyError,\r\n      data: undefined,\r\n    }\r\n  }\r\n\r\n  const parsed = data?.tokens\r\n    ? data.tokens.reduce((accum: { [address: string]: TokenFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n  const parsed24 = data24?.tokens\r\n    ? data24.tokens.reduce((accum: { [address: string]: TokenFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n  const parsed48 = data48?.tokens\r\n    ? data48.tokens.reduce((accum: { [address: string]: TokenFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n  const parsedWeek = dataWeek?.tokens\r\n    ? dataWeek.tokens.reduce((accum: { [address: string]: TokenFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n\r\n  // format data and calculate daily changes\r\n  const formatted = tokenAddresses.reduce((accum: { [address: string]: TokenData }, address) => {\r\n    const current: TokenFields | undefined = parsed[address]\r\n    const oneDay: TokenFields | undefined = parsed24[address]\r\n    const twoDay: TokenFields | undefined = parsed48[address]\r\n    const week: TokenFields | undefined = parsedWeek[address]\r\n\r\n    const [volumeUSD, volumeUSDChange] =\r\n      current && oneDay && twoDay\r\n        ? get2DayChange(current.volumeUSD, oneDay.volumeUSD, twoDay.volumeUSD)\r\n        : current\r\n        ? [parseFloat(current.volumeUSD), 0]\r\n        : [0, 0]\r\n\r\n    const volumeUSDWeek =\r\n      current && week\r\n        ? parseFloat(current.volumeUSD) - parseFloat(week.volumeUSD)\r\n        : current\r\n        ? parseFloat(current.volumeUSD)\r\n        : 0\r\n    const tvlUSD = current ? parseFloat(current.totalValueLockedUSD) : 0\r\n    const tvlUSDChange = getPercentChange(current?.totalValueLockedUSD, oneDay?.totalValueLockedUSD)\r\n    const tvlToken = current ? parseFloat(current.totalValueLocked) : 0\r\n    const priceUSD = current ? parseFloat(current.derivedETH) * ethPrices.current : 0\r\n    const priceUSDOneDay = oneDay ? parseFloat(oneDay.derivedETH) * ethPrices.oneDay : 0\r\n    const priceUSDWeek = week ? parseFloat(week.derivedETH) * ethPrices.week : 0\r\n    const priceUSDChange =\r\n      priceUSD && priceUSDOneDay ? getPercentChange(priceUSD.toString(), priceUSDOneDay.toString()) : 0\r\n\r\n    const priceUSDChangeWeek =\r\n      priceUSD && priceUSDWeek ? getPercentChange(priceUSD.toString(), priceUSDWeek.toString()) : 0\r\n    const txCount =\r\n      current && oneDay\r\n        ? parseFloat(current.txCount) - parseFloat(oneDay.txCount)\r\n        : current\r\n        ? parseFloat(current.txCount)\r\n        : 0\r\n    const feesUSD =\r\n      current && oneDay\r\n        ? parseFloat(current.feesUSD) - parseFloat(oneDay.feesUSD)\r\n        : current\r\n        ? parseFloat(current.feesUSD)\r\n        : 0\r\n\r\n    accum[address] = {\r\n      exists: !!current,\r\n      address,\r\n      name: current ? formatTokenName(address, current.name, activeNetwork) : '',\r\n      symbol: current ? formatTokenSymbol(address, current.symbol, activeNetwork) : '',\r\n      volumeUSD,\r\n      volumeUSDChange,\r\n      volumeUSDWeek,\r\n      txCount,\r\n      tvlUSD,\r\n      feesUSD,\r\n      tvlUSDChange,\r\n      tvlToken,\r\n      priceUSD,\r\n      priceUSDChange,\r\n      priceUSDChangeWeek,\r\n    }\r\n\r\n    return accum\r\n  }, {})\r\n\r\n  return {\r\n    loading: anyLoading,\r\n    error: anyError,\r\n    data: formatted,\r\n  }\r\n}\r\n","import { TickProcessed } from './../../data/pools/tickData'\r\nimport { createAction } from '@reduxjs/toolkit'\r\nimport { PoolData, PoolChartEntry } from './reducer'\r\nimport { Transaction } from 'types'\r\nimport { SupportedNetwork } from 'constants/networks'\r\n\r\n// protocol wide info\r\nexport const updatePoolData = createAction<{ pools: PoolData[]; networkId: SupportedNetwork }>('pools/updatePoolData')\r\n\r\n// add pool address to byAddress\r\nexport const addPoolKeys = createAction<{ poolAddresses: string[]; networkId: SupportedNetwork }>('pool/addPoolKeys')\r\n\r\nexport const updatePoolChartData = createAction<{\r\n  poolAddress: string\r\n  chartData: PoolChartEntry[]\r\n  networkId: SupportedNetwork\r\n}>('pool/updatePoolChartData')\r\n\r\nexport const updatePoolTransactions = createAction<{\r\n  poolAddress: string\r\n  transactions: Transaction[]\r\n  networkId: SupportedNetwork\r\n}>('pool/updatePoolTransactions')\r\n\r\nexport const updateTickData = createAction<{\r\n  poolAddress: string\r\n  tickData:\r\n    | {\r\n        ticksProcessed: TickProcessed[]\r\n        feeTier: string\r\n        tickSpacing: number\r\n        activeTickIdx: number\r\n      }\r\n    | undefined\r\n  networkId: SupportedNetwork\r\n}>('pool/updateTickData')\r\n","import dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\r\nimport gql from 'graphql-tag'\r\nimport { PoolChartEntry } from 'state/pools/reducer'\r\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\n\r\n// format dayjs with the libraries that we need\r\ndayjs.extend(utc)\r\ndayjs.extend(weekOfYear)\r\nconst ONE_DAY_UNIX = 24 * 60 * 60\r\n\r\nconst POOL_CHART = gql`\r\n  query poolDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\r\n    poolDayDatas(\r\n      first: 1000\r\n      skip: $skip\r\n      where: { pool: $address, date_gt: $startTime }\r\n      orderBy: date\r\n      orderDirection: asc\r\n      subgraphError: allow\r\n    ) {\r\n      date\r\n      volumeUSD\r\n      tvlUSD\r\n      feesUSD\r\n    }\r\n  }\r\n`\r\n\r\ninterface ChartResults {\r\n  poolDayDatas: {\r\n    date: number\r\n    volumeUSD: string\r\n    tvlUSD: string\r\n    feesUSD: string\r\n  }[]\r\n}\r\n\r\nexport async function fetchPoolChartData(address: string, client: ApolloClient<NormalizedCacheObject>) {\r\n  let data: {\r\n    date: number\r\n    volumeUSD: string\r\n    tvlUSD: string\r\n    feesUSD: string\r\n  }[] = []\r\n  const startTimestamp = 1619170975\r\n  const endTimestamp = dayjs.utc().unix()\r\n\r\n  let error = false\r\n  let skip = 0\r\n  let allFound = false\r\n\r\n  try {\r\n    while (!allFound) {\r\n      const { data: chartResData, error, loading } = await client.query<ChartResults>({\r\n        query: POOL_CHART,\r\n        variables: {\r\n          address: address,\r\n          startTime: startTimestamp,\r\n          skip,\r\n        },\r\n        fetchPolicy: 'cache-first',\r\n      })\r\n      if (!loading) {\r\n        skip += 1000\r\n        if (chartResData.poolDayDatas.length < 1000 || error) {\r\n          allFound = true\r\n        }\r\n        if (chartResData) {\r\n          data = data.concat(chartResData.poolDayDatas)\r\n        }\r\n      }\r\n    }\r\n  } catch {\r\n    error = true\r\n  }\r\n\r\n  if (data) {\r\n    const formattedExisting = data.reduce((accum: { [date: number]: PoolChartEntry }, dayData) => {\r\n      const roundedDate = parseInt((dayData.date / ONE_DAY_UNIX).toFixed(0))\r\n      accum[roundedDate] = {\r\n        date: dayData.date,\r\n        volumeUSD: parseFloat(dayData.volumeUSD),\r\n        totalValueLockedUSD: parseFloat(dayData.tvlUSD),\r\n        feesUSD: parseFloat(dayData.feesUSD),\r\n      }\r\n      return accum\r\n    }, {})\r\n\r\n    const firstEntry = formattedExisting[parseInt(Object.keys(formattedExisting)[0])]\r\n\r\n    // fill in empty days ( there will be no day datas if no trades made that day )\r\n    let timestamp = firstEntry?.date ?? startTimestamp\r\n    let latestTvl = firstEntry?.totalValueLockedUSD ?? 0\r\n    while (timestamp < endTimestamp - ONE_DAY_UNIX) {\r\n      const nextDay = timestamp + ONE_DAY_UNIX\r\n      const currentDayIndex = parseInt((nextDay / ONE_DAY_UNIX).toFixed(0))\r\n      if (!Object.keys(formattedExisting).includes(currentDayIndex.toString())) {\r\n        formattedExisting[currentDayIndex] = {\r\n          date: nextDay,\r\n          volumeUSD: 0,\r\n          totalValueLockedUSD: latestTvl,\r\n          feesUSD: 0,\r\n        }\r\n      } else {\r\n        latestTvl = formattedExisting[currentDayIndex].totalValueLockedUSD\r\n      }\r\n      timestamp = nextDay\r\n    }\r\n\r\n    const dateMap = Object.keys(formattedExisting).map((key) => {\r\n      return formattedExisting[parseInt(key)]\r\n    })\r\n\r\n    return {\r\n      data: dateMap,\r\n      error: false,\r\n    }\r\n  } else {\r\n    return {\r\n      data: undefined,\r\n      error,\r\n    }\r\n  }\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { Transaction, TransactionType } from 'types'\r\nimport { formatTokenSymbol } from 'utils/tokens'\r\n\r\nconst POOL_TRANSACTIONS = gql`\r\n  query transactions($address: Bytes!) {\r\n    mints(first: 100, orderBy: timestamp, orderDirection: desc, where: { pool: $address }, subgraphError: allow) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      owner\r\n      sender\r\n      origin\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    swaps(first: 100, orderBy: timestamp, orderDirection: desc, where: { pool: $address }, subgraphError: allow) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      origin\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n    burns(first: 100, orderBy: timestamp, orderDirection: desc, where: { pool: $address }, subgraphError: allow) {\r\n      timestamp\r\n      transaction {\r\n        id\r\n      }\r\n      pool {\r\n        token0 {\r\n          id\r\n          symbol\r\n        }\r\n        token1 {\r\n          id\r\n          symbol\r\n        }\r\n      }\r\n      owner\r\n      amount0\r\n      amount1\r\n      amountUSD\r\n    }\r\n  }\r\n`\r\n\r\ninterface TransactionResults {\r\n  mints: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  swaps: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  burns: {\r\n    timestamp: string\r\n    transaction: {\r\n      id: string\r\n    }\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    owner: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n}\r\n\r\nexport async function fetchPoolTransactions(\r\n  address: string,\r\n  client: ApolloClient<NormalizedCacheObject>\r\n): Promise<{ data: Transaction[] | undefined; error: boolean; loading: boolean }> {\r\n  const { data, error, loading } = await client.query<TransactionResults>({\r\n    query: POOL_TRANSACTIONS,\r\n    variables: {\r\n      address: address,\r\n    },\r\n    fetchPolicy: 'cache-first',\r\n  })\r\n\r\n  if (error) {\r\n    return {\r\n      data: undefined,\r\n      error: true,\r\n      loading: false,\r\n    }\r\n  }\r\n\r\n  if (loading && !data) {\r\n    return {\r\n      data: undefined,\r\n      error: false,\r\n      loading: true,\r\n    }\r\n  }\r\n\r\n  const mints = data.mints.map((m) => {\r\n    return {\r\n      type: TransactionType.MINT,\r\n      hash: m.transaction.id,\r\n      timestamp: m.timestamp,\r\n      sender: m.origin,\r\n      token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n      token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n      token0Address: m.pool.token0.id,\r\n      token1Address: m.pool.token1.id,\r\n      amountUSD: parseFloat(m.amountUSD),\r\n      amountToken0: parseFloat(m.amount0),\r\n      amountToken1: parseFloat(m.amount1),\r\n    }\r\n  })\r\n  const burns = data.burns.map((m) => {\r\n    return {\r\n      type: TransactionType.BURN,\r\n      hash: m.transaction.id,\r\n      timestamp: m.timestamp,\r\n      sender: m.owner,\r\n      token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n      token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n      token0Address: m.pool.token0.id,\r\n      token1Address: m.pool.token1.id,\r\n      amountUSD: parseFloat(m.amountUSD),\r\n      amountToken0: parseFloat(m.amount0),\r\n      amountToken1: parseFloat(m.amount1),\r\n    }\r\n  })\r\n\r\n  const swaps = data.swaps.map((m) => {\r\n    return {\r\n      type: TransactionType.SWAP,\r\n      hash: m.transaction.id,\r\n      timestamp: m.timestamp,\r\n      sender: m.origin,\r\n      token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n      token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n      token0Address: m.pool.token0.id,\r\n      token1Address: m.pool.token1.id,\r\n      amountUSD: parseFloat(m.amountUSD),\r\n      amountToken0: parseFloat(m.amount0),\r\n      amountToken1: parseFloat(m.amount1),\r\n    }\r\n  })\r\n\r\n  return { data: [...mints, ...burns, ...swaps], error: false, loading: false }\r\n}\r\n","import { addPoolKeys, updatePoolChartData, updatePoolTransactions, updateTickData } from 'state/pools/actions'\r\nimport { AppState, AppDispatch } from './../index'\r\nimport { useCallback, useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { PoolData, PoolChartEntry } from './reducer'\r\nimport { updatePoolData } from './actions'\r\nimport { notEmpty } from 'utils'\r\nimport { fetchPoolChartData } from 'data/pools/chartData'\r\nimport { Transaction } from 'types'\r\nimport { fetchPoolTransactions } from 'data/pools/transactions'\r\nimport { PoolTickData } from 'data/pools/tickData'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\n\r\nexport function useAllPoolData(): {\r\n  [address: string]: { data: PoolData | undefined; lastUpdated: number | undefined }\r\n} {\r\n  const [network] = useActiveNetworkVersion()\r\n  return useSelector((state: AppState) => state.pools.byAddress[network.id] ?? {})\r\n}\r\n\r\nexport function useUpdatePoolData(): (pools: PoolData[]) => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [network] = useActiveNetworkVersion()\r\n  return useCallback((pools: PoolData[]) => dispatch(updatePoolData({ pools, networkId: network.id })), [\r\n    dispatch,\r\n    network.id,\r\n  ])\r\n}\r\n\r\nexport function useAddPoolKeys(): (addresses: string[]) => void {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [network] = useActiveNetworkVersion()\r\n  return useCallback((poolAddresses: string[]) => dispatch(addPoolKeys({ poolAddresses, networkId: network.id })), [\r\n    dispatch,\r\n    network.id,\r\n  ])\r\n}\r\n\r\nexport function usePoolDatas(poolAddresses: string[]): PoolData[] {\r\n  const allPoolData = useAllPoolData()\r\n  const addPoolKeys = useAddPoolKeys()\r\n\r\n  const untrackedAddresses = poolAddresses.reduce((accum: string[], address) => {\r\n    if (!Object.keys(allPoolData).includes(address)) {\r\n      accum.push(address)\r\n    }\r\n    return accum\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (untrackedAddresses) {\r\n      addPoolKeys(untrackedAddresses)\r\n    }\r\n    return\r\n  }, [addPoolKeys, untrackedAddresses])\r\n\r\n  // filter for pools with data\r\n  const poolsWithData = poolAddresses\r\n    .map((address) => {\r\n      const poolData = allPoolData[address]?.data\r\n      return poolData ?? undefined\r\n    })\r\n    .filter(notEmpty)\r\n\r\n  return poolsWithData\r\n}\r\n\r\n/**\r\n * Get top pools addresses that token is included in\r\n * If not loaded, fetch and store\r\n * @param address\r\n */\r\nexport function usePoolChartData(address: string): PoolChartEntry[] | undefined {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  const pool = useSelector((state: AppState) => state.pools.byAddress[activeNetwork.id]?.[address])\r\n  const chartData = pool?.chartData\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { error, data } = await fetchPoolChartData(address, dataClient)\r\n      if (!error && data) {\r\n        dispatch(updatePoolChartData({ poolAddress: address, chartData: data, networkId: activeNetwork.id }))\r\n      }\r\n      if (error) {\r\n        setError(error)\r\n      }\r\n    }\r\n    if (!chartData && !error) {\r\n      fetch()\r\n    }\r\n  }, [address, dispatch, error, chartData, dataClient, activeNetwork.id])\r\n\r\n  // return data\r\n  return chartData\r\n}\r\n\r\n/**\r\n * Get all transactions on pool\r\n * @param address\r\n */\r\nexport function usePoolTransactions(address: string): Transaction[] | undefined {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const pool = useSelector((state: AppState) => state.pools.byAddress[activeNetwork.id]?.[address])\r\n  const transactions = pool?.transactions\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { error, data } = await fetchPoolTransactions(address, dataClient)\r\n      if (error) {\r\n        setError(true)\r\n      } else if (data) {\r\n        dispatch(updatePoolTransactions({ poolAddress: address, transactions: data, networkId: activeNetwork.id }))\r\n      }\r\n    }\r\n    if (!transactions && !error) {\r\n      fetch()\r\n    }\r\n  }, [address, dispatch, error, transactions, dataClient, activeNetwork.id])\r\n\r\n  // return data\r\n  return transactions\r\n}\r\n\r\nexport function usePoolTickData(\r\n  address: string\r\n): [PoolTickData | undefined, (poolAddress: string, tickData: PoolTickData) => void] {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const pool = useSelector((state: AppState) => state.pools.byAddress[activeNetwork.id]?.[address])\r\n  const tickData = pool.tickData\r\n\r\n  const setPoolTickData = useCallback(\r\n    (address: string, tickData: PoolTickData) =>\r\n      dispatch(updateTickData({ poolAddress: address, tickData, networkId: activeNetwork.id })),\r\n    [activeNetwork.id, dispatch]\r\n  )\r\n\r\n  return [tickData, setPoolTickData]\r\n}\r\n","import { useAllTokenData } from 'state/tokens/hooks'\r\nimport { TokenData } from 'state/tokens/reducer'\r\nimport { useFetchedTokenDatas } from 'data/tokens/tokenData'\r\nimport gql from 'graphql-tag'\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport { client } from 'apollo/client'\r\nimport { usePoolDatas, useAllPoolData } from 'state/pools/hooks'\r\nimport { PoolData } from 'state/pools/reducer'\r\nimport { notEmpty, escapeRegExp } from 'utils'\r\n\r\nexport const TOKEN_SEARCH = gql`\r\n  query tokens($value: String, $id: String) {\r\n    asSymbol: tokens(\r\n      where: { symbol_contains: $value }\r\n      orderBy: totalValueLockedUSD\r\n      orderDirection: desc\r\n      subgraphError: allow\r\n    ) {\r\n      id\r\n      symbol\r\n      name\r\n      totalValueLockedUSD\r\n    }\r\n    asName: tokens(\r\n      where: { name_contains: $value }\r\n      orderBy: totalValueLockedUSD\r\n      orderDirection: desc\r\n      subgraphError: allow\r\n    ) {\r\n      id\r\n      symbol\r\n      name\r\n      totalValueLockedUSD\r\n    }\r\n    asAddress: tokens(where: { id: $id }, orderBy: totalValueLockedUSD, orderDirection: desc, subgraphError: allow) {\r\n      id\r\n      symbol\r\n      name\r\n      totalValueLockedUSD\r\n    }\r\n  }\r\n`\r\n\r\nexport const POOL_SEARCH = gql`\r\n  query pools($tokens: [Bytes]!, $id: String) {\r\n    as0: pools(where: { token0_in: $tokens }, subgraphError: allow) {\r\n      id\r\n      feeTier\r\n      token0 {\r\n        id\r\n        symbol\r\n        name\r\n      }\r\n      token1 {\r\n        id\r\n        symbol\r\n        name\r\n      }\r\n    }\r\n    as1: pools(where: { token1_in: $tokens }, subgraphError: allow) {\r\n      id\r\n      feeTier\r\n      token0 {\r\n        id\r\n        symbol\r\n        name\r\n      }\r\n      token1 {\r\n        id\r\n        symbol\r\n        name\r\n      }\r\n    }\r\n    asAddress: pools(where: { id: $id }, subgraphError: allow) {\r\n      id\r\n      feeTier\r\n      token0 {\r\n        id\r\n        symbol\r\n        name\r\n      }\r\n      token1 {\r\n        id\r\n        symbol\r\n        name\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\ninterface TokenRes {\r\n  asSymbol: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n    totalValueLockedUSD: string\r\n  }[]\r\n  asName: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n    totalValueLockedUSD: string\r\n  }[]\r\n  asAddress: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n    totalValueLockedUSD: string\r\n  }[]\r\n}\r\n\r\ninterface PoolResFields {\r\n  id: string\r\n  feeTier: string\r\n  token0: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n  }\r\n  token1: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n  }\r\n}\r\n\r\ninterface PoolRes {\r\n  as0: PoolResFields[]\r\n  as1: PoolResFields[]\r\n  asAddress: PoolResFields[]\r\n}\r\n\r\nexport function useFetchSearchResults(\r\n  value: string\r\n): {\r\n  tokens: TokenData[]\r\n  pools: PoolData[]\r\n  loading: boolean\r\n} {\r\n  const allTokens = useAllTokenData()\r\n  const allPools = useAllPoolData()\r\n\r\n  const [tokenData, setTokenData] = useState<TokenRes | undefined>()\r\n  const [poolData, setPoolData] = useState<PoolRes | undefined>()\r\n\r\n  // fetch data based on search input\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      try {\r\n        const tokens = await client.query<TokenRes>({\r\n          query: TOKEN_SEARCH,\r\n          variables: {\r\n            value: value ? value.toUpperCase() : '',\r\n            id: value,\r\n          },\r\n        })\r\n        const pools = await client.query<PoolRes>({\r\n          query: POOL_SEARCH,\r\n          variables: {\r\n            tokens: tokens.data.asSymbol?.map((t) => t.id),\r\n            id: value,\r\n          },\r\n        })\r\n\r\n        if (tokens.data) {\r\n          setTokenData(tokens.data)\r\n        }\r\n        if (pools.data) {\r\n          setPoolData(pools.data)\r\n        }\r\n      } catch (e) {\r\n        console.log(e)\r\n      }\r\n    }\r\n    if (value && value.length > 0) {\r\n      fetch()\r\n    }\r\n  }, [value])\r\n\r\n  const allFetchedTokens = useMemo(() => {\r\n    if (tokenData) {\r\n      return [...tokenData.asAddress, ...tokenData.asName, ...tokenData.asSymbol]\r\n    }\r\n    return []\r\n  }, [tokenData])\r\n\r\n  const allFetchedPools = useMemo(() => {\r\n    if (poolData) {\r\n      return [...poolData.asAddress, ...poolData.as0, ...poolData.as1]\r\n    }\r\n    return []\r\n  }, [poolData])\r\n\r\n  // format as token and pool datas\r\n  const { data: tokenFullDatas, loading: tokenFullLoading } = useFetchedTokenDatas(allFetchedTokens.map((t) => t.id))\r\n\r\n  const poolDatasFull = usePoolDatas(allFetchedPools.map((p) => p.id))\r\n  const formattedTokens = useMemo(() => (tokenFullDatas ? Object.values(tokenFullDatas) : []), [tokenFullDatas])\r\n\r\n  const newTokens = useMemo(() => {\r\n    return formattedTokens.filter((t) => !Object.keys(allTokens).includes(t.address))\r\n  }, [allTokens, formattedTokens])\r\n\r\n  const combinedTokens = useMemo(() => {\r\n    return [\r\n      ...newTokens,\r\n      ...Object.values(allTokens)\r\n        .map((t) => t.data)\r\n        .filter(notEmpty),\r\n    ]\r\n  }, [allTokens, newTokens])\r\n\r\n  const filteredSortedTokens = useMemo(() => {\r\n    return combinedTokens.filter((t) => {\r\n      const regexMatches = Object.keys(t).map((tokenEntryKey) => {\r\n        const isAddress = value.slice(0, 2) === '0x'\r\n        if (tokenEntryKey === 'address' && isAddress) {\r\n          return t[tokenEntryKey].match(new RegExp(escapeRegExp(value), 'i'))\r\n        }\r\n        if (tokenEntryKey === 'symbol' && !isAddress) {\r\n          return t[tokenEntryKey].match(new RegExp(escapeRegExp(value), 'i'))\r\n        }\r\n        if (tokenEntryKey === 'name' && !isAddress) {\r\n          return t[tokenEntryKey].match(new RegExp(escapeRegExp(value), 'i'))\r\n        }\r\n        return false\r\n      })\r\n      return regexMatches.some((m) => m)\r\n    })\r\n  }, [combinedTokens, value])\r\n\r\n  const newPools = useMemo(() => {\r\n    return poolDatasFull.filter((p) => !Object.keys(allPools).includes(p.address))\r\n  }, [allPools, poolDatasFull])\r\n\r\n  const combinedPools = useMemo(() => {\r\n    return [\r\n      ...newPools,\r\n      ...Object.values(allPools)\r\n        .map((p) => p.data)\r\n        .filter(notEmpty),\r\n    ]\r\n  }, [allPools, newPools])\r\n\r\n  const filteredSortedPools = useMemo(() => {\r\n    return combinedPools.filter((t) => {\r\n      const regexMatches = Object.keys(t).map((key) => {\r\n        const isAddress = value.slice(0, 2) === '0x'\r\n        if (key === 'address' && isAddress) {\r\n          return t[key].match(new RegExp(escapeRegExp(value), 'i'))\r\n        }\r\n        if ((key === 'token0' || key === 'token1') && !isAddress) {\r\n          return (\r\n            t[key].name.match(new RegExp(escapeRegExp(value), 'i')) ||\r\n            t[key].symbol.toLocaleLowerCase().match(new RegExp(escapeRegExp(value.toLocaleLowerCase()), 'i'))\r\n          )\r\n        }\r\n        return false\r\n      })\r\n      return regexMatches.some((m) => m)\r\n    })\r\n  }, [combinedPools, value])\r\n\r\n  return {\r\n    tokens: filteredSortedTokens,\r\n    pools: filteredSortedPools,\r\n    loading: tokenFullLoading,\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nconst Column = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n`\r\nexport const ColumnCenter = styled(Column)`\r\n  width: 100%;\r\n  align-items: center;\r\n`\r\n\r\nexport const AutoColumn = styled.div<{\r\n  gap?: 'sm' | 'md' | 'lg' | string\r\n  justify?: 'stretch' | 'center' | 'start' | 'end' | 'flex-start' | 'flex-end' | 'space-between'\r\n}>`\r\n  display: grid;\r\n  grid-auto-rows: auto;\r\n  grid-row-gap: ${({ gap }) => (gap === 'sm' && '8px') || (gap === 'md' && '12px') || (gap === 'lg' && '24px') || gap};\r\n  justify-items: ${({ justify }) => justify && justify};\r\n`\r\n\r\nexport default Column\r\n","import React, { useState } from 'react'\r\nimport { HelpCircle } from 'react-feather'\r\nimport { ImageProps } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nconst BAD_SRCS: { [tokenAddress: string]: true } = {}\r\n\r\nexport interface LogoProps extends Pick<ImageProps, 'style' | 'alt' | 'className'> {\r\n  srcs: string[]\r\n}\r\n\r\n/**\r\n * Renders an image by sequentially trying a list of URIs, and then eventually a fallback triangle alert\r\n */\r\nexport default function Logo({ srcs, alt, ...rest }: LogoProps) {\r\n  const [, refresh] = useState<number>(0)\r\n\r\n  const src: string | undefined = srcs.find((src) => !BAD_SRCS[src])\r\n\r\n  if (src) {\r\n    return (\r\n      <img\r\n        {...rest}\r\n        alt={alt}\r\n        src={src}\r\n        onError={() => {\r\n          if (src) BAD_SRCS[src] = true\r\n          refresh((i) => i + 1)\r\n        }}\r\n      />\r\n    )\r\n  }\r\n\r\n  return <HelpCircle {...rest} />\r\n}\r\n\r\nexport const GenericImageWrapper = styled.img<{ size?: string }>`\r\n  width: ${({ size }) => size ?? '20px'};\r\n  height: ${({ size }) => size ?? '20px'};\r\n`\r\n","// used to mark unsupported tokens, these are hosted lists of unsupported tokens\r\n\r\nexport const UNSUPPORTED_LIST_URLS: string[] = []\r\nexport const OPTIMISM_LIST = 'https://static.optimism.io/optimism.tokenlist.json'\r\nexport const ARBITRUM_LIST = 'https://bridge.arbitrum.io/token-list-42161.json'\r\nexport const POLYGON_LIST =\r\n  'https://unpkg.com/quickswap-default-token-list@1.2.2/build/quickswap-default.tokenlist.json'\r\n\r\n// lower index == higher priority for token import\r\nexport const DEFAULT_LIST_OF_LISTS: string[] = [\r\n  OPTIMISM_LIST,\r\n  ARBITRUM_LIST,\r\n  POLYGON_LIST,\r\n  ...UNSUPPORTED_LIST_URLS, // need to load unsupported tokens as well\r\n]\r\n\r\n// default lists to be 'active' aka searched across\r\nexport const DEFAULT_ACTIVE_LIST_URLS: string[] = [OPTIMISM_LIST, ARBITRUM_LIST, POLYGON_LIST]\r\n","import { DEFAULT_LIST_OF_LISTS } from './../constants/lists'\r\n\r\n// use ordering of default list of lists to assign priority\r\nexport default function sortByListPriority(urlA: string, urlB: string) {\r\n  const first = DEFAULT_LIST_OF_LISTS.includes(urlA) ? DEFAULT_LIST_OF_LISTS.indexOf(urlA) : Number.MAX_SAFE_INTEGER\r\n  const second = DEFAULT_LIST_OF_LISTS.includes(urlB) ? DEFAULT_LIST_OF_LISTS.indexOf(urlB) : Number.MAX_SAFE_INTEGER\r\n\r\n  // need reverse order to make sure mapping includes top priority last\r\n  if (first < second) return 1\r\n  else if (first > second) return -1\r\n  return 0\r\n}\r\n","import { Currency, Token } from '@uniswap/sdk-core'\r\nimport { Tags, TokenInfo, TokenList } from '@uniswap/token-lists'\r\n\r\nimport { isAddress } from '../../utils'\r\n\r\ntype TagDetails = Tags[keyof Tags]\r\ninterface TagInfo extends TagDetails {\r\n  id: string\r\n}\r\n/**\r\n * Token instances created from token info on a token list.\r\n */\r\nexport class WrappedTokenInfo implements Token {\r\n  public readonly isNative: false = false\r\n  public readonly isToken: true = true\r\n  public readonly list: TokenList\r\n\r\n  public readonly tokenInfo: TokenInfo\r\n\r\n  constructor(tokenInfo: TokenInfo, list: TokenList) {\r\n    this.tokenInfo = tokenInfo\r\n    this.list = list\r\n  }\r\n\r\n  private _checksummedAddress: string | null = null\r\n\r\n  public get address(): string {\r\n    if (this._checksummedAddress) return this._checksummedAddress\r\n    const checksummedAddress = isAddress(this.tokenInfo.address)\r\n    if (!checksummedAddress) throw new Error(`Invalid token address: ${this.tokenInfo.address}`)\r\n    return (this._checksummedAddress = checksummedAddress)\r\n  }\r\n\r\n  public get chainId(): number {\r\n    return this.tokenInfo.chainId\r\n  }\r\n\r\n  public get decimals(): number {\r\n    return this.tokenInfo.decimals\r\n  }\r\n\r\n  public get name(): string {\r\n    return this.tokenInfo.name\r\n  }\r\n\r\n  public get symbol(): string {\r\n    return this.tokenInfo.symbol\r\n  }\r\n\r\n  public get logoURI(): string | undefined {\r\n    return this.tokenInfo.logoURI\r\n  }\r\n\r\n  private _tags: TagInfo[] | null = null\r\n  public get tags(): TagInfo[] {\r\n    if (this._tags !== null) return this._tags\r\n    if (!this.tokenInfo.tags) return (this._tags = [])\r\n    const listTags = this.list.tags\r\n    if (!listTags) return (this._tags = [])\r\n\r\n    return (this._tags = this.tokenInfo.tags.map((tagId) => {\r\n      return {\r\n        ...listTags[tagId],\r\n        id: tagId,\r\n      }\r\n    }))\r\n  }\r\n\r\n  equals(other: Currency): boolean {\r\n    return other.chainId === this.chainId && other.isToken && other.address.toLowerCase() === this.address.toLowerCase()\r\n  }\r\n\r\n  sortsBefore(other: Token): boolean {\r\n    if (this.equals(other)) throw new Error('Addresses should not be equal')\r\n    return this.address.toLowerCase() < other.address.toLowerCase()\r\n  }\r\n\r\n  public get wrapped(): Token {\r\n    return this\r\n  }\r\n}\r\n","import { UNSUPPORTED_LIST_URLS } from './../../constants/lists'\r\nimport DEFAULT_TOKEN_LIST from '@uniswap/default-token-list'\r\nimport { Tags, TokenList } from '@uniswap/token-lists'\r\nimport { useMemo } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { AppState } from '../index'\r\nimport sortByListPriority from 'utils/listSort'\r\nimport UNSUPPORTED_TOKEN_LIST from '../../constants/tokenLists/uniswap-v2-unsupported.tokenlist.json'\r\n// import { useFetchListCallback } from 'hooks/useFetchListCallback'\r\nimport { WrappedTokenInfo } from './wrappedTokenInfo'\r\n\r\ntype TagDetails = Tags[keyof Tags]\r\nexport interface TagInfo extends TagDetails {\r\n  id: string\r\n}\r\n\r\nexport type TokenAddressMap = Readonly<{\r\n  [chainId: number]: Readonly<{\r\n    [tokenAddress: string]: { token: WrappedTokenInfo; list: TokenList }\r\n  }>\r\n}>\r\n\r\ntype Mutable<T> = {\r\n  -readonly [P in keyof T]: Mutable<T[P]>\r\n}\r\n\r\nconst listCache: WeakMap<TokenList, TokenAddressMap> | null =\r\n  typeof WeakMap !== 'undefined' ? new WeakMap<TokenList, TokenAddressMap>() : null\r\n\r\nfunction listToTokenMap(list: TokenList): TokenAddressMap {\r\n  const result = listCache?.get(list)\r\n  if (result) return result\r\n\r\n  const map = list.tokens.reduce<Mutable<TokenAddressMap>>((tokenMap, tokenInfo) => {\r\n    const token = new WrappedTokenInfo(tokenInfo, list)\r\n    if (tokenMap[token.chainId]?.[token.address] !== undefined) {\r\n      console.error(`Duplicate token! ${token.address}`)\r\n      return tokenMap\r\n    }\r\n    if (!tokenMap[token.chainId]) tokenMap[token.chainId] = {}\r\n    tokenMap[token.chainId][token.address] = {\r\n      token,\r\n      list,\r\n    }\r\n    return tokenMap\r\n  }, {}) as TokenAddressMap\r\n  listCache?.set(list, map)\r\n  return map\r\n}\r\n\r\nconst TRANSFORMED_DEFAULT_TOKEN_LIST = listToTokenMap(DEFAULT_TOKEN_LIST)\r\n\r\nexport function useAllLists(): {\r\n  readonly [url: string]: {\r\n    readonly current: TokenList | null\r\n    readonly pendingUpdate: TokenList | null\r\n    readonly loadingRequestId: string | null\r\n    readonly error: string | null\r\n  }\r\n} {\r\n  return useSelector<AppState, AppState['lists']['byUrl']>((state) => state.lists.byUrl)\r\n}\r\n\r\n/**\r\n * Combine the tokens in map2 with the tokens on map1, where tokens on map1 take precedence\r\n * @param map1 the base token map\r\n * @param map2 the map of additioanl tokens to add to the base map\r\n */\r\nexport function combineMaps(map1: TokenAddressMap, map2: TokenAddressMap): TokenAddressMap {\r\n  const chainIds = Object.keys(\r\n    Object.keys(map1)\r\n      .concat(Object.keys(map2))\r\n      .reduce<{ [chainId: string]: true }>((memo, value) => {\r\n        memo[value] = true\r\n        return memo\r\n      }, {})\r\n  ).map((id) => parseInt(id))\r\n\r\n  return chainIds.reduce<Mutable<TokenAddressMap>>((memo, chainId) => {\r\n    memo[chainId] = {\r\n      ...map2[chainId],\r\n      // map1 takes precedence\r\n      ...map1[chainId],\r\n    }\r\n    return memo\r\n  }, {}) as TokenAddressMap\r\n}\r\n\r\n// merge tokens contained within lists from urls\r\nfunction useCombinedTokenMapFromUrls(urls: string[] | undefined): TokenAddressMap {\r\n  const lists = useAllLists()\r\n  return useMemo(() => {\r\n    if (!urls) return {}\r\n    return (\r\n      urls\r\n        .slice()\r\n        // sort by priority so top priority goes last\r\n        .sort(sortByListPriority)\r\n        .reduce((allTokens, currentUrl) => {\r\n          const current = lists[currentUrl]?.current\r\n          if (!current) return allTokens\r\n          try {\r\n            return combineMaps(allTokens, listToTokenMap(current))\r\n          } catch (error) {\r\n            console.error('Could not show token list due to error', error)\r\n            return allTokens\r\n          }\r\n        }, {})\r\n    )\r\n  }, [lists, urls])\r\n}\r\n\r\n// filter out unsupported lists\r\nexport function useActiveListUrls(): string[] | undefined {\r\n  return useSelector<AppState, AppState['lists']['activeListUrls']>((state) => state.lists.activeListUrls)?.filter(\r\n    (url) => !UNSUPPORTED_LIST_URLS.includes(url)\r\n  )\r\n}\r\n\r\nexport function useInactiveListUrls(): string[] {\r\n  const lists = useAllLists()\r\n  const allActiveListUrls = useActiveListUrls()\r\n  return Object.keys(lists).filter((url) => !allActiveListUrls?.includes(url) && !UNSUPPORTED_LIST_URLS.includes(url))\r\n}\r\n\r\n// get all the tokens from active lists, combine with local default tokens\r\nexport function useCombinedActiveList(): TokenAddressMap {\r\n  const activeListUrls = useActiveListUrls()\r\n  const activeTokens = useCombinedTokenMapFromUrls(activeListUrls)\r\n  return combineMaps(activeTokens, TRANSFORMED_DEFAULT_TOKEN_LIST)\r\n}\r\n\r\n// all tokens from inactive lists\r\nexport function useCombinedInactiveList(): TokenAddressMap {\r\n  const allInactiveListUrls: string[] = useInactiveListUrls()\r\n  return useCombinedTokenMapFromUrls(allInactiveListUrls)\r\n}\r\n\r\n// list of tokens not supported on interface, used to show warnings and prevent swaps and adds\r\nexport function useUnsupportedTokenList(): TokenAddressMap {\r\n  // get hard coded unsupported tokens\r\n  const localUnsupportedListMap = listToTokenMap(UNSUPPORTED_TOKEN_LIST)\r\n\r\n  // get any loaded unsupported tokens\r\n  const loadedUnsupportedListMap = useCombinedTokenMapFromUrls(UNSUPPORTED_LIST_URLS)\r\n\r\n  // format into one token address map\r\n  return combineMaps(localUnsupportedListMap, loadedUnsupportedListMap)\r\n}\r\n\r\nexport function useIsListActive(url: string): boolean {\r\n  const activeListUrls = useActiveListUrls()\r\n  return Boolean(activeListUrls?.includes(url))\r\n}\r\n","/**\r\n * Given a URI that may be ipfs, ipns, http, or https protocol, return the fetch-able http(s) URLs for the same content\r\n * @param uri to convert to fetch-able http url\r\n */\r\nexport default function uriToHttp(uri: string): string[] {\r\n  const protocol = uri.split(':')[0].toLowerCase()\r\n  switch (protocol) {\r\n    case 'https':\r\n      return [uri]\r\n    case 'http':\r\n      return ['https' + uri.substr(4), uri]\r\n    case 'ipfs':\r\n      const hash = uri.match(/^ipfs:(\\/\\/)?(.*)$/i)?.[2]\r\n      return [`https://cloudflare-ipfs.com/ipfs/${hash}/`, `https://ipfs.io/ipfs/${hash}/`]\r\n    case 'ipns':\r\n      const name = uri.match(/^ipns:(\\/\\/)?(.*)$/i)?.[2]\r\n      return [`https://cloudflare-ipfs.com/ipns/${name}/`, `https://ipfs.io/ipns/${name}/`]\r\n    default:\r\n      return []\r\n  }\r\n}\r\n","import { useMemo } from 'react'\r\nimport uriToHttp from '../utils/uriToHttp'\r\n\r\nexport default function useHttpLocations(uri: string | undefined): string[] {\r\n  return useMemo(() => {\r\n    return uri ? uriToHttp(uri) : []\r\n  }, [uri])\r\n}\r\n","import React, { useMemo } from 'react'\r\nimport styled from 'styled-components'\r\nimport { isAddress } from 'utils'\r\nimport Logo from '../Logo'\r\nimport { useCombinedActiveList } from 'state/lists/hooks'\r\nimport useHttpLocations from 'hooks/useHttpLocations'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { OptimismNetworkInfo } from 'constants/networks'\r\nimport EthereumLogo from '../../assets/images/ethereum-logo.png'\r\n\r\nexport const getTokenLogoURL = (address: string) => {\r\n  return `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${address}/logo.png`\r\n}\r\n\r\nconst StyledLogo = styled(Logo)<{ size: string }>`\r\n  width: ${({ size }) => size};\r\n  height: ${({ size }) => size};\r\n  border-radius: ${({ size }) => size};\r\n  box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.075);\r\n  background-color: ${({ theme }) => theme.white};\r\n  color: ${({ theme }) => theme.text4};\r\n`\r\n\r\nconst StyledEthereumLogo = styled.img<{ size: string }>`\r\n  width: ${({ size }) => size};\r\n  height: ${({ size }) => size};\r\n  box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.075);\r\n  border-radius: 24px;\r\n`\r\n\r\nexport default function CurrencyLogo({\r\n  address,\r\n  size = '24px',\r\n  style,\r\n  ...rest\r\n}: {\r\n  address?: string\r\n  size?: string\r\n  style?: React.CSSProperties\r\n}) {\r\n  // useOptimismList()\r\n  const optimismList = useCombinedActiveList()?.[10]\r\n  const arbitrumList = useCombinedActiveList()?.[42161]\r\n  const polygon = useCombinedActiveList()?.[137]\r\n\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  const checkSummed = isAddress(address)\r\n\r\n  const optimismURI = useMemo(() => {\r\n    if (checkSummed && optimismList?.[checkSummed]) {\r\n      return optimismList?.[checkSummed].token.logoURI\r\n    }\r\n    return undefined\r\n  }, [checkSummed, optimismList])\r\n  const uriLocationsOptimism = useHttpLocations(optimismURI)\r\n\r\n  const arbitrumURI = useMemo(() => {\r\n    if (checkSummed && arbitrumList?.[checkSummed]) {\r\n      return arbitrumList?.[checkSummed].token.logoURI\r\n    }\r\n    return undefined\r\n  }, [checkSummed, arbitrumList])\r\n  const uriLocationsArbitrum = useHttpLocations(arbitrumURI)\r\n\r\n  const polygonURI = useMemo(() => {\r\n    if (checkSummed && polygon?.[checkSummed]) {\r\n      return polygon?.[checkSummed].token.logoURI\r\n    }\r\n    return undefined\r\n  }, [checkSummed, polygon])\r\n  const uriLocationsPOlygon = useHttpLocations(polygonURI)\r\n\r\n  //temp until token logo issue merged\r\n  const tempSources: { [address: string]: string } = useMemo(() => {\r\n    return {\r\n      ['0x4dd28568d05f09b02220b09c2cb307bfd837cb95']:\r\n        'https://assets.coingecko.com/coins/images/18143/thumb/wCPb0b88_400x400.png?1630667954',\r\n    }\r\n  }, [])\r\n\r\n  const srcs: string[] = useMemo(() => {\r\n    const checkSummed = isAddress(address)\r\n\r\n    if (checkSummed && address) {\r\n      const override = tempSources[address]\r\n      return [\r\n        getTokenLogoURL(checkSummed),\r\n        ...uriLocationsOptimism,\r\n        ...uriLocationsArbitrum,\r\n        ...uriLocationsPOlygon,\r\n        override,\r\n      ]\r\n    }\r\n    return []\r\n  }, [address, tempSources, uriLocationsArbitrum, uriLocationsOptimism, uriLocationsPOlygon])\r\n\r\n  if (activeNetwork === OptimismNetworkInfo && address === '0x4200000000000000000000000000000000000006') {\r\n    return <StyledEthereumLogo src={EthereumLogo} size={size} style={style} {...rest} />\r\n  }\r\n\r\n  return <StyledLogo size={size} srcs={srcs} alt={'token logo'} style={style} {...rest} />\r\n}\r\n","import numbro from 'numbro'\r\n\r\n// using a currency library here in case we want to add more in future\r\nexport const formatDollarAmount = (num: number | undefined, digits = 2, round = true) => {\r\n  if (num === 0) return '$0.00'\r\n  if (!num) return '-'\r\n  if (num < 0.001 && digits <= 3) {\r\n    return '<$0.001'\r\n  }\r\n\r\n  return numbro(num).formatCurrency({\r\n    average: round,\r\n    mantissa: num > 1000 ? 2 : digits,\r\n    abbreviations: {\r\n      million: 'M',\r\n      billion: 'B',\r\n    },\r\n  })\r\n}\r\n\r\n// using a currency library here in case we want to add more in future\r\nexport const formatAmount = (num: number | undefined, digits = 2) => {\r\n  if (num === 0) return '0'\r\n  if (!num) return '-'\r\n  if (num < 0.001) {\r\n    return '<0.001'\r\n  }\r\n  return numbro(num).format({\r\n    average: true,\r\n    mantissa: num > 1000 ? 2 : digits,\r\n    abbreviations: {\r\n      million: 'M',\r\n      billion: 'B',\r\n    },\r\n  })\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport CurrencyLogo from '../CurrencyLogo'\r\n\r\nconst Wrapper = styled.div<{ margin: boolean; sizeraw: number }>`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-right: ${({ sizeraw, margin }) => margin && (sizeraw / 3 + 8).toString() + 'px'};\r\n`\r\n\r\ninterface DoubleCurrencyLogoProps {\r\n  margin?: boolean\r\n  size?: number\r\n  address0?: string\r\n  address1?: string\r\n}\r\n\r\nconst HigherLogo = styled(CurrencyLogo)`\r\n  z-index: 2;\r\n`\r\nconst CoveredLogo = styled(CurrencyLogo)<{ sizeraw: number }>`\r\n  // position: absolute;\r\n  // left: ${({ sizeraw }) => '-' + (sizeraw / 2).toString() + 'px'} !important;\r\n`\r\n\r\nexport default function DoubleCurrencyLogo({ address0, address1, size = 16, margin = false }: DoubleCurrencyLogoProps) {\r\n  return (\r\n    <Wrapper sizeraw={size} margin={margin}>\r\n      {address0 && <HigherLogo address={address0} size={size.toString() + 'px'} />}\r\n      {address1 && <CoveredLogo address={address1} size={size.toString() + 'px'} sizeraw={size} />}\r\n    </Wrapper>\r\n  )\r\n}\r\n","import styled from 'styled-components'\r\nimport { Box } from 'rebass/styled-components'\r\n\r\nconst Card = styled(Box)<{ width?: string; padding?: string; border?: string; borderRadius?: string }>`\r\n  width: ${({ width }) => width ?? '100%'};\r\n  border-radius: 16px;\r\n  padding: 1rem;\r\n  padding: ${({ padding }) => padding};\r\n  border: ${({ border }) => border};\r\n  border-radius: ${({ borderRadius }) => borderRadius};\r\n`\r\nexport default Card\r\n\r\nexport const LightCard = styled(Card)`\r\n  border: 1px solid ${({ theme }) => theme.bg2};\r\n  background-color: ${({ theme }) => theme.bg1};\r\n`\r\n\r\nexport const LightGreyCard = styled(Card)`\r\n  background-color: ${({ theme }) => theme.bg3};\r\n`\r\n\r\nexport const GreyCard = styled(Card)`\r\n  background-color: ${({ theme }) => theme.bg2};\r\n`\r\n\r\nexport const DarkGreyCard = styled(Card)`\r\n  background-color: ${({ theme }) => theme.bg0};\r\n`\r\n\r\nexport const OutlineCard = styled(Card)`\r\n  border: 1px solid ${({ theme }) => theme.bg3};\r\n`\r\n\r\nexport const YellowCard = styled(Card)`\r\n  background-color: rgba(243, 132, 30, 0.05);\r\n  color: ${({ theme }) => theme.yellow3};\r\n  font-weight: 500;\r\n`\r\n\r\nexport const PinkCard = styled(Card)`\r\n  background-color: rgba(255, 0, 122, 0.03);\r\n  color: ${({ theme }) => theme.primary1};\r\n  font-weight: 500;\r\n`\r\n\r\nexport const BlueCard = styled(Card)`\r\n  background-color: ${({ theme }) => theme.primary5};\r\n  color: ${({ theme }) => theme.blue2};\r\n  border-radius: 12px;\r\n  width: fit-content;\r\n`\r\n\r\nexport const ScrollableX = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  overflow-x: auto;\r\n  overflow-y: hidden;\r\n  white-space: nowrap;\r\n\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const GreyBadge = styled(Card)`\r\n  width: fit-content;\r\n  border-radius: 8px;\r\n  background: ${({ theme }) => theme.bg3};\r\n  color: ${({ theme }) => theme.text1};\r\n  padding: 4px 6px;\r\n  font-weight: 400;\r\n`\r\n","import { ThemeContext } from 'styled-components'\r\nimport { useContext } from 'react'\r\n\r\nexport default function useTheme() {\r\n  return useContext(ThemeContext)\r\n}\r\n","import React, { HTMLAttributes } from 'react'\r\nimport styled from 'styled-components'\r\nimport { darken, lighten } from 'polished'\r\n\r\nimport { RowBetween } from '../Row'\r\nimport { ChevronDown, Check, Star } from 'react-feather'\r\nimport { Button as RebassButton, ButtonProps } from 'rebass/styled-components'\r\nimport useTheme from 'hooks/useTheme'\r\n\r\nconst Base = styled(RebassButton)<{\r\n  padding?: string\r\n  width?: string\r\n  borderRadius?: string\r\n  altDisabledStyle?: boolean\r\n}>`\r\n  padding: ${({ padding }) => (padding ? padding : '8px 16px')};\r\n  width: ${({ width }) => (width ? width : '100%')};\r\n  font-weight: 500;\r\n  text-align: center;\r\n  border-radius: 12px;\r\n  border-radius: ${({ borderRadius }) => borderRadius && borderRadius};\r\n  outline: none;\r\n  border: 1px solid transparent;\r\n  color: white;\r\n  text-decoration: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: nowrap;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  position: relative;\r\n  z-index: 1;\r\n  &:disabled {\r\n    cursor: auto;\r\n  }\r\n\r\n  > * {\r\n    user-select: none;\r\n  }\r\n`\r\n\r\nexport const ButtonPrimary = styled(Base)<{ bgColor?: string }>`\r\n  background-color: ${({ theme, bgColor }) => bgColor ?? theme.primary1};\r\n  color: white;\r\n  &:focus {\r\n    box-shadow: 0 0 0 1pt ${({ theme, bgColor }) => darken(0.05, bgColor ?? theme.primary1)};\r\n    background-color: ${({ theme, bgColor }) => darken(0.05, bgColor ?? theme.primary1)};\r\n  }\r\n  &:hover {\r\n    background-color: ${({ theme, bgColor }) => darken(0.05, bgColor ?? theme.primary1)};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${({ theme, bgColor }) => darken(0.1, bgColor ?? theme.primary1)};\r\n    background-color: ${({ theme, bgColor }) => darken(0.1, bgColor ?? theme.primary1)};\r\n  }\r\n  &:disabled {\r\n    background-color: ${({ theme, altDisabledStyle, disabled }) =>\r\n      altDisabledStyle ? (disabled ? theme.bg3 : theme.primary1) : theme.bg3};\r\n    color: ${({ theme, altDisabledStyle, disabled }) =>\r\n      altDisabledStyle ? (disabled ? theme.text3 : 'white') : theme.text3};\r\n    cursor: auto;\r\n    box-shadow: none;\r\n    border: 1px solid transparent;\r\n    outline: none;\r\n    opacity: ${({ altDisabledStyle }) => (altDisabledStyle ? '0.5' : '1')};\r\n  }\r\n`\r\n\r\nexport const ButtonLight = styled(Base)`\r\n  background-color: ${({ theme }) => theme.primary5};\r\n  color: ${({ theme }) => theme.primaryText1};\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  &:focus {\r\n    box-shadow: 0 0 0 1pt ${({ theme, disabled }) => !disabled && darken(0.03, theme.primary5)};\r\n    background-color: ${({ theme, disabled }) => !disabled && darken(0.03, theme.primary5)};\r\n  }\r\n  &:hover {\r\n    background-color: ${({ theme, disabled }) => !disabled && darken(0.03, theme.primary5)};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${({ theme, disabled }) => !disabled && darken(0.05, theme.primary5)};\r\n    background-color: ${({ theme, disabled }) => !disabled && darken(0.05, theme.primary5)};\r\n  }\r\n  :disabled {\r\n    opacity: 0.4;\r\n    :hover {\r\n      cursor: auto;\r\n      background-color: ${({ theme }) => theme.primary5};\r\n      box-shadow: none;\r\n      border: 1px solid transparent;\r\n      outline: none;\r\n    }\r\n  }\r\n`\r\n\r\nexport const ButtonGray = styled(Base)`\r\n  background-color: ${({ theme }) => theme.bg3};\r\n  color: ${({ theme }) => theme.text2};\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  outline: none;\r\n  &:focus {\r\n    background-color: ${({ theme, disabled }) => !disabled && darken(0.05, theme.bg4)};\r\n    outline: none;\r\n  }\r\n  &:hover {\r\n    background-color: ${({ theme, disabled }) => !disabled && darken(0.05, theme.bg4)};\r\n    outline: none;\r\n  }\r\n  &:active {\r\n    background-color: ${({ theme, disabled }) => !disabled && darken(0.1, theme.bg4)};\r\n    outline: none;\r\n  }\r\n`\r\n\r\nexport const ButtonSecondary = styled(Base)`\r\n  border: 1px solid ${({ theme }) => theme.primary4};\r\n  color: ${({ theme }) => theme.primary1};\r\n  background-color: transparent;\r\n  font-size: 16px;\r\n  border-radius: 12px;\r\n  padding: ${({ padding }) => (padding ? padding : '10px')};\r\n\r\n  &:focus {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => theme.primary4};\r\n    border: 1px solid ${({ theme }) => theme.primary3};\r\n  }\r\n  &:hover {\r\n    border: 1px solid ${({ theme }) => theme.primary3};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => theme.primary4};\r\n    border: 1px solid ${({ theme }) => theme.primary3};\r\n  }\r\n  &:disabled {\r\n    opacity: 50%;\r\n    cursor: auto;\r\n  }\r\n  a:hover {\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\nexport const ButtonPink = styled(Base)`\r\n  background-color: ${({ theme }) => theme.primary1};\r\n  color: white;\r\n\r\n  &:focus {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => darken(0.05, theme.primary1)};\r\n    background-color: ${({ theme }) => darken(0.05, theme.primary1)};\r\n  }\r\n  &:hover {\r\n    background-color: ${({ theme }) => darken(0.05, theme.primary1)};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => darken(0.1, theme.primary1)};\r\n    background-color: ${({ theme }) => darken(0.1, theme.primary1)};\r\n  }\r\n  &:disabled {\r\n    background-color: ${({ theme }) => theme.primary1};\r\n    opacity: 50%;\r\n    cursor: auto;\r\n  }\r\n`\r\n\r\nexport const ButtonUNIGradient = styled(ButtonPrimary)`\r\n  color: white;\r\n  padding: 4px 8px;\r\n  height: 36px;\r\n  font-weight: 500;\r\n  background-color: ${({ theme }) => theme.bg3};\r\n  background: radial-gradient(174.47% 188.91% at 1.84% 0%, #ff007a 0%, #2172e5 100%), #edeef2;\r\n  width: fit-content;\r\n  position: relative;\r\n  cursor: pointer;\r\n  border: none;\r\n  white-space: no-wrap;\r\n  :hover {\r\n    opacity: 0.8;\r\n  }\r\n  :active {\r\n    opacity: 0.9;\r\n  }\r\n`\r\n\r\nexport const ButtonOutlined = styled(Base)`\r\n  border: 1px solid ${({ theme }) => theme.bg2};\r\n  background-color: transparent;\r\n  color: ${({ theme }) => theme.text1};\r\n\r\n  &:focus {\r\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.bg4};\r\n  }\r\n  &:hover {\r\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.bg4};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.bg4};\r\n  }\r\n  &:disabled {\r\n    opacity: 50%;\r\n    cursor: auto;\r\n  }\r\n`\r\n\r\nexport const ButtonEmpty = styled(Base)`\r\n  background-color: transparent;\r\n  color: ${({ theme }) => theme.primary1};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  &:focus {\r\n    text-decoration: underline;\r\n  }\r\n  &:hover {\r\n    text-decoration: none;\r\n  }\r\n  &:active {\r\n    text-decoration: none;\r\n  }\r\n  &:disabled {\r\n    opacity: 50%;\r\n    cursor: auto;\r\n  }\r\n`\r\n\r\nexport const ButtonWhite = styled(Base)`\r\n  border: 1px solid #edeef2;\r\n  background-color: ${({ theme }) => theme.bg1};\r\n  color: black;\r\n\r\n  &:focus {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    box-shadow: 0 0 0 1pt ${darken(0.05, '#edeef2')};\r\n  }\r\n  &:hover {\r\n    box-shadow: 0 0 0 1pt ${darken(0.1, '#edeef2')};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${darken(0.1, '#edeef2')};\r\n  }\r\n  &:disabled {\r\n    opacity: 50%;\r\n    cursor: auto;\r\n  }\r\n`\r\n\r\nconst ButtonConfirmedStyle = styled(Base)`\r\n  background-color: ${({ theme }) => lighten(0.5, theme.green1)};\r\n  color: ${({ theme }) => theme.green1};\r\n  border: 1px solid ${({ theme }) => theme.green1};\r\n\r\n  &:disabled {\r\n    opacity: 50%;\r\n    cursor: auto;\r\n  }\r\n`\r\n\r\nconst ButtonErrorStyle = styled(Base)`\r\n  background-color: ${({ theme }) => theme.red1};\r\n  border: 1px solid ${({ theme }) => theme.red1};\r\n\r\n  &:focus {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => darken(0.05, theme.red1)};\r\n    background-color: ${({ theme }) => darken(0.05, theme.red1)};\r\n  }\r\n  &:hover {\r\n    background-color: ${({ theme }) => darken(0.05, theme.red1)};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => darken(0.1, theme.red1)};\r\n    background-color: ${({ theme }) => darken(0.1, theme.red1)};\r\n  }\r\n  &:disabled {\r\n    opacity: 50%;\r\n    cursor: auto;\r\n    box-shadow: none;\r\n    background-color: ${({ theme }) => theme.red1};\r\n    border: 1px solid ${({ theme }) => theme.red1};\r\n  }\r\n`\r\n\r\nexport function ButtonConfirmed({\r\n  confirmed,\r\n  altDisabledStyle,\r\n  ...rest\r\n}: { confirmed?: boolean; altDisabledStyle?: boolean } & ButtonProps) {\r\n  if (confirmed) {\r\n    return <ButtonConfirmedStyle {...rest} />\r\n  } else {\r\n    return <ButtonPrimary {...rest} altDisabledStyle={altDisabledStyle} />\r\n  }\r\n}\r\n\r\nexport function ButtonError({ error, ...rest }: { error?: boolean } & ButtonProps) {\r\n  if (error) {\r\n    return <ButtonErrorStyle {...rest} />\r\n  } else {\r\n    return <ButtonPrimary {...rest} />\r\n  }\r\n}\r\n\r\nexport function ButtonDropdown({ disabled = false, children, ...rest }: { disabled?: boolean } & ButtonProps) {\r\n  return (\r\n    <ButtonPrimary {...rest} disabled={disabled}>\r\n      <RowBetween>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>{children}</div>\r\n        <ChevronDown size={24} />\r\n      </RowBetween>\r\n    </ButtonPrimary>\r\n  )\r\n}\r\n\r\nexport function ButtonDropdownGrey({ disabled = false, children, ...rest }: { disabled?: boolean } & ButtonProps) {\r\n  return (\r\n    <ButtonGray {...rest} disabled={disabled} style={{ borderRadius: '20px' }}>\r\n      <RowBetween>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>{children}</div>\r\n        <ChevronDown size={24} />\r\n      </RowBetween>\r\n    </ButtonGray>\r\n  )\r\n}\r\n\r\nexport function ButtonDropdownLight({ disabled = false, children, ...rest }: { disabled?: boolean } & ButtonProps) {\r\n  return (\r\n    <ButtonOutlined {...rest} disabled={disabled}>\r\n      <RowBetween>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>{children}</div>\r\n        <ChevronDown size={24} />\r\n      </RowBetween>\r\n    </ButtonOutlined>\r\n  )\r\n}\r\n\r\nexport function ButtonRadio({ active, ...rest }: { active?: boolean } & ButtonProps) {\r\n  if (!active) {\r\n    return <ButtonWhite {...rest} />\r\n  } else {\r\n    return <ButtonPrimary {...rest} />\r\n  }\r\n}\r\n\r\nconst ActiveOutlined = styled(ButtonOutlined)`\r\n  border: 1px solid;\r\n  border-color: ${({ theme }) => theme.primary1};\r\n`\r\n\r\nconst Circle = styled.div`\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 50%;\r\n  background-color: ${({ theme }) => theme.primary1};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nconst CheckboxWrapper = styled.div`\r\n  width: 30px;\r\n  padding: 0 10px;\r\n`\r\n\r\nexport function ButtonRadioChecked({ active = false, children, ...rest }: { active?: boolean } & ButtonProps) {\r\n  if (!active) {\r\n    return (\r\n      <ButtonOutlined borderRadius=\"12px\" padding=\"12px 8px\" {...rest}>\r\n        {<RowBetween>{children}</RowBetween>}\r\n      </ButtonOutlined>\r\n    )\r\n  } else {\r\n    return (\r\n      <ActiveOutlined {...rest} padding=\"12px 8px\" borderRadius=\"12px\">\r\n        {\r\n          <RowBetween>\r\n            {children}\r\n            <CheckboxWrapper>\r\n              <Circle>\r\n                <Check size={13} />\r\n              </Circle>\r\n            </CheckboxWrapper>\r\n          </RowBetween>\r\n        }\r\n      </ActiveOutlined>\r\n    )\r\n  }\r\n}\r\n\r\nconst HoverIcon = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 9999;\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n`\r\n\r\nexport const SavedIcon = ({\r\n  fill = false,\r\n  size = '20px',\r\n  ...rest\r\n}: { fill: boolean; size?: string } & HTMLAttributes<HTMLDivElement>) => {\r\n  const theme = useTheme()\r\n  return (\r\n    <HoverIcon {...rest}>\r\n      <Star stroke={theme.text2} fill={fill ? theme.text2 : 'transparent'} size={size} />\r\n    </HoverIcon>\r\n  )\r\n}\r\n\r\nexport const SmallOptionButton = styled(Base)<{ active?: boolean }>`\r\n  padding: 4px;\r\n  width: fit-content;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  min-width: 36px;\r\n  background-color: ${({ active, theme }) => (active ? theme.bg2 : theme.bg1)};\r\n  color: ${({ active, theme }) => (active ? theme.text1 : theme.text2)};\r\n\r\n  :hover {\r\n    opacity: 0.6;\r\n  }\r\n`\r\n\r\nexport const SmallOption = styled(ButtonOutlined)`\r\n  padding: 4px;\r\n`\r\n","import { useEffect, useRef } from 'react'\r\n\r\nexport default function useInterval(callback: () => void, delay: null | number, leading = true) {\r\n  const savedCallback = useRef<() => void>()\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback\r\n  }, [callback])\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      const current = savedCallback.current\r\n      current && current()\r\n    }\r\n\r\n    if (delay !== null) {\r\n      if (leading) tick()\r\n      const id = setInterval(tick, delay)\r\n      return () => clearInterval(id)\r\n    }\r\n    return undefined\r\n  }, [delay, leading])\r\n}\r\n","import { Placement } from '@popperjs/core'\r\nimport { transparentize } from 'polished'\r\nimport React, { useCallback, useState } from 'react'\r\nimport { usePopper } from 'react-popper'\r\nimport styled from 'styled-components'\r\nimport useInterval from '../../hooks/useInterval'\r\nimport Portal from '@reach/portal'\r\n\r\nconst PopoverContainer = styled.div<{ show: boolean }>`\r\n  z-index: 9999;\r\n\r\n  visibility: ${(props) => (props.show ? 'visible' : 'hidden')};\r\n  opacity: ${(props) => (props.show ? 1 : 0)};\r\n  transition: visibility 150ms linear, opacity 150ms linear;\r\n\r\n  background: ${({ theme }) => theme.bg2};\r\n  border: 1px solid ${({ theme }) => theme.bg3};\r\n  box-shadow: 0 4px 8px 0 ${({ theme }) => transparentize(0.9, theme.shadow1)};\r\n  color: ${({ theme }) => theme.text2};\r\n  border-radius: 8px;\r\n`\r\n\r\nconst ReferenceElement = styled.div`\r\n  display: inline-block;\r\n`\r\n\r\nconst Arrow = styled.div`\r\n  width: 8px;\r\n  height: 8px;\r\n  z-index: 9998;\r\n\r\n  ::before {\r\n    position: absolute;\r\n    width: 8px;\r\n    height: 8px;\r\n    z-index: 9998;\r\n\r\n    content: '';\r\n    border: 1px solid ${({ theme }) => theme.bg3};\r\n    transform: rotate(45deg);\r\n    background: ${({ theme }) => theme.bg2};\r\n  }\r\n\r\n  &.arrow-top {\r\n    bottom: -5px;\r\n    ::before {\r\n      border-top: none;\r\n      border-left: none;\r\n    }\r\n  }\r\n\r\n  &.arrow-bottom {\r\n    top: -5px;\r\n    ::before {\r\n      border-bottom: none;\r\n      border-right: none;\r\n    }\r\n  }\r\n\r\n  &.arrow-left {\r\n    right: -5px;\r\n\r\n    ::before {\r\n      border-bottom: none;\r\n      border-left: none;\r\n    }\r\n  }\r\n\r\n  &.arrow-right {\r\n    left: -5px;\r\n    ::before {\r\n      border-right: none;\r\n      border-top: none;\r\n    }\r\n  }\r\n`\r\n\r\nexport interface PopoverProps {\r\n  content: React.ReactNode\r\n  show: boolean\r\n  children: React.ReactNode\r\n  placement?: Placement\r\n}\r\n\r\nexport default function Popover({ content, show, children, placement = 'auto' }: PopoverProps) {\r\n  const [referenceElement, setReferenceElement] = useState<HTMLDivElement | null>(null)\r\n  const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(null)\r\n  const [arrowElement, setArrowElement] = useState<HTMLDivElement | null>(null)\r\n  const { styles, update, attributes } = usePopper(referenceElement, popperElement, {\r\n    placement,\r\n    strategy: 'fixed',\r\n    modifiers: [\r\n      { name: 'offset', options: { offset: [8, 8] } },\r\n      { name: 'arrow', options: { element: arrowElement } },\r\n    ],\r\n  })\r\n  const updateCallback = useCallback(() => {\r\n    update && update()\r\n  }, [update])\r\n  useInterval(updateCallback, show ? 100 : null)\r\n\r\n  return (\r\n    <>\r\n      <ReferenceElement ref={setReferenceElement as any}>{children}</ReferenceElement>\r\n      <Portal>\r\n        <PopoverContainer show={show} ref={setPopperElement as any} style={styles.popper} {...attributes.popper}>\r\n          {content}\r\n          <Arrow\r\n            className={`arrow-${attributes.popper?.['data-popper-placement'] ?? ''}`}\r\n            ref={setArrowElement as any}\r\n            style={styles.arrow}\r\n            {...attributes.arrow}\r\n          />\r\n        </PopoverContainer>\r\n      </Portal>\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport Popover, { PopoverProps } from '../Popover'\r\n\r\nconst TooltipContainer = styled.div`\r\n  width: 228px;\r\n  padding: 0.6rem 1rem;\r\n  line-height: 150%;\r\n  font-weight: 400;\r\n`\r\n\r\ninterface TooltipProps extends Omit<PopoverProps, 'content'> {\r\n  text: string\r\n}\r\n\r\nexport default function Tooltip({ text, ...rest }: TooltipProps) {\r\n  return <Popover content={<TooltipContainer>{text}</TooltipContainer>} {...rest} />\r\n}\r\n\r\nexport function MouseoverTooltip({ children, ...rest }: Omit<TooltipProps, 'show'>) {\r\n  const [show, setShow] = useState(false)\r\n  const open = useCallback(() => setShow(true), [setShow])\r\n  const close = useCallback(() => setShow(false), [setShow])\r\n  return (\r\n    <Tooltip {...rest} show={show}>\r\n      <div onMouseEnter={open} onMouseLeave={close}>\r\n        {children}\r\n      </div>\r\n    </Tooltip>\r\n  )\r\n}\r\n","import Tooltip from 'components/Tooltip'\r\nimport React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst TextWrapper = styled.div<{\r\n  margin: boolean\r\n  link: boolean\r\n  color?: string\r\n  fontSize?: string\r\n  adjustSize?: boolean\r\n}>`\r\n  position: relative;\r\n  margin-left: ${({ margin }) => margin && '4px'};\r\n  color: ${({ theme, link, color }) => (link ? theme.blue1 : color ?? theme.text1)};\r\n  font-size: ${({ fontSize }) => fontSize ?? 'inherit'};\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n\r\n  @media screen and (max-width: 600px) {\r\n    font-size: ${({ adjustSize }) => adjustSize && '12px'};\r\n  }\r\n`\r\n\r\nconst HoverInlineText = ({\r\n  text,\r\n  maxCharacters = 20,\r\n  margin = false,\r\n  adjustSize = false,\r\n  fontSize,\r\n  color,\r\n  link,\r\n  ...rest\r\n}: {\r\n  text: string\r\n  maxCharacters?: number\r\n  margin?: boolean\r\n  adjustSize?: boolean\r\n  fontSize?: string\r\n  color?: string\r\n  link?: boolean\r\n}) => {\r\n  const [showHover, setShowHover] = useState(false)\r\n\r\n  if (!text) {\r\n    return <span></span>\r\n  }\r\n\r\n  if (text.length > maxCharacters) {\r\n    return (\r\n      <Tooltip text={text} show={showHover}>\r\n        <TextWrapper\r\n          onMouseEnter={() => setShowHover(true)}\r\n          onMouseLeave={() => setShowHover(false)}\r\n          margin={margin}\r\n          adjustSize={adjustSize}\r\n          link={!!link}\r\n          color={color}\r\n          fontSize={fontSize}\r\n          {...rest}\r\n        >\r\n          {' ' + text.slice(0, maxCharacters - 1) + '...'}\r\n        </TextWrapper>\r\n      </Tooltip>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <TextWrapper color={color} margin={margin} adjustSize={adjustSize} link={!!link} fontSize={fontSize} {...rest}>\r\n      {text}\r\n    </TextWrapper>\r\n  )\r\n}\r\n\r\nexport default HoverInlineText\r\n","import { EthereumNetworkInfo, NetworkInfo } from 'constants/networks'\r\n\r\nexport function networkPrefix(activeNewtork: NetworkInfo) {\r\n  const isEthereum = activeNewtork === EthereumNetworkInfo\r\n  if (isEthereum) {\r\n    return '/'\r\n  }\r\n  const prefix = '/' + activeNewtork.route.toLocaleLowerCase() + '/'\r\n  return prefix\r\n}\r\n","import React, { useRef, useCallback, useState, useEffect, useMemo } from 'react'\r\nimport styled from 'styled-components'\r\nimport Row, { RowFixed } from 'components/Row'\r\nimport { HideSmall, TYPE } from 'theme'\r\nimport Hotkeys from 'react-hot-keys'\r\nimport { useFetchSearchResults } from 'data/search'\r\nimport { AutoColumn } from 'components/Column'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport { GreyBadge } from 'components/Card'\r\nimport { feeTierPercent } from 'utils'\r\nimport { useSavedTokens, useSavedPools } from 'state/user/hooks'\r\nimport { SavedIcon } from 'components/Button'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useTokenDatas } from 'state/tokens/hooks'\r\nimport { usePoolDatas } from 'state/pools/hooks'\r\nimport HoverInlineText from 'components/HoverInlineText'\r\nimport { TOKEN_HIDE, POOL_HIDE } from '../../constants/index'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { networkPrefix } from 'utils/networkPrefix'\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  z-index: 30;\r\n  width: 100%;\r\n`\r\n\r\nconst Wrapper = styled(Row)`\r\n  background-color: ${({ theme }) => theme.black};\r\n  padding: 10px 16px;\r\n  width: 500px;\r\n  height: 38px;\r\n  border-radius: 20px;\r\n  positon: relative;\r\n  z-index: 9999;\r\n\r\n  @media (max-width: 1080px) {\r\n    width: 100%;\r\n  } ;\r\n`\r\n\r\nconst StyledInput = styled.input`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  white-space: nowrap;\r\n  background: none;\r\n  border: none;\r\n  width: 100%;\r\n  font-size: 16px;\r\n  outline: none;\r\n  color: ${({ theme }) => theme.text1};\r\n\r\n  ::placeholder {\r\n    color: ${({ theme }) => theme.text3};\r\n    font-size: 16px;\r\n  }\r\n\r\n  @media screen and (max-width: 640px) {\r\n    ::placeholder {\r\n      font-size: 1rem;\r\n    }\r\n  }\r\n`\r\n\r\nconst Menu = styled.div<{ hide: boolean }>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 9999;\r\n  width: 800px;\r\n  top: 50px;\r\n  max-height: 600px;\r\n  overflow: auto;\r\n  right: 0;\r\n  padding: 1.5rem;\r\n  padding-bottom: 1.5rem;\r\n  position: absolute;\r\n  background: ${({ theme }) => theme.bg0};\r\n  border-radius: 8px;\r\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.04), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\r\n    0px 24px 32px rgba(0, 0, 0, 0.04);\r\n  display: ${({ hide }) => hide && 'none'};\r\n  border: 1px solid ${({ theme }) => theme.pink1};\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    position: absolute;\r\n    margin-top: 4px;\r\n    z-index: 9999;\r\n    width: 100%;\r\n    max-height: 400px;\r\n  `};\r\n`\r\n\r\nconst Blackout = styled.div`\r\n  position: absolute;\r\n  min-height: 100vh;\r\n  width: 100vw;\r\n  z-index: -40;\r\n  background-color: black;\r\n  opacity: 0.7;\r\n  left: 0;\r\n  top: 0;\r\n`\r\n\r\nconst ResponsiveGrid = styled.div`\r\n  display: grid;\r\n  grid-gap: 1em;\r\n  grid-template-columns: 1.5fr repeat(3, 1fr);\r\n  align-items: center;\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    grid-template-columns: 1fr;\r\n  `};\r\n`\r\n\r\nconst Break = styled.div`\r\n  height: 1px;\r\n  background-color: ${({ theme }) => theme.bg1};\r\n  width: 100%;\r\n`\r\n\r\nconst HoverText = styled.div<{ hide?: boolean | undefined }>`\r\n  color: ${({ theme }) => theme.blue1};\r\n  display: ${({ hide = false }) => hide && 'none'};\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n`\r\n\r\nconst HoverRowLink = styled.div`\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n`\r\n\r\nconst OptionButton = styled.div<{ enabled: boolean }>`\r\n  width: fit-content;\r\n  padding: 4px 8px;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  margin-right: 10px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: ${({ theme, enabled }) => (enabled ? theme.pink1 : 'transparent')};\r\n  color: ${({ theme, enabled }) => (enabled ? theme.white : theme.pink1)};\r\n  :hover {\r\n    opacity: 0.6;\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nconst Search = ({ ...rest }: React.HTMLAttributes<HTMLDivElement>) => {\r\n  const history = useHistory()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  const ref = useRef<HTMLInputElement>(null)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const textRef = useRef<HTMLDivElement>(null)\r\n\r\n  const handleDown = useCallback(() => {\r\n    if (ref != null && ref.current !== null) {\r\n      ref.current.focus()\r\n    }\r\n  }, [])\r\n\r\n  const [focused, setFocused] = useState<boolean>(false)\r\n  const [showMenu, setShowMenu] = useState(false)\r\n  const [value, setValue] = useState('')\r\n\r\n  const { tokens, pools } = useFetchSearchResults(value)\r\n\r\n  useEffect(() => {\r\n    if (value !== '') {\r\n      setFocused(true)\r\n    } else {\r\n      setFocused(false)\r\n    }\r\n  }, [value])\r\n\r\n  const [tokensShown, setTokensShown] = useState(3)\r\n  const [poolsShown, setPoolsShown] = useState(3)\r\n\r\n  const handleClick = (e: any) => {\r\n    if (!(menuRef.current && menuRef.current.contains(e.target)) && !(ref.current && ref.current.contains(e.target))) {\r\n      setPoolsShown(3)\r\n      setTokensShown(3)\r\n      setShowMenu(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClick)\r\n    return () => {\r\n      document.removeEventListener('click', handleClick)\r\n    }\r\n  })\r\n\r\n  // watchlist\r\n  const [savedTokens, addSavedToken] = useSavedTokens()\r\n  const [savedPools, addSavedPool] = useSavedPools()\r\n\r\n  const handleNav = (to: string) => {\r\n    setShowMenu(false)\r\n    setPoolsShown(3)\r\n    setTokensShown(3)\r\n    history.push(to)\r\n  }\r\n\r\n  // get date for watchlist\r\n  const watchListTokenData = useTokenDatas(savedTokens)\r\n  const watchListPoolData = usePoolDatas(savedPools)\r\n\r\n  // filter on view\r\n  const [showWatchlist, setShowWatchlist] = useState(false)\r\n  const tokensForList = useMemo(\r\n    () => (showWatchlist ? watchListTokenData ?? [] : tokens.sort((t0, t1) => (t0.volumeUSD > t1.volumeUSD ? -1 : 1))),\r\n    [showWatchlist, tokens, watchListTokenData]\r\n  )\r\n  const poolForList = useMemo(\r\n    () => (showWatchlist ? watchListPoolData ?? [] : pools.sort((p0, p1) => (p0.volumeUSD > p1.volumeUSD ? -1 : 1))),\r\n    [pools, showWatchlist, watchListPoolData]\r\n  )\r\n\r\n  return (\r\n    <Hotkeys keyName=\"command+/\" onKeyDown={handleDown}>\r\n      {showMenu ? <Blackout /> : null}\r\n      <Container>\r\n        <Wrapper {...rest}>\r\n          <StyledInput\r\n            type=\"text\"\r\n            value={value}\r\n            onChange={(e) => {\r\n              setValue(e.target.value)\r\n            }}\r\n            placeholder=\"Search pools or tokens\"\r\n            ref={ref}\r\n            onFocus={() => {\r\n              setFocused(true)\r\n              setShowMenu(true)\r\n            }}\r\n            onBlur={() => setFocused(false)}\r\n          />\r\n          {!focused && <TYPE.gray pl=\"2px\">/</TYPE.gray>}\r\n        </Wrapper>\r\n        <Menu hide={!showMenu} ref={menuRef}>\r\n          <AutoColumn gap=\"lg\">\r\n            <AutoColumn gap=\"sm\">\r\n              <RowFixed>\r\n                <OptionButton enabled={!showWatchlist} onClick={() => setShowWatchlist(false)}>\r\n                  Search\r\n                </OptionButton>\r\n                <OptionButton enabled={showWatchlist} onClick={() => setShowWatchlist(true)}>\r\n                  Watchlist\r\n                </OptionButton>\r\n              </RowFixed>\r\n            </AutoColumn>\r\n            <ResponsiveGrid>\r\n              <TYPE.main>Tokens</TYPE.main>\r\n              <HideSmall>\r\n                <TYPE.main textAlign=\"end\" fontSize=\"12px\">\r\n                  Volume 24H\r\n                </TYPE.main>\r\n              </HideSmall>\r\n              <HideSmall>\r\n                <TYPE.main textAlign=\"end\" fontSize=\"12px\">\r\n                  TVL\r\n                </TYPE.main>\r\n              </HideSmall>\r\n              <HideSmall>\r\n                <TYPE.main textAlign=\"end\" fontSize=\"12px\">\r\n                  Price\r\n                </TYPE.main>\r\n              </HideSmall>\r\n            </ResponsiveGrid>\r\n            {tokensForList\r\n              .filter((t) => !TOKEN_HIDE.includes(t.address))\r\n              .slice(0, tokensShown)\r\n              .map((t, i) => {\r\n                return (\r\n                  <HoverRowLink onClick={() => handleNav(networkPrefix(activeNetwork) + 'tokens/' + t.address)} key={i}>\r\n                    <ResponsiveGrid>\r\n                      <RowFixed>\r\n                        <CurrencyLogo address={t.address} />\r\n                        <TYPE.label ml=\"10px\">\r\n                          <HoverInlineText text={`${t.name} (${t.symbol})`} />{' '}\r\n                        </TYPE.label>\r\n                        <SavedIcon\r\n                          id=\"watchlist-icon\"\r\n                          size={'16px'}\r\n                          style={{ marginLeft: '8px' }}\r\n                          fill={savedTokens.includes(t.address)}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation()\r\n                            addSavedToken(t.address)\r\n                          }}\r\n                        />\r\n                      </RowFixed>\r\n                      <HideSmall>\r\n                        <TYPE.label textAlign=\"end\">{formatDollarAmount(t.volumeUSD)}</TYPE.label>\r\n                      </HideSmall>\r\n                      <HideSmall>\r\n                        <TYPE.label textAlign=\"end\">{formatDollarAmount(t.tvlUSD)}</TYPE.label>\r\n                      </HideSmall>\r\n                      <HideSmall>\r\n                        <TYPE.label textAlign=\"end\">{formatDollarAmount(t.priceUSD)}</TYPE.label>\r\n                      </HideSmall>\r\n                    </ResponsiveGrid>\r\n                  </HoverRowLink>\r\n                )\r\n              })}\r\n            {tokensForList.length === 0 ? (\r\n              <TYPE.main>{showWatchlist ? 'Saved tokens will appear here' : 'No results'}</TYPE.main>\r\n            ) : null}\r\n            <HoverText\r\n              onClick={() => {\r\n                setTokensShown(tokensShown + 5)\r\n              }}\r\n              hide={!(tokensForList.length > 3 && tokensForList.length >= tokensShown)}\r\n              ref={textRef}\r\n            >\r\n              See more...\r\n            </HoverText>\r\n            <Break />\r\n            <ResponsiveGrid>\r\n              <TYPE.main>Pools</TYPE.main>\r\n              <HideSmall>\r\n                <TYPE.main textAlign=\"end\" fontSize=\"12px\">\r\n                  Volume 24H\r\n                </TYPE.main>\r\n              </HideSmall>\r\n              <HideSmall>\r\n                <TYPE.main textAlign=\"end\" fontSize=\"12px\">\r\n                  TVL\r\n                </TYPE.main>\r\n              </HideSmall>\r\n              <HideSmall>\r\n                <TYPE.main textAlign=\"end\" fontSize=\"12px\">\r\n                  Price\r\n                </TYPE.main>\r\n              </HideSmall>\r\n            </ResponsiveGrid>\r\n            {poolForList\r\n              .filter((p) => !POOL_HIDE.includes(p.address))\r\n              .slice(0, poolsShown)\r\n              .map((p, i) => {\r\n                return (\r\n                  <HoverRowLink onClick={() => handleNav(networkPrefix(activeNetwork) + 'pools/' + p.address)} key={i}>\r\n                    <ResponsiveGrid key={i}>\r\n                      <RowFixed>\r\n                        <DoubleCurrencyLogo address0={p.token0.address} address1={p.token1.address} />\r\n                        <TYPE.label ml=\"10px\" style={{ whiteSpace: 'nowrap' }}>\r\n                          <HoverInlineText maxCharacters={12} text={`${p.token0.symbol} / ${p.token1.symbol}`} />\r\n                        </TYPE.label>\r\n                        <GreyBadge ml=\"10px\">{feeTierPercent(p.feeTier)}</GreyBadge>\r\n                        <SavedIcon\r\n                          id=\"watchlist-icon\"\r\n                          size={'16px'}\r\n                          style={{ marginLeft: '10px' }}\r\n                          fill={savedPools.includes(p.address)}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation()\r\n                            addSavedPool(p.address)\r\n                          }}\r\n                        />\r\n                      </RowFixed>\r\n                      <HideSmall>\r\n                        <TYPE.label textAlign=\"end\">{formatDollarAmount(p.volumeUSD)}</TYPE.label>\r\n                      </HideSmall>\r\n                      <HideSmall>\r\n                        <TYPE.label textAlign=\"end\">{formatDollarAmount(p.tvlUSD)}</TYPE.label>\r\n                      </HideSmall>\r\n                      <HideSmall>\r\n                        <TYPE.label textAlign=\"end\">{formatDollarAmount(p.token0Price)}</TYPE.label>\r\n                      </HideSmall>\r\n                    </ResponsiveGrid>\r\n                  </HoverRowLink>\r\n                )\r\n              })}\r\n            {poolForList.length === 0 ? (\r\n              <TYPE.main>{showWatchlist ? 'Saved pools will appear here' : 'No results'}</TYPE.main>\r\n            ) : null}\r\n            <HoverText\r\n              onClick={() => {\r\n                setPoolsShown(poolsShown + 5)\r\n              }}\r\n              hide={!(poolForList.length > 3 && poolForList.length >= poolsShown)}\r\n              ref={textRef}\r\n            >\r\n              See more...\r\n            </HoverText>\r\n          </AutoColumn>\r\n        </Menu>\r\n      </Container>\r\n    </Hotkeys>\r\n  )\r\n}\r\n\r\nexport default Search\r\n","import { RowFixed, RowBetween } from 'components/Row'\r\nimport { PolygonNetworkInfo, SUPPORTED_NETWORK_VERSIONS } from 'constants/networks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport React, { useState, useRef } from 'react'\r\nimport { ChevronDown } from 'react-feather'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport styled from 'styled-components'\r\nimport { StyledInternalLink, TYPE } from 'theme'\r\nimport { useOnClickOutside } from 'hooks/useOnClickOutside'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { EthereumNetworkInfo } from '../../constants/networks'\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  z-index: 40;\r\n`\r\n\r\nconst Wrapper = styled.div`\r\n  border-radius: 12px;\r\n  background-color: ${({ theme }) => theme.bg1};\r\n  padding: 6px 8px;\r\n  margin-right: 12px;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n`\r\n\r\nconst LogaContainer = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nconst LogoWrapper = styled.img`\r\n  width: 20px;\r\n  height: 20px;\r\n`\r\n\r\nconst FlyOut = styled.div`\r\n  background-color: ${({ theme }) => theme.bg1};\r\n  position: absolute;\r\n  top: 40px;\r\n  left: 0;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  width: 270px;\r\n`\r\n\r\nconst NetworkRow = styled(RowBetween)<{ active?: boolean; disabled?: boolean }>`\r\n  padding: 6px 8px;\r\n  background-color: ${({ theme, active }) => (active ? theme.bg2 : theme.bg1)};\r\n  border-radius: 8px;\r\n  opacity: ${({ disabled }) => (disabled ? '0.5' : 1)};\r\n  :hover {\r\n    cursor: ${({ disabled }) => (disabled ? 'initial' : 'pointer')};\r\n    opacity: ${({ disabled }) => (disabled ? 0.5 : 0.7)};\r\n  }\r\n`\r\n\r\nconst Badge = styled.div<{ bgColor?: string }>`\r\n  background-color: ${({ theme, bgColor }) => bgColor ?? theme.bg4};\r\n  border-radius: 6px;\r\n  padding: 2px 6px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n`\r\n\r\nconst GreenDot = styled.div`\r\n  height: 12px;\r\n  width: 12px;\r\n  margin-right: 12px;\r\n  background-color: ${({ theme }) => theme.green1};\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  border: 2px solid black;\r\n  right: -16px;\r\n  bottom: -4px;\r\n`\r\n\r\nexport default function NetworkDropdown() {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const theme = useTheme()\r\n\r\n  const [showMenu, setShowMenu] = useState(false)\r\n\r\n  const node = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(node, () => setShowMenu(false))\r\n\r\n  return (\r\n    <Container ref={node}>\r\n      <Wrapper onClick={() => setShowMenu(!showMenu)}>\r\n        <RowFixed>\r\n          <LogoWrapper src={activeNetwork.imageURL} />\r\n          <TYPE.main fontSize=\"14px\" color={theme.white} ml=\"8px\" mt=\"-2px\" mr=\"2px\" style={{ whiteSpace: 'nowrap' }}>\r\n            {activeNetwork.name}\r\n          </TYPE.main>\r\n          {activeNetwork === EthereumNetworkInfo || activeNetwork === PolygonNetworkInfo ? null : (\r\n            <Badge bgColor={activeNetwork.primaryColor} style={{ margin: '0 4px' }}>\r\n              L2\r\n            </Badge>\r\n          )}\r\n          <ChevronDown size=\"20px\" />\r\n        </RowFixed>\r\n      </Wrapper>\r\n      {showMenu && (\r\n        <FlyOut>\r\n          <AutoColumn gap=\"16px\">\r\n            <TYPE.main color={theme.text3} fontWeight={600} fontSize=\"16px\">\r\n              Select network\r\n            </TYPE.main>\r\n            {SUPPORTED_NETWORK_VERSIONS.map((n) => {\r\n              return (\r\n                <StyledInternalLink key={n.id} to={`${n === EthereumNetworkInfo ? '' : '/' + n.route}/`}>\r\n                  <NetworkRow\r\n                    onClick={() => {\r\n                      setShowMenu(false)\r\n                    }}\r\n                    active={activeNetwork.id === n.id}\r\n                  >\r\n                    <RowFixed>\r\n                      <LogaContainer>\r\n                        <LogoWrapper src={n.imageURL} />\r\n                        {activeNetwork.id === n.id && <GreenDot />}\r\n                      </LogaContainer>\r\n                      <TYPE.main ml=\"12px\" color={theme.white}>\r\n                        {n.name}\r\n                      </TYPE.main>\r\n                    </RowFixed>\r\n                    {n.blurb && <Badge>{n.blurb}</Badge>}\r\n                  </NetworkRow>\r\n                </StyledInternalLink>\r\n              )\r\n            })}\r\n          </AutoColumn>\r\n        </FlyOut>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { darken } from 'polished'\r\nimport styled from 'styled-components'\r\nimport LogoDark from '../../assets/svg/logo_white.svg'\r\nimport Menu from '../Menu'\r\nimport Row, { RowFixed, RowBetween } from '../Row'\r\nimport SearchSmall from 'components/Search'\r\nimport NetworkDropdown from 'components/Menu/NetworkDropdown'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { networkPrefix } from 'utils/networkPrefix'\r\nimport { AutoColumn } from 'components/Column'\r\n\r\nconst HeaderFrame = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 120px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  top: 0;\r\n  position: relative;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\r\n  padding: 1rem;\r\n  z-index: 2;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n\r\n  background-color: ${({ theme }) => theme.bg0};\r\n\r\n  @media (max-width: 1080px) {\r\n    grid-template-columns: 1fr;\r\n    padding: 0.5rem 1rem;\r\n    width: calc(100%);\r\n    position: relative;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\r\n    padding: 0.5rem 1rem;\r\n  `}\r\n`\r\n\r\nconst HeaderControls = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-self: flex-end;\r\n\r\n  @media (max-width: 1080px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst HeaderRow = styled(RowFixed)`\r\n  @media (max-width: 1080px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst HeaderLinks = styled(Row)`\r\n  justify-content: center;\r\n  @media (max-width: 1080px) {\r\n    padding: 0.5rem;\r\n    justify-content: flex-end;\r\n  } ;\r\n`\r\n\r\nconst Title = styled(NavLink)`\r\n  display: flex;\r\n  align-items: center;\r\n  pointer-events: auto;\r\n  justify-self: flex-start;\r\n  margin-right: 12px;\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    justify-self: center;\r\n  `};\r\n`\r\n\r\nconst UniIcon = styled.div`\r\n  transition: transform 0.3s ease;\r\n  :hover {\r\n    transform: rotate(-5deg);\r\n  }\r\n`\r\n\r\nconst activeClassName = 'ACTIVE'\r\n\r\nconst StyledNavLink = styled(NavLink).attrs({\r\n  activeClassName,\r\n})`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: left;\r\n  border-radius: 3rem;\r\n  outline: none;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  color: ${({ theme }) => theme.text3};\r\n  font-size: 1rem;\r\n  width: fit-content;\r\n  margin: 0 6px;\r\n  padding: 8px 12px;\r\n  font-weight: 500;\r\n\r\n  &.${activeClassName} {\r\n    border-radius: 12px;\r\n    background-color: ${({ theme }) => theme.bg2};\r\n    color: ${({ theme }) => theme.text1};\r\n  }\r\n\r\n  :hover,\r\n  :focus {\r\n    color: ${({ theme }) => darken(0.1, theme.text1)};\r\n  }\r\n`\r\n\r\nexport const StyledMenuButton = styled.button`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  background-color: transparent;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: 35px;\r\n  background-color: ${({ theme }) => theme.bg3};\r\n  margin-left: 8px;\r\n  padding: 0.15rem 0.5rem;\r\n  border-radius: 0.5rem;\r\n\r\n  :hover,\r\n  :focus {\r\n    cursor: pointer;\r\n    outline: none;\r\n    background-color: ${({ theme }) => theme.bg4};\r\n  }\r\n\r\n  svg {\r\n    margin-top: 2px;\r\n  }\r\n\r\n  > * {\r\n    stroke: ${({ theme }) => theme.text1};\r\n  }\r\n`\r\n\r\nconst SmallContentGrouping = styled.div`\r\n  width: 100%;\r\n  display: none;\r\n  @media (max-width: 1080px) {\r\n    display: initial;\r\n  }\r\n`\r\n\r\nexport default function Header() {\r\n  const [activeNewtork] = useActiveNetworkVersion()\r\n\r\n  return (\r\n    <HeaderFrame>\r\n      <HeaderRow>\r\n        <Title to={networkPrefix(activeNewtork)}>\r\n          <UniIcon>\r\n            <img width={'24px'} src={LogoDark} alt=\"logo\" />\r\n          </UniIcon>\r\n        </Title>\r\n        <HeaderLinks>\r\n          <StyledNavLink\r\n            id={`pool-nav-link`}\r\n            to={networkPrefix(activeNewtork)}\r\n            isActive={(match, { pathname }) => pathname === '/'}\r\n          >\r\n            Overview\r\n          </StyledNavLink>\r\n          <StyledNavLink id={`stake-nav-link`} to={networkPrefix(activeNewtork) + 'pools'}>\r\n            Pools\r\n          </StyledNavLink>\r\n          <StyledNavLink id={`stake-nav-link`} to={networkPrefix(activeNewtork) + 'tokens'}>\r\n            Tokens\r\n          </StyledNavLink>\r\n        </HeaderLinks>\r\n      </HeaderRow>\r\n      <HeaderControls>\r\n        <NetworkDropdown />\r\n        <SearchSmall />\r\n        <Menu />\r\n      </HeaderControls>\r\n      <SmallContentGrouping>\r\n        <AutoColumn gap=\"sm\">\r\n          <RowBetween>\r\n            <NetworkDropdown />\r\n            <Menu />\r\n          </RowBetween>\r\n          <SearchSmall />\r\n        </AutoColumn>\r\n      </SmallContentGrouping>\r\n    </HeaderFrame>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport { AlertTriangle, X } from 'react-feather'\r\nimport { useURLWarningToggle, useURLWarningVisible } from '../../state/user/hooks'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nconst PhishAlert = styled.div<{ isActive: any }>`\r\n  width: 100%;\r\n  padding: 6px 6px;\r\n  background-color: ${({ theme }) => theme.blue1};\r\n  color: white;\r\n  font-size: 11px;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  display: ${({ isActive }) => (isActive ? 'flex' : 'none')};\r\n`\r\n\r\nexport const StyledClose = styled(X)`\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nexport default function URLWarning() {\r\n  const toggleURLWarning = useURLWarningToggle()\r\n  const showURLWarning = useURLWarningVisible()\r\n\r\n  return isMobile ? (\r\n    <PhishAlert isActive={showURLWarning}>\r\n      <div style={{ display: 'flex' }}>\r\n        <AlertTriangle style={{ marginRight: 6 }} size={12} /> Make sure the URL is\r\n        <code style={{ padding: '0 4px', display: 'inline', fontWeight: 'bold' }}>app.uniswap.org</code>\r\n      </div>\r\n      <StyledClose size={12} onClick={toggleURLWarning} />\r\n    </PhishAlert>\r\n  ) : window.location.hostname === 'app.uniswap.org' ? (\r\n    <PhishAlert isActive={showURLWarning}>\r\n      <div style={{ display: 'flex' }}>\r\n        <AlertTriangle style={{ marginRight: 6 }} size={12} /> Always make sure the URL is\r\n        <code style={{ padding: '0 4px', display: 'inline', fontWeight: 'bold' }}>app.uniswap.org</code> - bookmark it\r\n        to be safe.\r\n      </div>\r\n      <StyledClose size={12} onClick={toggleURLWarning} />\r\n    </PhishAlert>\r\n  ) : null\r\n}\r\n","import { ActionCreatorWithPayload, createAction } from '@reduxjs/toolkit'\r\nimport { TokenList, Version } from '@uniswap/token-lists'\r\n\r\nexport const fetchTokenList: Readonly<{\r\n  pending: ActionCreatorWithPayload<{ url: string; requestId: string }>\r\n  fulfilled: ActionCreatorWithPayload<{ url: string; tokenList: TokenList; requestId: string }>\r\n  rejected: ActionCreatorWithPayload<{ url: string; errorMessage: string; requestId: string }>\r\n}> = {\r\n  pending: createAction('lists/fetchTokenList/pending'),\r\n  fulfilled: createAction('lists/fetchTokenList/fulfilled'),\r\n  rejected: createAction('lists/fetchTokenList/rejected'),\r\n}\r\n// add and remove from list options\r\nexport const addList = createAction<string>('lists/addList')\r\nexport const removeList = createAction<string>('lists/removeList')\r\n\r\n// select which lists to search across from loaded lists\r\nexport const enableList = createAction<string>('lists/enableList')\r\nexport const disableList = createAction<string>('lists/disableList')\r\n\r\n// versioning\r\nexport const acceptListUpdate = createAction<string>('lists/acceptListUpdate')\r\nexport const rejectVersionUpdate = createAction<Version>('lists/rejectVersionUpdate')\r\n","import { Version } from '@uniswap/token-lists'\r\n\r\nexport default function listVersionLabel(version: Version): string {\r\n  return `v${version.major}.${version.minor}.${version.patch}`\r\n}\r\n","import { diffTokenLists, TokenList } from '@uniswap/token-lists'\r\nimport React, { useCallback, useMemo } from 'react'\r\nimport ReactGA from 'react-ga'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Text } from 'rebass'\r\nimport styled from 'styled-components'\r\nimport { AppDispatch } from '../../state'\r\nimport { useRemovePopup } from '../../state/application/hooks'\r\nimport { acceptListUpdate } from '../../state/lists/actions'\r\nimport { TYPE } from '../../theme'\r\nimport listVersionLabel from '../../utils/listVersionLabel'\r\nimport { ButtonSecondary } from '../Button'\r\nimport { AutoColumn } from '../Column'\r\nimport { AutoRow } from '../Row'\r\n\r\nexport const ChangesList = styled.ul`\r\n  max-height: 400px;\r\n  overflow: auto;\r\n`\r\n\r\nexport default function ListUpdatePopup({\r\n  popKey,\r\n  listUrl,\r\n  oldList,\r\n  newList,\r\n  auto,\r\n}: {\r\n  popKey: string\r\n  listUrl: string\r\n  oldList: TokenList\r\n  newList: TokenList\r\n  auto: boolean\r\n}) {\r\n  const removePopup = useRemovePopup()\r\n  const removeThisPopup = useCallback(() => removePopup(popKey), [popKey, removePopup])\r\n  const dispatch = useDispatch<AppDispatch>()\r\n\r\n  const handleAcceptUpdate = useCallback(() => {\r\n    if (auto) return\r\n    ReactGA.event({\r\n      category: 'Lists',\r\n      action: 'Update List from Popup',\r\n      label: listUrl,\r\n    })\r\n    dispatch(acceptListUpdate(listUrl))\r\n    removeThisPopup()\r\n  }, [auto, dispatch, listUrl, removeThisPopup])\r\n\r\n  const { added: tokensAdded, changed: tokensChanged, removed: tokensRemoved } = useMemo(() => {\r\n    return diffTokenLists(oldList.tokens, newList.tokens)\r\n  }, [newList.tokens, oldList.tokens])\r\n  const numTokensChanged = useMemo(\r\n    () =>\r\n      Object.keys(tokensChanged).reduce((memo, chainId: any) => memo + Object.keys(tokensChanged[chainId]).length, 0),\r\n    [tokensChanged]\r\n  )\r\n\r\n  return (\r\n    <AutoRow>\r\n      <AutoColumn style={{ flex: '1' }} gap=\"8px\">\r\n        {auto ? (\r\n          <TYPE.body fontWeight={500}>\r\n            The token list &quot;{oldList.name}&quot; has been updated to{' '}\r\n            <strong>{listVersionLabel(newList.version)}</strong>.\r\n          </TYPE.body>\r\n        ) : (\r\n          <>\r\n            <div>\r\n              <Text>\r\n                An update is available for the token list &quot;{oldList.name}&quot; (\r\n                {listVersionLabel(oldList.version)} to {listVersionLabel(newList.version)}).\r\n              </Text>\r\n              <ChangesList>\r\n                {tokensAdded.length > 0 ? (\r\n                  <li>\r\n                    {tokensAdded.map((token, i) => (\r\n                      <React.Fragment key={`${token.chainId}-${token.address}`}>\r\n                        <strong title={token.address}>{token.symbol}</strong>\r\n                        {i === tokensAdded.length - 1 ? null : ', '}\r\n                      </React.Fragment>\r\n                    ))}{' '}\r\n                    added\r\n                  </li>\r\n                ) : null}\r\n                {tokensRemoved.length > 0 ? (\r\n                  <li>\r\n                    {tokensRemoved.map((token, i) => (\r\n                      <React.Fragment key={`${token.chainId}-${token.address}`}>\r\n                        <strong title={token.address}>{token.symbol}</strong>\r\n                        {i === tokensRemoved.length - 1 ? null : ', '}\r\n                      </React.Fragment>\r\n                    ))}{' '}\r\n                    removed\r\n                  </li>\r\n                ) : null}\r\n                {numTokensChanged > 0 ? <li>{numTokensChanged} tokens updated</li> : null}\r\n              </ChangesList>\r\n            </div>\r\n            <AutoRow>\r\n              <div style={{ flexGrow: 1, marginRight: 12 }}>\r\n                <ButtonSecondary onClick={handleAcceptUpdate}>Accept update</ButtonSecondary>\r\n              </div>\r\n              <div style={{ flexGrow: 1 }}>\r\n                <ButtonSecondary onClick={removeThisPopup}>Dismiss</ButtonSecondary>\r\n              </div>\r\n            </AutoRow>\r\n          </>\r\n        )}\r\n      </AutoColumn>\r\n    </AutoRow>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { AlertCircle, CheckCircle } from 'react-feather'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport styled, { ThemeContext } from 'styled-components'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { TYPE } from '../../theme'\r\nimport { ExternalLink } from '../../theme/components'\r\nimport { getEtherscanLink } from '../../utils'\r\nimport { AutoColumn } from '../Column'\r\nimport { AutoRow } from '../Row'\r\n\r\nconst RowNoFlex = styled(AutoRow)`\r\n  flex-wrap: nowrap;\r\n`\r\n\r\nexport default function TransactionPopup({\r\n  hash,\r\n  success,\r\n  summary,\r\n}: {\r\n  hash: string\r\n  success?: boolean\r\n  summary?: string\r\n}) {\r\n  const { chainId } = useActiveWeb3React()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const theme = useContext(ThemeContext)\r\n\r\n  return (\r\n    <RowNoFlex>\r\n      <div style={{ paddingRight: 16 }}>\r\n        {success ? <CheckCircle color={theme.green1} size={24} /> : <AlertCircle color={theme.red1} size={24} />}\r\n      </div>\r\n      <AutoColumn gap=\"8px\">\r\n        <TYPE.body fontWeight={500}>{summary ?? 'Hash: ' + hash.slice(0, 8) + '...' + hash.slice(58, 65)}</TYPE.body>\r\n        {chainId && (\r\n          <ExternalLink href={getEtherscanLink(chainId, hash, 'transaction', activeNetwork)}>\r\n            View on Etherscan\r\n          </ExternalLink>\r\n        )}\r\n      </AutoColumn>\r\n    </RowNoFlex>\r\n  )\r\n}\r\n","import React, { useCallback, useContext, useEffect } from 'react'\r\nimport { X } from 'react-feather'\r\nimport { useSpring } from 'react-spring/web'\r\nimport styled, { ThemeContext } from 'styled-components'\r\nimport { animated } from 'react-spring'\r\nimport { PopupContent } from '../../state/application/actions'\r\nimport { useRemovePopup } from '../../state/application/hooks'\r\nimport ListUpdatePopup from './ListUpdatePopup'\r\nimport TransactionPopup from './TransactionPopup'\r\n\r\nexport const StyledClose = styled(X)`\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 10px;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`\r\nexport const Popup = styled.div`\r\n  display: inline-block;\r\n  width: 100%;\r\n  padding: 1em;\r\n  background-color: ${({ theme }) => theme.bg1};\r\n  position: relative;\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  padding-right: 35px;\r\n  overflow: hidden;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    min-width: 290px;\r\n    &:not(:last-of-type) {\r\n      margin-right: 20px;\r\n    }\r\n  `}\r\n`\r\nconst Fader = styled.div`\r\n  position: absolute;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 2px;\r\n  background-color: ${({ theme }) => theme.bg3};\r\n`\r\n\r\nconst AnimatedFader = animated(Fader)\r\n\r\nexport default function PopupItem({\r\n  removeAfterMs,\r\n  content,\r\n  popKey,\r\n}: {\r\n  removeAfterMs: number | null\r\n  content: PopupContent\r\n  popKey: string\r\n}) {\r\n  const removePopup = useRemovePopup()\r\n  const removeThisPopup = useCallback(() => removePopup(popKey), [popKey, removePopup])\r\n  useEffect(() => {\r\n    if (removeAfterMs === null) return undefined\r\n\r\n    const timeout = setTimeout(() => {\r\n      removeThisPopup()\r\n    }, removeAfterMs)\r\n\r\n    return () => {\r\n      clearTimeout(timeout)\r\n    }\r\n  }, [removeAfterMs, removeThisPopup])\r\n\r\n  const theme = useContext(ThemeContext)\r\n\r\n  let popupContent\r\n  if ('txn' in content) {\r\n    const {\r\n      txn: { hash, success, summary },\r\n    } = content\r\n    popupContent = <TransactionPopup hash={hash} success={success} summary={summary} />\r\n  } else if ('listUpdate' in content) {\r\n    const {\r\n      listUpdate: { listUrl, oldList, newList, auto },\r\n    } = content\r\n    popupContent = <ListUpdatePopup popKey={popKey} listUrl={listUrl} oldList={oldList} newList={newList} auto={auto} />\r\n  }\r\n\r\n  const faderStyle = useSpring({\r\n    from: { width: '100%' },\r\n    to: { width: '0%' },\r\n    config: { duration: removeAfterMs ?? undefined },\r\n  })\r\n\r\n  return (\r\n    <Popup>\r\n      <StyledClose color={theme.text2} onClick={removeThisPopup} />\r\n      {popupContent}\r\n      {removeAfterMs !== null ? <AnimatedFader style={faderStyle} /> : null}\r\n    </Popup>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useActivePopups } from '../../state/application/hooks'\r\nimport { AutoColumn } from '../Column'\r\nimport PopupItem from './PopupItem'\r\nimport { useURLWarningVisible } from '../../state/user/hooks'\r\n\r\nconst MobilePopupWrapper = styled.div<{ height: string | number }>`\r\n  position: relative;\r\n  max-width: 100%;\r\n  height: ${({ height }) => height};\r\n  margin: ${({ height }) => (height ? '0 auto;' : 0)};\r\n  margin-bottom: ${({ height }) => (height ? '20px' : 0)}};\r\n\r\n  display: none;\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    display: block;\r\n  `};\r\n`\r\n\r\nconst MobilePopupInner = styled.div`\r\n  height: 99%;\r\n  overflow-x: auto;\r\n  overflow-y: hidden;\r\n  display: flex;\r\n  flex-direction: row;\r\n  -webkit-overflow-scrolling: touch;\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst FixedPopupColumn = styled(AutoColumn)<{ extraPadding: boolean }>`\r\n  position: fixed;\r\n  top: ${({ extraPadding }) => (extraPadding ? '108px' : '88px')};\r\n  right: 1rem;\r\n  max-width: 355px !important;\r\n  width: 100%;\r\n  z-index: 3;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    display: none;\r\n  `};\r\n`\r\n\r\nexport default function Popups() {\r\n  // get all popups\r\n  const activePopups = useActivePopups()\r\n\r\n  const urlWarningActive = useURLWarningVisible()\r\n\r\n  return (\r\n    <>\r\n      <FixedPopupColumn gap=\"20px\" extraPadding={urlWarningActive}>\r\n        {activePopups.map((item) => (\r\n          <PopupItem key={item.key} content={item.content} popKey={item.key} removeAfterMs={item.removeAfterMs} />\r\n        ))}\r\n      </FixedPopupColumn>\r\n      <MobilePopupWrapper height={activePopups?.length > 0 ? 'fit-content' : 0}>\r\n        <MobilePopupInner>\r\n          {activePopups // reverse so new items up front\r\n            .slice(0)\r\n            .reverse()\r\n            .map((item) => (\r\n              <PopupItem key={item.key} content={item.content} popKey={item.key} removeAfterMs={item.removeAfterMs} />\r\n            ))}\r\n        </MobilePopupInner>\r\n      </MobilePopupWrapper>\r\n    </>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { parse } from 'qs'\r\nimport { AppDispatch } from '../state'\r\nimport { updateUserDarkMode } from '../state/user/actions'\r\n\r\nexport default function DarkModeQueryParamReader({ location: { search } }: RouteComponentProps): null {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n\r\n  useEffect(() => {\r\n    if (!search) return\r\n    if (search.length < 2) return\r\n\r\n    const parsed = parse(search, {\r\n      parseArrays: false,\r\n      ignoreQueryPrefix: true,\r\n    })\r\n\r\n    const theme = parsed.theme\r\n\r\n    if (typeof theme !== 'string') return\r\n\r\n    if (theme.toLowerCase() === 'light') {\r\n      dispatch(updateUserDarkMode({ userDarkMode: false }))\r\n    } else if (theme.toLowerCase() === 'dark') {\r\n      dispatch(updateUserDarkMode({ userDarkMode: true }))\r\n    }\r\n  }, [dispatch, search])\r\n\r\n  return null\r\n}\r\n","import React, { Dispatch, SetStateAction, ReactNode } from 'react'\r\nimport { ResponsiveContainer, XAxis, Tooltip, AreaChart, Area } from 'recharts'\r\nimport styled from 'styled-components'\r\nimport Card from 'components/Card'\r\nimport { RowBetween } from 'components/Row'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { darken } from 'polished'\r\ndayjs.extend(utc)\r\n\r\nconst DEFAULT_HEIGHT = 300\r\n\r\nconst Wrapper = styled(Card)`\r\n  width: 100%;\r\n  height: ${DEFAULT_HEIGHT}px;\r\n  padding: 1rem;\r\n  padding-right: 2rem;\r\n  display: flex;\r\n  background-color: ${({ theme }) => theme.bg0}\r\n  flex-direction: column;\r\n  > * {\r\n    font-size: 1rem;\r\n  }\r\n`\r\n\r\nexport type LineChartProps = {\r\n  data: any[]\r\n  color?: string | undefined\r\n  height?: number | undefined\r\n  minHeight?: number\r\n  setValue?: Dispatch<SetStateAction<number | undefined>> // used for value on hover\r\n  setLabel?: Dispatch<SetStateAction<string | undefined>> // used for label of valye\r\n  value?: number\r\n  label?: string\r\n  topLeft?: ReactNode | undefined\r\n  topRight?: ReactNode | undefined\r\n  bottomLeft?: ReactNode | undefined\r\n  bottomRight?: ReactNode | undefined\r\n} & React.HTMLAttributes<HTMLDivElement>\r\n\r\nconst Chart = ({\r\n  data,\r\n  color = '#56B2A4',\r\n  value,\r\n  label,\r\n  setValue,\r\n  setLabel,\r\n  topLeft,\r\n  topRight,\r\n  bottomLeft,\r\n  bottomRight,\r\n  minHeight = DEFAULT_HEIGHT,\r\n  ...rest\r\n}: LineChartProps) => {\r\n  const theme = useTheme()\r\n  const parsedValue = value\r\n\r\n  return (\r\n    <Wrapper minHeight={minHeight} {...rest}>\r\n      <RowBetween>\r\n        {topLeft ?? null}\r\n        {topRight ?? null}\r\n      </RowBetween>\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <AreaChart\r\n          width={500}\r\n          height={300}\r\n          data={data}\r\n          margin={{\r\n            top: 5,\r\n            right: 30,\r\n            left: 20,\r\n            bottom: 5,\r\n          }}\r\n          onMouseLeave={() => {\r\n            setLabel && setLabel(undefined)\r\n            setValue && setValue(undefined)\r\n          }}\r\n        >\r\n          <defs>\r\n            <linearGradient id=\"gradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"5%\" stopColor={darken(0.36, color)} stopOpacity={0.5} />\r\n              <stop offset=\"100%\" stopColor={color} stopOpacity={0} />\r\n            </linearGradient>\r\n          </defs>\r\n          <XAxis\r\n            dataKey=\"time\"\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tickFormatter={(time) => dayjs(time).format('DD')}\r\n            minTickGap={10}\r\n          />\r\n          <Tooltip\r\n            cursor={{ stroke: theme.bg2 }}\r\n            contentStyle={{ display: 'none' }}\r\n            formatter={(value: number, name: string, props: { payload: { time: string; value: number } }) => {\r\n              if (setValue && parsedValue !== props.payload.value) {\r\n                setValue(props.payload.value)\r\n              }\r\n              const formattedTime = dayjs(props.payload.time).format('MMM D, YYYY')\r\n              if (setLabel && label !== formattedTime) setLabel(formattedTime)\r\n            }}\r\n          />\r\n          <Area dataKey=\"value\" type=\"monotone\" stroke={color} fill=\"url(#gradient)\" strokeWidth={2} />\r\n        </AreaChart>\r\n      </ResponsiveContainer>\r\n      <RowBetween>\r\n        {bottomLeft ?? null}\r\n        {bottomRight ?? null}\r\n      </RowBetween>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Chart\r\n","import { ProtocolData } from './reducer'\r\nimport { createAction } from '@reduxjs/toolkit'\r\nimport { ChartDayData, Transaction } from 'types'\r\nimport { SupportedNetwork } from 'constants/networks'\r\n\r\n// protocol wide info\r\nexport const updateProtocolData = createAction<{ protocolData: ProtocolData; networkId: SupportedNetwork }>(\r\n  'protocol/updateProtocolData'\r\n)\r\nexport const updateChartData = createAction<{ chartData: ChartDayData[]; networkId: SupportedNetwork }>(\r\n  'protocol/updateChartData'\r\n)\r\nexport const updateTransactions = createAction<{ transactions: Transaction[]; networkId: SupportedNetwork }>(\r\n  'protocol/updateTransactions'\r\n)\r\n","import { updateProtocolData, updateChartData, updateTransactions } from './actions'\r\nimport { AppState, AppDispatch } from './../index'\r\nimport { ProtocolData } from './reducer'\r\nimport { useCallback } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { ChartDayData, Transaction } from 'types'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\n\r\nexport function useProtocolData(): [ProtocolData | undefined, (protocolData: ProtocolData) => void] {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const protocolData: ProtocolData | undefined = useSelector(\r\n    (state: AppState) => state.protocol[activeNetwork.id]?.data\r\n  )\r\n\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const setProtocolData: (protocolData: ProtocolData) => void = useCallback(\r\n    (protocolData: ProtocolData) => dispatch(updateProtocolData({ protocolData, networkId: activeNetwork.id })),\r\n    [activeNetwork.id, dispatch]\r\n  )\r\n  return [protocolData, setProtocolData]\r\n}\r\n\r\nexport function useProtocolChartData(): [ChartDayData[] | undefined, (chartData: ChartDayData[]) => void] {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const chartData: ChartDayData[] | undefined = useSelector(\r\n    (state: AppState) => state.protocol[activeNetwork.id]?.chartData\r\n  )\r\n\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const setChartData: (chartData: ChartDayData[]) => void = useCallback(\r\n    (chartData: ChartDayData[]) => dispatch(updateChartData({ chartData, networkId: activeNetwork.id })),\r\n    [activeNetwork.id, dispatch]\r\n  )\r\n  return [chartData, setChartData]\r\n}\r\n\r\nexport function useProtocolTransactions(): [Transaction[] | undefined, (transactions: Transaction[]) => void] {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const transactions: Transaction[] | undefined = useSelector(\r\n    (state: AppState) => state.protocol[activeNetwork.id]?.transactions\r\n  )\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const setTransactions: (transactions: Transaction[]) => void = useCallback(\r\n    (transactions: Transaction[]) => dispatch(updateTransactions({ transactions, networkId: activeNetwork.id })),\r\n    [activeNetwork.id, dispatch]\r\n  )\r\n  return [transactions, setTransactions]\r\n}\r\n","import React from 'react'\r\nimport { TYPE } from 'theme'\r\nimport styled from 'styled-components'\r\n\r\nconst Wrapper = styled(TYPE.main)<{ fontWeight: number; fontSize: string; negative: boolean; neutral: boolean }>`\r\n  font-size: ${({ fontSize }) => fontSize};\r\n  font-weight: ${({ fontWeight }) => fontWeight};\r\n  color: ${({ theme, negative }) => (negative ? theme.red1 : theme.green1)};\r\n`\r\n\r\nexport interface LogoProps {\r\n  value: number | undefined\r\n  decimals?: number\r\n  fontSize?: string\r\n  fontWeight?: number\r\n  wrap?: boolean\r\n  simple?: boolean\r\n}\r\n\r\nexport default function Percent({\r\n  value,\r\n  decimals = 2,\r\n  fontSize = '16px',\r\n  fontWeight = 500,\r\n  wrap = false,\r\n  simple = false,\r\n  ...rest\r\n}: LogoProps) {\r\n  if (value === undefined || value === null) {\r\n    return (\r\n      <TYPE.main fontWeight={fontWeight} fontSize={fontSize}>\r\n        -\r\n      </TYPE.main>\r\n    )\r\n  }\r\n\r\n  const truncated = parseFloat(value.toFixed(decimals))\r\n\r\n  if (simple) {\r\n    return (\r\n      <Wrapper {...rest} fontWeight={fontWeight} fontSize={fontSize} negative={false} neutral={true}>\r\n        {Math.abs(value).toFixed(decimals)}%\r\n      </Wrapper>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Wrapper {...rest} fontWeight={fontWeight} fontSize={fontSize} negative={truncated < 0} neutral={truncated === 0}>\r\n      {wrap && '('}\r\n      {truncated < 0 && ''}\r\n      {truncated > 0 && ''}\r\n      {Math.abs(value).toFixed(decimals)}%{wrap && ')'}\r\n    </Wrapper>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/whitev3.280959f9.svg\";","import React from 'react'\r\nimport v3 from '../../assets/images/whitev3.svg'\r\nimport styled, { keyframes, css } from 'styled-components'\r\n\r\nconst rotate = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n`\r\n\r\nconst StyledSVG = styled.svg<{ size: string; stroke?: string }>`\r\n  animation: 2s ${rotate} linear infinite;\r\n  height: ${({ size }) => size};\r\n  width: ${({ size }) => size};\r\n  path {\r\n    stroke: ${({ stroke, theme }) => stroke ?? theme.primary1};\r\n  }\r\n`\r\n\r\n/**\r\n * Takes in custom size and stroke for circle color, default to primary color as fill,\r\n * need ...rest for layered styles on top\r\n */\r\nexport default function Loader({\r\n  size = '16px',\r\n  stroke,\r\n  ...rest\r\n}: {\r\n  size?: string\r\n  stroke?: string\r\n  [k: string]: any\r\n}) {\r\n  return (\r\n    <StyledSVG viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" size={size} stroke={stroke} {...rest}>\r\n      <path\r\n        d=\"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 9.27455 20.9097 6.80375 19.1414 5\"\r\n        strokeWidth=\"2.5\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n    </StyledSVG>\r\n  )\r\n}\r\n\r\nconst pulse = keyframes`\r\n  0% { transform: scale(1); }\r\n  60% { transform: scale(1.1); }\r\n  100% { transform: scale(1); }\r\n`\r\n\r\nconst Wrapper = styled.div<{ fill: number; height?: string }>`\r\n  pointer-events: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: ${({ theme, fill }) => (fill ? 'black' : theme.bg0)};\r\n  height: 100%;\r\n  width: 100%;\r\n  ${(props) =>\r\n    props.fill && !props.height\r\n      ? css`\r\n          height: 100vh;\r\n        `\r\n      : css`\r\n          height: 180px;\r\n        `}\r\n`\r\n\r\nconst AnimatedImg = styled.div`\r\n  animation: ${pulse} 800ms linear infinite;\r\n  & > * {\r\n    width: 72px;\r\n  }\r\n`\r\n\r\nexport const LocalLoader = ({ fill }: { fill: boolean }) => {\r\n  return (\r\n    <Wrapper fill={fill ? 1 : 0}>\r\n      <AnimatedImg>\r\n        <img src={v3} alt=\"loading-icon\" />\r\n      </AnimatedImg>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst loadingAnimation = keyframes`\r\n  0% {\r\n    background-position: 100% 50%;\r\n  }\r\n  100% {\r\n    background-position: 0% 50%;\r\n  }\r\n`\r\n\r\nexport const LoadingRows = styled.div`\r\n  display: grid;\r\n  min-width: 75%;\r\n  max-width: 100%;\r\n  grid-column-gap: 0.5em;\r\n  grid-row-gap: 0.8em;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  & > div {\r\n    animation: ${loadingAnimation} 1.5s infinite;\r\n    animation-fill-mode: both;\r\n    background: linear-gradient(\r\n      to left,\r\n      ${({ theme }) => theme.bg1} 25%,\r\n      ${({ theme }) => theme.bg2} 50%,\r\n      ${({ theme }) => theme.bg1} 75%\r\n    );\r\n    background-size: 400%;\r\n    border-radius: 12px;\r\n    height: 2.4em;\r\n    will-change: background-position;\r\n  }\r\n  & > div:nth-child(4n + 1) {\r\n    grid-column: 1 / 3;\r\n  }\r\n  & > div:nth-child(4n) {\r\n    grid-column: 3 / 4;\r\n    margin-bottom: 2em;\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\nimport { TYPE } from 'theme'\r\n\r\n// responsive text\r\nexport const Label = styled(TYPE.label)<{ end?: number }>`\r\n  display: flex;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n  justify-content: ${({ end }) => (end ? 'flex-end' : 'flex-start')};\r\n  align-items: center;\r\n  font-variant-numeric: tabular-nums;\r\n  @media screen and (max-width: 640px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nexport const ClickableText = styled(Label)`\r\n  text-align: end;\r\n  &:hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n  user-select: none;\r\n  @media screen and (max-width: 640px) {\r\n    font-size: 12px;\r\n  }\r\n`\r\n","import Row from 'components/Row'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nexport const PageButtons = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 0.2em;\r\n  margin-bottom: 0.5em;\r\n`\r\n\r\nexport const Arrow = styled.div<{ faded: boolean }>`\r\n  color: ${({ theme }) => theme.primary1};\r\n  opacity: ${(props) => (props.faded ? 0.3 : 1)};\r\n  padding: 0 20px;\r\n  user-select: none;\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nexport const Break = styled.div`\r\n  height: 1px;\r\n  background-color: ${({ theme }) => theme.bg1};\r\n  width: 100%;\r\n`\r\n\r\nexport const FixedSpan = styled.span<{ width?: string | null }>`\r\n  width: ${({ width }) => width ?? ''};\r\n`\r\n\r\nexport const MonoSpace = styled.span`\r\n  font-variant-numeric: tabular-nums;\r\n`\r\n","import React, { useState, useMemo, useCallback, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ExtraSmallOnly, HideExtraSmall, TYPE } from 'theme'\r\nimport { DarkGreyCard } from 'components/Card'\r\nimport { TokenData } from '../../state/tokens/reducer'\r\nimport Loader, { LoadingRows } from 'components/Loader'\r\nimport { Link } from 'react-router-dom'\r\nimport { AutoColumn } from 'components/Column'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport { RowFixed } from 'components/Row'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport Percent from 'components/Percent'\r\nimport { Label, ClickableText } from '../Text'\r\nimport { PageButtons, Arrow, Break } from 'components/shared'\r\nimport HoverInlineText from '../HoverInlineText'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { TOKEN_HIDE } from '../../constants/index'\r\n\r\nconst Wrapper = styled(DarkGreyCard)`\r\n  width: 100%;\r\n`\r\n\r\nconst ResponsiveGrid = styled.div`\r\n  display: grid;\r\n  grid-gap: 1em;\r\n  align-items: center;\r\n\r\n  grid-template-columns: 20px 3fr repeat(4, 1fr);\r\n\r\n  @media screen and (max-width: 900px) {\r\n    grid-template-columns: 20px 1.5fr repeat(3, 1fr);\r\n    & :nth-child(4) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 800px) {\r\n    grid-template-columns: 20px 1.5fr repeat(2, 1fr);\r\n    & :nth-child(6) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 670px) {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    > *:first-child {\r\n      display: none;\r\n    }\r\n    > *:nth-child(3) {\r\n      display: none;\r\n    }\r\n  }\r\n`\r\n\r\nconst LinkWrapper = styled(Link)`\r\n  text-decoration: none;\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n`\r\n\r\nconst ResponsiveLogo = styled(CurrencyLogo)`\r\n  @media screen and (max-width: 670px) {\r\n    width: 16px;\r\n    height: 16px;\r\n  }\r\n`\r\n\r\nconst DataRow = ({ tokenData, index }: { tokenData: TokenData; index: number }) => {\r\n  const theme = useTheme()\r\n  return (\r\n    <LinkWrapper to={'tokens/' + tokenData.address}>\r\n      <ResponsiveGrid>\r\n        <Label>{index + 1}</Label>\r\n        <Label>\r\n          <RowFixed>\r\n            <ResponsiveLogo address={tokenData.address} />\r\n          </RowFixed>\r\n          <ExtraSmallOnly style={{ marginLeft: '6px' }}>\r\n            <Label ml=\"8px\">{tokenData.symbol}</Label>\r\n          </ExtraSmallOnly>\r\n          <HideExtraSmall style={{ marginLeft: '10px' }}>\r\n            <RowFixed>\r\n              <HoverInlineText text={tokenData.name} />\r\n              <Label ml=\"8px\" color={theme.text3}>\r\n                ({tokenData.symbol})\r\n              </Label>\r\n            </RowFixed>\r\n          </HideExtraSmall>\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          {formatDollarAmount(tokenData.priceUSD)}\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          <Percent value={tokenData.priceUSDChange} fontWeight={400} />\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          {formatDollarAmount(tokenData.volumeUSD)}\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          {formatDollarAmount(tokenData.tvlUSD)}\r\n        </Label>\r\n      </ResponsiveGrid>\r\n    </LinkWrapper>\r\n  )\r\n}\r\n\r\nconst SORT_FIELD = {\r\n  name: 'name',\r\n  volumeUSD: 'volumeUSD',\r\n  tvlUSD: 'tvlUSD',\r\n  priceUSD: 'priceUSD',\r\n  priceUSDChange: 'priceUSDChange',\r\n  priceUSDChangeWeek: 'priceUSDChangeWeek',\r\n}\r\n\r\nconst MAX_ITEMS = 10\r\n\r\nexport default function TokenTable({\r\n  tokenDatas,\r\n  maxItems = MAX_ITEMS,\r\n}: {\r\n  tokenDatas: TokenData[] | undefined\r\n  maxItems?: number\r\n}) {\r\n  // theming\r\n  const theme = useTheme()\r\n\r\n  // for sorting\r\n  const [sortField, setSortField] = useState(SORT_FIELD.tvlUSD)\r\n  const [sortDirection, setSortDirection] = useState<boolean>(true)\r\n\r\n  // pagination\r\n  const [page, setPage] = useState(1)\r\n  const [maxPage, setMaxPage] = useState(1)\r\n  useEffect(() => {\r\n    let extraPages = 1\r\n    if (tokenDatas) {\r\n      if (tokenDatas.length % maxItems === 0) {\r\n        extraPages = 0\r\n      }\r\n      setMaxPage(Math.floor(tokenDatas.length / maxItems) + extraPages)\r\n    }\r\n  }, [maxItems, tokenDatas])\r\n\r\n  const sortedTokens = useMemo(() => {\r\n    return tokenDatas\r\n      ? tokenDatas\r\n          .filter((x) => !!x && !TOKEN_HIDE.includes(x.address))\r\n          .sort((a, b) => {\r\n            if (a && b) {\r\n              return a[sortField as keyof TokenData] > b[sortField as keyof TokenData]\r\n                ? (sortDirection ? -1 : 1) * 1\r\n                : (sortDirection ? -1 : 1) * -1\r\n            } else {\r\n              return -1\r\n            }\r\n          })\r\n          .slice(maxItems * (page - 1), page * maxItems)\r\n      : []\r\n  }, [tokenDatas, maxItems, page, sortDirection, sortField])\r\n\r\n  const handleSort = useCallback(\r\n    (newField: string) => {\r\n      setSortField(newField)\r\n      setSortDirection(sortField !== newField ? true : !sortDirection)\r\n    },\r\n    [sortDirection, sortField]\r\n  )\r\n\r\n  const arrow = useCallback(\r\n    (field: string) => {\r\n      return sortField === field ? (!sortDirection ? '' : '') : ''\r\n    },\r\n    [sortDirection, sortField]\r\n  )\r\n\r\n  if (!tokenDatas) {\r\n    return <Loader />\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      {sortedTokens.length > 0 ? (\r\n        <AutoColumn gap=\"16px\">\r\n          <ResponsiveGrid>\r\n            <Label color={theme.text2}>#</Label>\r\n            <ClickableText color={theme.text2} onClick={() => handleSort(SORT_FIELD.name)}>\r\n              Name {arrow(SORT_FIELD.name)}\r\n            </ClickableText>\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.priceUSD)}>\r\n              Price {arrow(SORT_FIELD.priceUSD)}\r\n            </ClickableText>\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.priceUSDChange)}>\r\n              Price Change {arrow(SORT_FIELD.priceUSDChange)}\r\n            </ClickableText>\r\n            {/* <ClickableText end={1} onClick={() => handleSort(SORT_FIELD.priceUSDChangeWeek)}>\r\n            7d {arrow(SORT_FIELD.priceUSDChangeWeek)}\r\n          </ClickableText> */}\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.volumeUSD)}>\r\n              Volume 24H {arrow(SORT_FIELD.volumeUSD)}\r\n            </ClickableText>\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.tvlUSD)}>\r\n              TVL {arrow(SORT_FIELD.tvlUSD)}\r\n            </ClickableText>\r\n          </ResponsiveGrid>\r\n\r\n          <Break />\r\n          {sortedTokens.map((data, i) => {\r\n            if (data) {\r\n              return (\r\n                <React.Fragment key={i}>\r\n                  <DataRow index={(page - 1) * MAX_ITEMS + i} tokenData={data} />\r\n                  <Break />\r\n                </React.Fragment>\r\n              )\r\n            }\r\n            return null\r\n          })}\r\n          <PageButtons>\r\n            <div\r\n              onClick={() => {\r\n                setPage(page === 1 ? page : page - 1)\r\n              }}\r\n            >\r\n              <Arrow faded={page === 1 ? true : false}></Arrow>\r\n            </div>\r\n            <TYPE.body>{'Page ' + page + ' of ' + maxPage}</TYPE.body>\r\n            <div\r\n              onClick={() => {\r\n                setPage(page === maxPage ? page : page + 1)\r\n              }}\r\n            >\r\n              <Arrow faded={page === maxPage ? true : false}></Arrow>\r\n            </div>\r\n          </PageButtons>\r\n        </AutoColumn>\r\n      ) : (\r\n        <LoadingRows>\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n        </LoadingRows>\r\n      )}\r\n    </Wrapper>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useMemo, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { TYPE } from 'theme'\r\nimport { DarkGreyCard, GreyBadge } from 'components/Card'\r\nimport Loader, { LoadingRows } from 'components/Loader'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { RowFixed } from 'components/Row'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport { PoolData } from 'state/pools/reducer'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport { feeTierPercent } from 'utils'\r\nimport { Label, ClickableText } from 'components/Text'\r\nimport { PageButtons, Arrow, Break } from 'components/shared'\r\nimport { POOL_HIDE } from '../../constants/index'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { networkPrefix } from 'utils/networkPrefix'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\n\r\nconst Wrapper = styled(DarkGreyCard)`\r\n  width: 100%;\r\n`\r\n\r\nconst ResponsiveGrid = styled.div`\r\n  display: grid;\r\n  grid-gap: 1em;\r\n  align-items: center;\r\n\r\n  grid-template-columns: 20px 3.5fr repeat(3, 1fr);\r\n\r\n  @media screen and (max-width: 900px) {\r\n    grid-template-columns: 20px 1.5fr repeat(2, 1fr);\r\n    & :nth-child(3) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 500px) {\r\n    grid-template-columns: 20px 1.5fr repeat(1, 1fr);\r\n    & :nth-child(5) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 480px) {\r\n    grid-template-columns: 2.5fr repeat(1, 1fr);\r\n    > *:nth-child(1) {\r\n      display: none;\r\n    }\r\n  }\r\n`\r\n\r\nconst LinkWrapper = styled(Link)`\r\n  text-decoration: none;\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n`\r\n\r\nconst SORT_FIELD = {\r\n  feeTier: 'feeTier',\r\n  volumeUSD: 'volumeUSD',\r\n  tvlUSD: 'tvlUSD',\r\n  volumeUSDWeek: 'volumeUSDWeek',\r\n}\r\n\r\nconst DataRow = ({ poolData, index }: { poolData: PoolData; index: number }) => {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  return (\r\n    <LinkWrapper to={networkPrefix(activeNetwork) + 'pools/' + poolData.address}>\r\n      <ResponsiveGrid>\r\n        <Label fontWeight={400}>{index + 1}</Label>\r\n        <Label fontWeight={400}>\r\n          <RowFixed>\r\n            <DoubleCurrencyLogo address0={poolData.token0.address} address1={poolData.token1.address} />\r\n            <TYPE.label ml=\"8px\">\r\n              {poolData.token0.symbol}/{poolData.token1.symbol}\r\n            </TYPE.label>\r\n            <GreyBadge ml=\"10px\" fontSize=\"14px\">\r\n              {feeTierPercent(poolData.feeTier)}\r\n            </GreyBadge>\r\n          </RowFixed>\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          {formatDollarAmount(poolData.tvlUSD)}\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          {formatDollarAmount(poolData.volumeUSD)}\r\n        </Label>\r\n        <Label end={1} fontWeight={400}>\r\n          {formatDollarAmount(poolData.volumeUSDWeek)}\r\n        </Label>\r\n      </ResponsiveGrid>\r\n    </LinkWrapper>\r\n  )\r\n}\r\n\r\nconst MAX_ITEMS = 10\r\n\r\nexport default function PoolTable({ poolDatas, maxItems = MAX_ITEMS }: { poolDatas: PoolData[]; maxItems?: number }) {\r\n  // theming\r\n  const theme = useTheme()\r\n\r\n  // for sorting\r\n  const [sortField, setSortField] = useState(SORT_FIELD.tvlUSD)\r\n  const [sortDirection, setSortDirection] = useState<boolean>(true)\r\n\r\n  // pagination\r\n  const [page, setPage] = useState(1)\r\n  const [maxPage, setMaxPage] = useState(1)\r\n  useEffect(() => {\r\n    let extraPages = 1\r\n    if (poolDatas.length % maxItems === 0) {\r\n      extraPages = 0\r\n    }\r\n    setMaxPage(Math.floor(poolDatas.length / maxItems) + extraPages)\r\n  }, [maxItems, poolDatas])\r\n\r\n  const sortedPools = useMemo(() => {\r\n    return poolDatas\r\n      ? poolDatas\r\n          .filter((x) => !!x && !POOL_HIDE.includes(x.address))\r\n          .sort((a, b) => {\r\n            if (a && b) {\r\n              return a[sortField as keyof PoolData] > b[sortField as keyof PoolData]\r\n                ? (sortDirection ? -1 : 1) * 1\r\n                : (sortDirection ? -1 : 1) * -1\r\n            } else {\r\n              return -1\r\n            }\r\n          })\r\n          .slice(maxItems * (page - 1), page * maxItems)\r\n      : []\r\n  }, [maxItems, page, poolDatas, sortDirection, sortField])\r\n\r\n  const handleSort = useCallback(\r\n    (newField: string) => {\r\n      setSortField(newField)\r\n      setSortDirection(sortField !== newField ? true : !sortDirection)\r\n    },\r\n    [sortDirection, sortField]\r\n  )\r\n\r\n  const arrow = useCallback(\r\n    (field: string) => {\r\n      return sortField === field ? (!sortDirection ? '' : '') : ''\r\n    },\r\n    [sortDirection, sortField]\r\n  )\r\n\r\n  if (!poolDatas) {\r\n    return <Loader />\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      {sortedPools.length > 0 ? (\r\n        <AutoColumn gap=\"16px\">\r\n          <ResponsiveGrid>\r\n            <Label color={theme.text2}>#</Label>\r\n            <ClickableText color={theme.text2} onClick={() => handleSort(SORT_FIELD.feeTier)}>\r\n              Pool {arrow(SORT_FIELD.feeTier)}\r\n            </ClickableText>\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.tvlUSD)}>\r\n              TVL {arrow(SORT_FIELD.tvlUSD)}\r\n            </ClickableText>\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.volumeUSD)}>\r\n              Volume 24H {arrow(SORT_FIELD.volumeUSD)}\r\n            </ClickableText>\r\n            <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.volumeUSDWeek)}>\r\n              Volume 7D {arrow(SORT_FIELD.volumeUSDWeek)}\r\n            </ClickableText>\r\n          </ResponsiveGrid>\r\n          <Break />\r\n          {sortedPools.map((poolData, i) => {\r\n            if (poolData) {\r\n              return (\r\n                <React.Fragment key={i}>\r\n                  <DataRow index={(page - 1) * MAX_ITEMS + i} poolData={poolData} />\r\n                  <Break />\r\n                </React.Fragment>\r\n              )\r\n            }\r\n            return null\r\n          })}\r\n          <PageButtons>\r\n            <div\r\n              onClick={() => {\r\n                setPage(page === 1 ? page : page - 1)\r\n              }}\r\n            >\r\n              <Arrow faded={page === 1 ? true : false}></Arrow>\r\n            </div>\r\n            <TYPE.body>{'Page ' + page + ' of ' + maxPage}</TYPE.body>\r\n            <div\r\n              onClick={() => {\r\n                setPage(page === maxPage ? page : page + 1)\r\n              }}\r\n            >\r\n              <Arrow faded={page === maxPage ? true : false}></Arrow>\r\n            </div>\r\n          </PageButtons>\r\n        </AutoColumn>\r\n      ) : (\r\n        <LoadingRows>\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n          <div />\r\n        </LoadingRows>\r\n      )}\r\n    </Wrapper>\r\n  )\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const PageWrapper = styled.div`\r\n  width: 90%;\r\n`\r\n\r\nexport const ThemedBackground = styled.div<{ backgroundColor: string }>`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  pointer-events: none;\r\n  max-width: 100vw !important;\r\n  height: 200vh;\r\n  mix-blend-mode: color;\r\n  background: ${({ backgroundColor }) =>\r\n    `radial-gradient(50% 50% at 50% 50%, ${backgroundColor} 0%, rgba(255, 255, 255, 0) 100%)`};\r\n  transform: translateY(-176vh);\r\n`\r\n\r\nexport const ThemedBackgroundGlobal = styled.div<{ backgroundColor: string }>`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  pointer-events: none;\r\n  max-width: 100vw !important;\r\n  height: 200vh;\r\n  mix-blend-mode: color;\r\n  background: ${({ backgroundColor }) =>\r\n    `radial-gradient(50% 50% at 50% 50%, ${backgroundColor} 0%, rgba(255, 255, 255, 0) 100%)`};\r\n  transform: translateY(-150vh);\r\n`\r\n","import dayjs from 'dayjs'\r\n\r\nexport function unixToDate(unix: number, format = 'YYYY-MM-DD'): string {\r\n  return dayjs.unix(unix).utc().format(format)\r\n}\r\n\r\nexport const formatTime = (unix: string, buffer?: number) => {\r\n  const now = dayjs()\r\n  const timestamp = dayjs.unix(parseInt(unix)).add(buffer ?? 0, 'minute')\r\n\r\n  const inSeconds = now.diff(timestamp, 'second')\r\n  const inMinutes = now.diff(timestamp, 'minute')\r\n  const inHours = now.diff(timestamp, 'hour')\r\n  const inDays = now.diff(timestamp, 'day')\r\n\r\n  if (inMinutes < 1) {\r\n    return 'recently'\r\n  }\r\n\r\n  if (inHours >= 24) {\r\n    return `${inDays} ${inDays === 1 ? 'day' : 'days'} ago`\r\n  } else if (inMinutes >= 60) {\r\n    return `${inHours} ${inHours === 1 ? 'hour' : 'hours'} ago`\r\n  } else if (inSeconds >= 60) {\r\n    return `${inMinutes} ${inMinutes === 1 ? 'minute' : 'minutes'} ago`\r\n  } else {\r\n    return `${inSeconds} ${inSeconds === 1 ? 'second' : 'seconds'} ago`\r\n  }\r\n}\r\n","import React, { Dispatch, SetStateAction, ReactNode } from 'react'\r\nimport { BarChart, ResponsiveContainer, XAxis, Tooltip, Bar } from 'recharts'\r\nimport styled from 'styled-components'\r\nimport Card from 'components/Card'\r\nimport { RowBetween } from 'components/Row'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { VolumeWindow } from 'types'\r\ndayjs.extend(utc)\r\n\r\nconst DEFAULT_HEIGHT = 300\r\n\r\nconst Wrapper = styled(Card)`\r\n  width: 100%;\r\n  height: ${DEFAULT_HEIGHT}px;\r\n  padding: 1rem;\r\n  padding-right: 2rem;\r\n  display: flex;\r\n  background-color: ${({ theme }) => theme.bg0};\r\n  flex-direction: column;\r\n  > * {\r\n    font-size: 1rem;\r\n  }\r\n`\r\n\r\nexport type LineChartProps = {\r\n  data: any[]\r\n  color?: string | undefined\r\n  height?: number | undefined\r\n  minHeight?: number\r\n  setValue?: Dispatch<SetStateAction<number | undefined>> // used for value on hover\r\n  setLabel?: Dispatch<SetStateAction<string | undefined>> // used for label of valye\r\n  value?: number\r\n  label?: string\r\n  activeWindow?: VolumeWindow\r\n  topLeft?: ReactNode | undefined\r\n  topRight?: ReactNode | undefined\r\n  bottomLeft?: ReactNode | undefined\r\n  bottomRight?: ReactNode | undefined\r\n} & React.HTMLAttributes<HTMLDivElement>\r\n\r\nconst CustomBar = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  fill,\r\n}: {\r\n  x: number\r\n  y: number\r\n  width: number\r\n  height: number\r\n  fill: string\r\n}) => {\r\n  return (\r\n    <g>\r\n      <rect x={x} y={y} fill={fill} width={width} height={height} rx=\"2\" />\r\n    </g>\r\n  )\r\n}\r\n\r\nconst Chart = ({\r\n  data,\r\n  color = '#56B2A4',\r\n  setValue,\r\n  setLabel,\r\n  value,\r\n  label,\r\n  activeWindow,\r\n  topLeft,\r\n  topRight,\r\n  bottomLeft,\r\n  bottomRight,\r\n  minHeight = DEFAULT_HEIGHT,\r\n  ...rest\r\n}: LineChartProps) => {\r\n  const theme = useTheme()\r\n  const parsedValue = value\r\n\r\n  const now = dayjs()\r\n\r\n  return (\r\n    <Wrapper minHeight={minHeight} {...rest}>\r\n      <RowBetween style={{ alignItems: 'flex-start' }}>\r\n        {topLeft ?? null}\r\n        {topRight ?? null}\r\n      </RowBetween>\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <BarChart\r\n          width={500}\r\n          height={300}\r\n          data={data}\r\n          margin={{\r\n            top: 5,\r\n            right: 30,\r\n            left: 20,\r\n            bottom: 5,\r\n          }}\r\n          onMouseLeave={() => {\r\n            setLabel && setLabel(undefined)\r\n            setValue && setValue(undefined)\r\n          }}\r\n        >\r\n          <XAxis\r\n            dataKey=\"time\"\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tickFormatter={(time) => dayjs(time).format(activeWindow === VolumeWindow.monthly ? 'MMM' : 'DD')}\r\n            minTickGap={10}\r\n          />\r\n          <Tooltip\r\n            cursor={{ fill: theme.bg2 }}\r\n            contentStyle={{ display: 'none' }}\r\n            formatter={(value: number, name: string, props: { payload: { time: string; value: number } }) => {\r\n              if (setValue && parsedValue !== props.payload.value) {\r\n                setValue(props.payload.value)\r\n              }\r\n              const formattedTime = dayjs(props.payload.time).format('MMM D')\r\n              const formattedTimeDaily = dayjs(props.payload.time).format('MMM D YYYY')\r\n              const formattedTimePlusWeek = dayjs(props.payload.time).add(1, 'week')\r\n              const formattedTimePlusMonth = dayjs(props.payload.time).add(1, 'month')\r\n\r\n              if (setLabel && label !== formattedTime) {\r\n                if (activeWindow === VolumeWindow.weekly) {\r\n                  const isCurrent = formattedTimePlusWeek.isAfter(now)\r\n                  setLabel(formattedTime + '-' + (isCurrent ? 'current' : formattedTimePlusWeek.format('MMM D, YYYY')))\r\n                } else if (activeWindow === VolumeWindow.monthly) {\r\n                  const isCurrent = formattedTimePlusMonth.isAfter(now)\r\n                  setLabel(formattedTime + '-' + (isCurrent ? 'current' : formattedTimePlusMonth.format('MMM D, YYYY')))\r\n                } else {\r\n                  setLabel(formattedTimeDaily)\r\n                }\r\n              }\r\n            }}\r\n          />\r\n          <Bar\r\n            dataKey=\"value\"\r\n            fill={color}\r\n            shape={(props) => {\r\n              return <CustomBar height={props.height} width={props.width} x={props.x} y={props.y} fill={color} />\r\n            }}\r\n          />\r\n        </BarChart>\r\n      </ResponsiveContainer>\r\n      <RowBetween>\r\n        {bottomLeft ?? null}\r\n        {bottomRight ?? null}\r\n      </RowBetween>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Chart\r\n","import React, { useCallback, useState, useMemo, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { DarkGreyCard } from 'components/Card'\r\nimport Loader from 'components/Loader'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { formatDollarAmount, formatAmount } from 'utils/numbers'\r\nimport { shortenAddress, getEtherscanLink } from 'utils'\r\nimport { Label, ClickableText } from 'components/Text'\r\nimport { Transaction, TransactionType } from 'types'\r\nimport { formatTime } from 'utils/date'\r\nimport { RowFixed } from 'components/Row'\r\nimport { ExternalLink, TYPE } from 'theme'\r\nimport { PageButtons, Arrow, Break } from 'components/shared'\r\nimport useTheme from 'hooks/useTheme'\r\nimport HoverInlineText from 'components/HoverInlineText'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { OptimismNetworkInfo } from 'constants/networks'\r\n\r\nconst Wrapper = styled(DarkGreyCard)`\r\n  width: 100%;\r\n`\r\n\r\nconst ResponsiveGrid = styled.div`\r\n  display: grid;\r\n  grid-gap: 1em;\r\n  align-items: center;\r\n\r\n  grid-template-columns: 1.5fr repeat(5, 1fr);\r\n\r\n  @media screen and (max-width: 940px) {\r\n    grid-template-columns: 1.5fr repeat(4, 1fr);\r\n    & > *:nth-child(5) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 800px) {\r\n    grid-template-columns: 1.5fr repeat(2, 1fr);\r\n    & > *:nth-child(5) {\r\n      display: none;\r\n    }\r\n    & > *:nth-child(3) {\r\n      display: none;\r\n    }\r\n    & > *:nth-child(4) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 500px) {\r\n    grid-template-columns: 1.5fr repeat(1, 1fr);\r\n    & > *:nth-child(5) {\r\n      display: none;\r\n    }\r\n    & > *:nth-child(3) {\r\n      display: none;\r\n    }\r\n    & > *:nth-child(4) {\r\n      display: none;\r\n    }\r\n    & > *:nth-child(2) {\r\n      display: none;\r\n    }\r\n  }\r\n`\r\n\r\nconst SortText = styled.button<{ active: boolean }>`\r\n  cursor: pointer;\r\n  font-weight: ${({ active }) => (active ? 500 : 400)};\r\n  margin-right: 0.75rem !important;\r\n  border: none;\r\n  background-color: transparent;\r\n  font-size: 1rem;\r\n  padding: 0px;\r\n  color: ${({ active, theme }) => (active ? theme.text1 : theme.text3)};\r\n  outline: none;\r\n  @media screen and (max-width: 600px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nconst SORT_FIELD = {\r\n  amountUSD: 'amountUSD',\r\n  timestamp: 'timestamp',\r\n  sender: 'sender',\r\n  amountToken0: 'amountToken0',\r\n  amountToken1: 'amountToken1',\r\n}\r\n\r\nconst DataRow = ({ transaction, color }: { transaction: Transaction; color?: string }) => {\r\n  const abs0 = Math.abs(transaction.amountToken0)\r\n  const abs1 = Math.abs(transaction.amountToken1)\r\n  const outputTokenSymbol = transaction.amountToken0 < 0 ? transaction.token0Symbol : transaction.token1Symbol\r\n  const inputTokenSymbol = transaction.amountToken1 < 0 ? transaction.token0Symbol : transaction.token1Symbol\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const theme = useTheme()\r\n\r\n  return (\r\n    <ResponsiveGrid>\r\n      <ExternalLink href={getEtherscanLink(1, transaction.hash, 'transaction', activeNetwork)}>\r\n        <Label color={color ?? theme.blue1} fontWeight={400}>\r\n          {transaction.type === TransactionType.MINT\r\n            ? `Add ${transaction.token0Symbol} and ${transaction.token1Symbol}`\r\n            : transaction.type === TransactionType.SWAP\r\n            ? `Swap ${inputTokenSymbol} for ${outputTokenSymbol}`\r\n            : `Remove ${transaction.token0Symbol} and ${transaction.token1Symbol}`}\r\n        </Label>\r\n      </ExternalLink>\r\n      <Label end={1} fontWeight={400}>\r\n        {formatDollarAmount(transaction.amountUSD)}\r\n      </Label>\r\n      <Label end={1} fontWeight={400}>\r\n        <HoverInlineText text={`${formatAmount(abs0)}  ${transaction.token0Symbol}`} maxCharacters={16} />\r\n      </Label>\r\n      <Label end={1} fontWeight={400}>\r\n        <HoverInlineText text={`${formatAmount(abs1)}  ${transaction.token1Symbol}`} maxCharacters={16} />\r\n      </Label>\r\n      <Label end={1} fontWeight={400}>\r\n        <ExternalLink\r\n          href={getEtherscanLink(1, transaction.sender, 'address', activeNetwork)}\r\n          style={{ color: color ?? theme.blue1 }}\r\n        >\r\n          {shortenAddress(transaction.sender)}\r\n        </ExternalLink>\r\n      </Label>\r\n      <Label end={1} fontWeight={400}>\r\n        {formatTime(transaction.timestamp, activeNetwork === OptimismNetworkInfo ? 8 : 0)}\r\n      </Label>\r\n    </ResponsiveGrid>\r\n  )\r\n}\r\n\r\nexport default function TransactionTable({\r\n  transactions,\r\n  maxItems = 10,\r\n  color,\r\n}: {\r\n  transactions: Transaction[]\r\n  maxItems?: number\r\n  color?: string\r\n}) {\r\n  // theming\r\n  const theme = useTheme()\r\n\r\n  // for sorting\r\n  const [sortField, setSortField] = useState(SORT_FIELD.timestamp)\r\n  const [sortDirection, setSortDirection] = useState<boolean>(true)\r\n\r\n  // pagination\r\n  const [page, setPage] = useState(1)\r\n  const [maxPage, setMaxPage] = useState(1)\r\n\r\n  useEffect(() => {\r\n    let extraPages = 1\r\n    if (transactions.length % maxItems === 0) {\r\n      extraPages = 0\r\n    }\r\n    setMaxPage(Math.floor(transactions.length / maxItems) + extraPages)\r\n  }, [maxItems, transactions])\r\n\r\n  // filter on txn type\r\n  const [txFilter, setTxFilter] = useState<TransactionType | undefined>(undefined)\r\n\r\n  const sortedTransactions = useMemo(() => {\r\n    return transactions\r\n      ? transactions\r\n          .slice()\r\n          .sort((a, b) => {\r\n            if (a && b) {\r\n              return a[sortField as keyof Transaction] > b[sortField as keyof Transaction]\r\n                ? (sortDirection ? -1 : 1) * 1\r\n                : (sortDirection ? -1 : 1) * -1\r\n            } else {\r\n              return -1\r\n            }\r\n          })\r\n          .filter((x) => {\r\n            return txFilter === undefined || x.type === txFilter\r\n          })\r\n          .slice(maxItems * (page - 1), page * maxItems)\r\n      : []\r\n  }, [transactions, maxItems, page, sortField, sortDirection, txFilter])\r\n\r\n  const handleSort = useCallback(\r\n    (newField: string) => {\r\n      setSortField(newField)\r\n      setSortDirection(sortField !== newField ? true : !sortDirection)\r\n    },\r\n    [sortDirection, sortField]\r\n  )\r\n\r\n  const arrow = useCallback(\r\n    (field: string) => {\r\n      return sortField === field ? (!sortDirection ? '' : '') : ''\r\n    },\r\n    [sortDirection, sortField]\r\n  )\r\n\r\n  if (!transactions) {\r\n    return <Loader />\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <AutoColumn gap=\"16px\">\r\n        <ResponsiveGrid>\r\n          <RowFixed>\r\n            <SortText\r\n              onClick={() => {\r\n                setTxFilter(undefined)\r\n              }}\r\n              active={txFilter === undefined}\r\n            >\r\n              All\r\n            </SortText>\r\n            <SortText\r\n              onClick={() => {\r\n                setTxFilter(TransactionType.SWAP)\r\n              }}\r\n              active={txFilter === TransactionType.SWAP}\r\n            >\r\n              Swaps\r\n            </SortText>\r\n            <SortText\r\n              onClick={() => {\r\n                setTxFilter(TransactionType.MINT)\r\n              }}\r\n              active={txFilter === TransactionType.MINT}\r\n            >\r\n              Adds\r\n            </SortText>\r\n            <SortText\r\n              onClick={() => {\r\n                setTxFilter(TransactionType.BURN)\r\n              }}\r\n              active={txFilter === TransactionType.BURN}\r\n            >\r\n              Removes\r\n            </SortText>\r\n          </RowFixed>\r\n          <ClickableText color={theme.text2} onClick={() => handleSort(SORT_FIELD.amountUSD)} end={1}>\r\n            Total Value {arrow(SORT_FIELD.amountUSD)}\r\n          </ClickableText>\r\n          <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.amountToken0)}>\r\n            Token Amount {arrow(SORT_FIELD.amountToken0)}\r\n          </ClickableText>\r\n          <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.amountToken1)}>\r\n            Token Amount {arrow(SORT_FIELD.amountToken1)}\r\n          </ClickableText>\r\n          <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.sender)}>\r\n            Account {arrow(SORT_FIELD.sender)}\r\n          </ClickableText>\r\n          <ClickableText color={theme.text2} end={1} onClick={() => handleSort(SORT_FIELD.timestamp)}>\r\n            Time {arrow(SORT_FIELD.timestamp)}\r\n          </ClickableText>\r\n        </ResponsiveGrid>\r\n        <Break />\r\n\r\n        {sortedTransactions.map((t, i) => {\r\n          if (t) {\r\n            return (\r\n              <React.Fragment key={i}>\r\n                <DataRow transaction={t} color={color} />\r\n                <Break />\r\n              </React.Fragment>\r\n            )\r\n          }\r\n          return null\r\n        })}\r\n        {sortedTransactions.length === 0 ? <TYPE.main>No Transactions</TYPE.main> : undefined}\r\n        <PageButtons>\r\n          <div\r\n            onClick={() => {\r\n              setPage(page === 1 ? page : page - 1)\r\n            }}\r\n          >\r\n            <Arrow faded={page === 1 ? true : false}></Arrow>\r\n          </div>\r\n          <TYPE.body>{'Page ' + page + ' of ' + maxPage}</TYPE.body>\r\n          <div\r\n            onClick={() => {\r\n              setPage(page === maxPage ? page : page + 1)\r\n            }}\r\n          >\r\n            <Arrow faded={page === maxPage ? true : false}></Arrow>\r\n          </div>\r\n        </PageButtons>\r\n      </AutoColumn>\r\n    </Wrapper>\r\n  )\r\n}\r\n","import { useMemo } from 'react'\r\nimport { PoolChartEntry } from 'state/pools/reducer'\r\nimport { TokenChartEntry } from 'state/tokens/reducer'\r\nimport { ChartDayData, GenericChartEntry } from 'types'\r\nimport { unixToDate } from 'utils/date'\r\nimport dayjs from 'dayjs'\r\n\r\nfunction unixToType(unix: number, type: 'month' | 'week') {\r\n  const date = dayjs.unix(unix).utc()\r\n\r\n  switch (type) {\r\n    case 'month':\r\n      return date.format('YYYY-MM')\r\n    case 'week':\r\n      let week = String(date.week())\r\n      if (week.length === 1) {\r\n        week = `0${week}`\r\n      }\r\n      return `${date.year()}-${week}`\r\n  }\r\n}\r\n\r\nexport function useTransformedVolumeData(\r\n  chartData: ChartDayData[] | PoolChartEntry[] | TokenChartEntry[] | undefined,\r\n  type: 'month' | 'week'\r\n) {\r\n  return useMemo(() => {\r\n    if (chartData) {\r\n      const data: Record<string, GenericChartEntry> = {}\r\n\r\n      chartData.forEach(({ date, volumeUSD }: { date: number; volumeUSD: number }) => {\r\n        const group = unixToType(date, type)\r\n        if (data[group]) {\r\n          data[group].value += volumeUSD\r\n        } else {\r\n          data[group] = {\r\n            time: unixToDate(date),\r\n            value: volumeUSD,\r\n          }\r\n        }\r\n      })\r\n\r\n      return Object.values(data)\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData, type])\r\n}\r\n","import React, { useState, useEffect, useMemo } from 'react'\r\nimport styled from 'styled-components'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { TYPE } from 'theme'\r\nimport { ResponsiveRow, RowBetween, RowFixed } from 'components/Row'\r\nimport LineChart from 'components/LineChart/alt'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useProtocolData, useProtocolChartData, useProtocolTransactions } from 'state/protocol/hooks'\r\nimport { DarkGreyCard } from 'components/Card'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport Percent from 'components/Percent'\r\nimport { HideMedium, HideSmall, StyledInternalLink } from '../../theme/components'\r\nimport TokenTable from 'components/tokens/TokenTable'\r\nimport PoolTable from 'components/pools/PoolTable'\r\nimport { PageWrapper, ThemedBackgroundGlobal } from 'pages/styled'\r\nimport { unixToDate } from 'utils/date'\r\nimport BarChart from 'components/BarChart/alt'\r\nimport { useAllPoolData } from 'state/pools/hooks'\r\nimport { notEmpty } from 'utils'\r\nimport TransactionsTable from '../../components/TransactionsTable'\r\nimport { useAllTokenData } from 'state/tokens/hooks'\r\nimport { MonoSpace } from 'components/shared'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { useTransformedVolumeData } from 'hooks/chart'\r\nimport { SmallOptionButton } from 'components/Button'\r\nimport { VolumeWindow } from 'types'\r\n\r\nconst ChartWrapper = styled.div`\r\n  width: 49%;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    width: 100%;\r\n  `};\r\n`\r\n\r\nexport default function Home() {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  const theme = useTheme()\r\n\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  const [protocolData] = useProtocolData()\r\n  const [chartData] = useProtocolChartData()\r\n  const [transactions] = useProtocolTransactions()\r\n\r\n  const [volumeHover, setVolumeHover] = useState<number | undefined>()\r\n  const [liquidityHover, setLiquidityHover] = useState<number | undefined>()\r\n  const [leftLabel, setLeftLabel] = useState<string | undefined>()\r\n  const [rightLabel, setRightLabel] = useState<string | undefined>()\r\n\r\n  useEffect(() => {\r\n    setLiquidityHover(undefined)\r\n    setVolumeHover(undefined)\r\n  }, [activeNetwork])\r\n\r\n  // get all the pool datas that exist\r\n  const allPoolData = useAllPoolData()\r\n  const poolDatas = useMemo(() => {\r\n    return Object.values(allPoolData)\r\n      .map((p) => p.data)\r\n      .filter(notEmpty)\r\n  }, [allPoolData])\r\n\r\n  // if hover value undefined, reset to current day value\r\n  useEffect(() => {\r\n    if (volumeHover === undefined && protocolData) {\r\n      setVolumeHover(protocolData.volumeUSD)\r\n    }\r\n  }, [protocolData, volumeHover])\r\n  useEffect(() => {\r\n    if (liquidityHover === undefined && protocolData) {\r\n      setLiquidityHover(protocolData.tvlUSD)\r\n    }\r\n  }, [liquidityHover, protocolData])\r\n\r\n  const formattedTvlData = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.tvlUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  const formattedVolumeData = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.volumeUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  const weeklyVolumeData = useTransformedVolumeData(chartData, 'week')\r\n  const monthlyVolumeData = useTransformedVolumeData(chartData, 'month')\r\n\r\n  const allTokens = useAllTokenData()\r\n\r\n  const formattedTokens = useMemo(() => {\r\n    return Object.values(allTokens)\r\n      .map((t) => t.data)\r\n      .filter(notEmpty)\r\n  }, [allTokens])\r\n\r\n  const [volumeWindow, setVolumeWindow] = useState(VolumeWindow.daily)\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <ThemedBackgroundGlobal backgroundColor={activeNetwork.bgColor} />\r\n      <AutoColumn gap=\"16px\">\r\n        <TYPE.main>Uniswap Overview</TYPE.main>\r\n        <ResponsiveRow>\r\n          <ChartWrapper>\r\n            <LineChart\r\n              data={formattedTvlData}\r\n              height={220}\r\n              minHeight={332}\r\n              color={activeNetwork.primaryColor}\r\n              value={liquidityHover}\r\n              label={leftLabel}\r\n              setValue={setLiquidityHover}\r\n              setLabel={setLeftLabel}\r\n              topLeft={\r\n                <AutoColumn gap=\"4px\">\r\n                  <TYPE.mediumHeader fontSize=\"16px\">TVL</TYPE.mediumHeader>\r\n                  <TYPE.largeHeader fontSize=\"32px\">\r\n                    <MonoSpace>{formatDollarAmount(liquidityHover, 2, true)} </MonoSpace>\r\n                  </TYPE.largeHeader>\r\n                  <TYPE.main fontSize=\"12px\" height=\"14px\">\r\n                    {leftLabel ? <MonoSpace>{leftLabel} (UTC)</MonoSpace> : null}\r\n                  </TYPE.main>\r\n                </AutoColumn>\r\n              }\r\n            />\r\n          </ChartWrapper>\r\n          <ChartWrapper>\r\n            <BarChart\r\n              height={220}\r\n              minHeight={332}\r\n              data={\r\n                volumeWindow === VolumeWindow.monthly\r\n                  ? monthlyVolumeData\r\n                  : volumeWindow === VolumeWindow.weekly\r\n                  ? weeklyVolumeData\r\n                  : formattedVolumeData\r\n              }\r\n              color={theme.blue1}\r\n              setValue={setVolumeHover}\r\n              setLabel={setRightLabel}\r\n              value={volumeHover}\r\n              label={rightLabel}\r\n              activeWindow={volumeWindow}\r\n              topRight={\r\n                <RowFixed style={{ marginLeft: '-40px', marginTop: '8px' }}>\r\n                  <SmallOptionButton\r\n                    active={volumeWindow === VolumeWindow.daily}\r\n                    onClick={() => setVolumeWindow(VolumeWindow.daily)}\r\n                  >\r\n                    D\r\n                  </SmallOptionButton>\r\n                  <SmallOptionButton\r\n                    active={volumeWindow === VolumeWindow.weekly}\r\n                    style={{ marginLeft: '8px' }}\r\n                    onClick={() => setVolumeWindow(VolumeWindow.weekly)}\r\n                  >\r\n                    W\r\n                  </SmallOptionButton>\r\n                  <SmallOptionButton\r\n                    active={volumeWindow === VolumeWindow.monthly}\r\n                    style={{ marginLeft: '8px' }}\r\n                    onClick={() => setVolumeWindow(VolumeWindow.monthly)}\r\n                  >\r\n                    M\r\n                  </SmallOptionButton>\r\n                </RowFixed>\r\n              }\r\n              topLeft={\r\n                <AutoColumn gap=\"4px\">\r\n                  <TYPE.mediumHeader fontSize=\"16px\">Volume 24H</TYPE.mediumHeader>\r\n                  <TYPE.largeHeader fontSize=\"32px\">\r\n                    <MonoSpace> {formatDollarAmount(volumeHover, 2)}</MonoSpace>\r\n                  </TYPE.largeHeader>\r\n                  <TYPE.main fontSize=\"12px\" height=\"14px\">\r\n                    {rightLabel ? <MonoSpace>{rightLabel} (UTC)</MonoSpace> : null}\r\n                  </TYPE.main>\r\n                </AutoColumn>\r\n              }\r\n            />\r\n          </ChartWrapper>\r\n        </ResponsiveRow>\r\n        <HideSmall>\r\n          <DarkGreyCard>\r\n            <RowBetween>\r\n              <RowFixed>\r\n                <RowFixed mr=\"20px\">\r\n                  <TYPE.main mr=\"4px\">Volume 24H: </TYPE.main>\r\n                  <TYPE.label mr=\"4px\">{formatDollarAmount(protocolData?.volumeUSD)}</TYPE.label>\r\n                  <Percent value={protocolData?.volumeUSDChange} wrap={true} />\r\n                </RowFixed>\r\n                <RowFixed mr=\"20px\">\r\n                  <TYPE.main mr=\"4px\">Fees 24H: </TYPE.main>\r\n                  <TYPE.label mr=\"4px\">{formatDollarAmount(protocolData?.feesUSD)}</TYPE.label>\r\n                  <Percent value={protocolData?.feeChange} wrap={true} />\r\n                </RowFixed>\r\n                <HideMedium>\r\n                  <RowFixed mr=\"20px\">\r\n                    <TYPE.main mr=\"4px\">TVL: </TYPE.main>\r\n                    <TYPE.label mr=\"4px\">{formatDollarAmount(protocolData?.tvlUSD)}</TYPE.label>\r\n                    <TYPE.main></TYPE.main>\r\n                    <Percent value={protocolData?.tvlUSDChange} wrap={true} />\r\n                  </RowFixed>\r\n                </HideMedium>\r\n              </RowFixed>\r\n            </RowBetween>\r\n          </DarkGreyCard>\r\n        </HideSmall>\r\n        <RowBetween>\r\n          <TYPE.main>Top Tokens</TYPE.main>\r\n          <StyledInternalLink to=\"tokens\">Explore</StyledInternalLink>\r\n        </RowBetween>\r\n        <TokenTable tokenDatas={formattedTokens} />\r\n        <RowBetween>\r\n          <TYPE.main>Top Pools</TYPE.main>\r\n          <StyledInternalLink to=\"pools\">Explore</StyledInternalLink>\r\n        </RowBetween>\r\n        <PoolTable poolDatas={poolDatas} />\r\n        <RowBetween>\r\n          <TYPE.main>Transactions</TYPE.main>\r\n        </RowBetween>\r\n        {transactions ? <TransactionsTable transactions={transactions} color={activeNetwork.primaryColor} /> : null}\r\n      </AutoColumn>\r\n    </PageWrapper>\r\n  )\r\n}\r\n","import React, { useEffect, useMemo } from 'react'\r\nimport { PageWrapper } from 'pages/styled'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { TYPE } from 'theme'\r\nimport PoolTable from 'components/pools/PoolTable'\r\nimport { useAllPoolData, usePoolDatas } from 'state/pools/hooks'\r\nimport { notEmpty } from 'utils'\r\nimport { useSavedPools } from 'state/user/hooks'\r\nimport { DarkGreyCard } from 'components/Card'\r\n// import TopPoolMovers from 'components/pools/TopPoolMovers'\r\n\r\nexport default function PoolPage() {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  // get all the pool datas that exist\r\n  const allPoolData = useAllPoolData()\r\n  const poolDatas = useMemo(() => {\r\n    return Object.values(allPoolData)\r\n      .map((p) => p.data)\r\n      .filter(notEmpty)\r\n  }, [allPoolData])\r\n\r\n  const [savedPools] = useSavedPools()\r\n  const watchlistPools = usePoolDatas(savedPools)\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <AutoColumn gap=\"lg\">\r\n        <TYPE.main>Your Watchlist</TYPE.main>\r\n        {watchlistPools.length > 0 ? (\r\n          <PoolTable poolDatas={watchlistPools} />\r\n        ) : (\r\n          <DarkGreyCard>\r\n            <TYPE.main>Saved pools will appear here</TYPE.main>\r\n          </DarkGreyCard>\r\n        )}\r\n        {/* <HideSmall>\r\n          <DarkGreyCard style={{ paddingTop: '12px' }}>\r\n            <AutoColumn gap=\"md\">\r\n              <TYPE.mediumHeader fontSize=\"16px\">Trending by 24H Volume</TYPE.mediumHeader>\r\n              <TopPoolMovers />\r\n            </AutoColumn>\r\n          </DarkGreyCard>\r\n        </HideSmall> */}\r\n        <TYPE.main>All Pools</TYPE.main>\r\n        <PoolTable poolDatas={poolDatas} />\r\n      </AutoColumn>\r\n    </PageWrapper>\r\n  )\r\n}\r\n","import React, { useMemo, useRef, useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useAllTokenData } from 'state/tokens/hooks'\r\nimport { GreyCard } from 'components/Card'\r\nimport { TokenData } from 'state/tokens/reducer'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { RowFixed, RowFlat } from 'components/Row'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport { TYPE, StyledInternalLink } from 'theme'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport Percent from 'components/Percent'\r\nimport HoverInlineText from 'components/HoverInlineText'\r\n\r\nconst CardWrapper = styled(StyledInternalLink)`\r\n  min-width: 190px;\r\n  margin-right: 16px;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n`\r\n\r\nconst FixedContainer = styled(AutoColumn)``\r\n\r\nexport const ScrollableRow = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  overflow-x: auto;\r\n  white-space: nowrap;\r\n\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst DataCard = ({ tokenData }: { tokenData: TokenData }) => {\r\n  return (\r\n    <CardWrapper to={'tokens/' + tokenData.address}>\r\n      <GreyCard padding=\"16px\">\r\n        <RowFixed>\r\n          <CurrencyLogo address={tokenData.address} size=\"32px\" />\r\n          <AutoColumn gap=\"3px\" style={{ marginLeft: '12px' }}>\r\n            <TYPE.label fontSize=\"14px\">\r\n              <HoverInlineText text={tokenData.symbol} />\r\n            </TYPE.label>\r\n            <RowFlat>\r\n              <TYPE.label fontSize=\"14px\" mr=\"6px\" lineHeight=\"16px\">\r\n                {formatDollarAmount(tokenData.priceUSD)}\r\n              </TYPE.label>\r\n              <Percent fontSize=\"14px\" value={tokenData.priceUSDChange} />\r\n            </RowFlat>\r\n          </AutoColumn>\r\n        </RowFixed>\r\n      </GreyCard>\r\n    </CardWrapper>\r\n  )\r\n}\r\n\r\nexport default function TopTokenMovers() {\r\n  const allTokens = useAllTokenData()\r\n\r\n  const topPriceIncrease = useMemo(() => {\r\n    return Object.values(allTokens)\r\n      .sort(({ data: a }, { data: b }) => {\r\n        return a && b ? (Math.abs(a?.priceUSDChange) > Math.abs(b?.priceUSDChange) ? -1 : 1) : -1\r\n      })\r\n      .slice(0, Math.min(20, Object.values(allTokens).length))\r\n  }, [allTokens])\r\n\r\n  const increaseRef = useRef<HTMLDivElement>(null)\r\n  const [increaseSet, setIncreaseSet] = useState(false)\r\n  // const [pauseAnimation, setPauseAnimation] = useState(false)\r\n  // const [resetInterval, setClearInterval] = useState<() => void | undefined>()\r\n\r\n  useEffect(() => {\r\n    if (!increaseSet && increaseRef && increaseRef.current) {\r\n      setInterval(() => {\r\n        if (increaseRef.current && increaseRef.current.scrollLeft !== increaseRef.current.scrollWidth) {\r\n          increaseRef.current.scrollTo(increaseRef.current.scrollLeft + 1, 0)\r\n        }\r\n      }, 30)\r\n      setIncreaseSet(true)\r\n    }\r\n  }, [increaseRef, increaseSet])\r\n\r\n  // function handleHover() {\r\n  //   if (resetInterval) {\r\n  //     resetInterval()\r\n  //   }\r\n  //   setPauseAnimation(true)\r\n  // }\r\n\r\n  return (\r\n    <FixedContainer gap=\"md\">\r\n      <ScrollableRow ref={increaseRef}>\r\n        {topPriceIncrease.map((entry) =>\r\n          entry.data ? <DataCard key={'top-card-token-' + entry.data?.address} tokenData={entry.data} /> : null\r\n        )}\r\n      </ScrollableRow>\r\n    </FixedContainer>\r\n  )\r\n}\r\n","import React, { useMemo, useEffect } from 'react'\r\nimport { PageWrapper } from 'pages/styled'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { TYPE, HideSmall } from 'theme'\r\nimport TokenTable from 'components/tokens/TokenTable'\r\nimport { useAllTokenData, useTokenDatas } from 'state/tokens/hooks'\r\nimport { notEmpty } from 'utils'\r\nimport { useSavedTokens } from 'state/user/hooks'\r\nimport { DarkGreyCard } from 'components/Card'\r\nimport TopTokenMovers from 'components/tokens/TopTokenMovers'\r\n\r\nexport default function TokensOverview() {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  const allTokens = useAllTokenData()\r\n\r\n  const formattedTokens = useMemo(() => {\r\n    return Object.values(allTokens)\r\n      .map((t) => t.data)\r\n      .filter(notEmpty)\r\n  }, [allTokens])\r\n\r\n  const [savedTokens] = useSavedTokens()\r\n  const watchListTokens = useTokenDatas(savedTokens)\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <AutoColumn gap=\"lg\">\r\n        <TYPE.main>Your Watchlist</TYPE.main>\r\n        {savedTokens.length > 0 ? (\r\n          <TokenTable tokenDatas={watchListTokens} />\r\n        ) : (\r\n          <DarkGreyCard>\r\n            <TYPE.main>Saved tokens will appear here</TYPE.main>\r\n          </DarkGreyCard>\r\n        )}\r\n        <HideSmall>\r\n          <DarkGreyCard style={{ paddingTop: '12px' }}>\r\n            <AutoColumn gap=\"md\">\r\n              <TYPE.mediumHeader fontSize=\"16px\">Top Movers</TYPE.mediumHeader>\r\n              <TopTokenMovers />\r\n            </AutoColumn>\r\n          </DarkGreyCard>\r\n        </HideSmall>\r\n        <TYPE.main>All Tokens</TYPE.main>\r\n        <TokenTable tokenDatas={formattedTokens} />\r\n      </AutoColumn>\r\n    </PageWrapper>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport styled, { keyframes } from 'styled-components'\r\nimport { TYPE, ExternalLink } from '../../theme'\r\n\r\nimport { useActiveNetworkVersion, useSubgraphStatus } from '../../state/application/hooks'\r\nimport { getEtherscanLink } from '../../utils'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { EthereumNetworkInfo } from 'constants/networks'\r\n\r\nconst StyledPolling = styled.div`\r\n  display: flex;\r\n  color: white;\r\n  margin-right: 1rem;\r\n  border-radius: 4px;\r\n  width: 192px;\r\n  padding: 4px;\r\n  background-color: ${({ theme }) => theme.bg2};\r\n  transition: opacity 0.25s ease;\r\n  color: ${({ theme }) => theme.green1};\r\n  :hover {\r\n    opacity: 1;\r\n  }\r\n  z-index: 9999;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    display: none;\r\n  `}\r\n`\r\nconst StyledPollingDot = styled.div`\r\n  width: 8px;\r\n  height: 8px;\r\n  min-height: 8px;\r\n  min-width: 8px;\r\n  margin-left: 0.4rem;\r\n  margin-top: 3px;\r\n  border-radius: 50%;\r\n  position: relative;\r\n  background-color: ${({ theme }) => theme.green1};\r\n`\r\n\r\nconst rotate360 = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n`\r\n\r\nconst Spinner = styled.div`\r\n  animation: ${rotate360} 1s cubic-bezier(0.83, 0, 0.17, 1) infinite;\r\n  transform: translateZ(0);\r\n  border-top: 1px solid transparent;\r\n  border-right: 1px solid transparent;\r\n  border-bottom: 1px solid transparent;\r\n  border-left: 2px solid ${({ theme }) => theme.green1};\r\n  background: transparent;\r\n  width: 14px;\r\n  height: 14px;\r\n  border-radius: 50%;\r\n  position: relative;\r\n  left: -3px;\r\n  top: -3px;\r\n`\r\n\r\nexport default function Polling() {\r\n  const theme = useTheme()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n  const [status] = useSubgraphStatus()\r\n  const [isMounted, setIsMounted] = useState(true)\r\n  const latestBlock = activeNetwork === EthereumNetworkInfo ? status.headBlock : status.syncedBlock\r\n\r\n  useEffect(\r\n    () => {\r\n      const timer1 = setTimeout(() => setIsMounted(true), 1000)\r\n\r\n      // this will clear Timeout when component unmount like in willComponentUnmount\r\n      return () => {\r\n        setIsMounted(false)\r\n        clearTimeout(timer1)\r\n      }\r\n    },\r\n    [status] //useEffect will run only one time\r\n    //if you pass a value to array, like this [data] than clearTimeout will run every time this value changes (useEffect re-run)\r\n  )\r\n\r\n  return (\r\n    <ExternalLink href={latestBlock ? getEtherscanLink(1, latestBlock.toString(), 'block', activeNetwork) : ''}>\r\n      <StyledPolling>\r\n        <TYPE.small mr=\"4px\" color={theme.text3}>\r\n          Latest synced block:{' '}\r\n        </TYPE.small>\r\n        <TYPE.small style={{ opacity: isMounted ? '0.6' : '0.8' }}>{latestBlock}</TYPE.small>\r\n        <StyledPollingDot>{!isMounted && <Spinner />}</StyledPollingDot>\r\n      </StyledPolling>\r\n    </ExternalLink>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { RowBetween, RowFixed, AutoRow } from 'components/Row'\r\nimport { TYPE, ExternalLink } from 'theme'\r\nimport { useEthPrices } from 'hooks/useEthPrices'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport Polling from './Polling'\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.black};\r\n  padding: 10px 20px;\r\n`\r\n\r\nconst Item = styled(TYPE.main)`\r\n  font-size: 12px;\r\n`\r\n\r\nconst StyledLink = styled(ExternalLink)`\r\n  font-size: 12px;\r\n  color: ${({ theme }) => theme.text1};\r\n`\r\n\r\nconst TopBar = () => {\r\n  const ethPrices = useEthPrices()\r\n  return (\r\n    <Wrapper>\r\n      <RowBetween>\r\n        <Polling />\r\n        <AutoRow gap=\"6px\">\r\n          <RowFixed>\r\n            <Item>ETH Price:</Item>\r\n            <Item fontWeight=\"700\" ml=\"4px\">\r\n              {formatDollarAmount(ethPrices?.current)}\r\n            </Item>\r\n          </RowFixed>\r\n        </AutoRow>\r\n        <AutoRow gap=\"6px\" style={{ justifyContent: 'flex-end' }}>\r\n          <StyledLink href=\"https://v2.info.uniswap.org/#/\">V2 Analytics</StyledLink>\r\n          <StyledLink href=\"https://docs.uniswap.org/\">Docs</StyledLink>\r\n          <StyledLink href=\"https://app.uniswap.org/#/swap\">App</StyledLink>\r\n        </AutoRow>\r\n      </RowBetween>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default TopBar\r\n","import { useState, useLayoutEffect, useMemo } from 'react'\r\nimport { shade } from 'polished'\r\nimport Vibrant from 'node-vibrant'\r\nimport { hex } from 'wcag-contrast'\r\nimport { Token } from '@uniswap/sdk-core'\r\nimport uriToHttp from 'utils/uriToHttp'\r\nimport { isAddress } from 'utils'\r\nimport { SupportedChainId } from 'constants/chains'\r\n\r\nasync function getColorFromToken(token: Token): Promise<string | null> {\r\n  if (token.chainId === SupportedChainId.RINKEBY && token.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735') {\r\n    return Promise.resolve('#FAAB14')\r\n  }\r\n\r\n  const path = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`\r\n\r\n  return Vibrant.from(path)\r\n    .getPalette()\r\n    .then((palette) => {\r\n      if (palette?.Vibrant) {\r\n        let detectedHex = palette.Vibrant.hex\r\n        let AAscore = hex(detectedHex, '#FFF')\r\n        while (AAscore < 3) {\r\n          detectedHex = shade(0.005, detectedHex)\r\n          AAscore = hex(detectedHex, '#FFF')\r\n        }\r\n        return detectedHex\r\n      }\r\n      return null\r\n    })\r\n    .catch(() => null)\r\n}\r\n\r\nasync function getColorFromUriPath(uri: string): Promise<string | null> {\r\n  const formattedPath = uriToHttp(uri)[0]\r\n\r\n  return Vibrant.from(formattedPath)\r\n    .getPalette()\r\n    .then((palette) => {\r\n      if (palette?.Vibrant) {\r\n        return palette.Vibrant.hex\r\n      }\r\n      return null\r\n    })\r\n    .catch(() => null)\r\n}\r\n\r\nexport function useColor(address?: string) {\r\n  const [color, setColor] = useState('#2172E5')\r\n\r\n  const formattedAddress = isAddress(address)\r\n\r\n  const token = useMemo(() => {\r\n    return formattedAddress ? new Token(1, formattedAddress, 0) : undefined\r\n  }, [formattedAddress])\r\n\r\n  useLayoutEffect(() => {\r\n    let stale = false\r\n\r\n    if (token) {\r\n      getColorFromToken(token).then((tokenColor) => {\r\n        if (!stale && tokenColor !== null) {\r\n          setColor(tokenColor)\r\n        }\r\n      })\r\n    }\r\n\r\n    return () => {\r\n      stale = true\r\n      setColor('#2172E5')\r\n    }\r\n  }, [token])\r\n\r\n  return color\r\n}\r\n\r\nexport function useListColor(listImageUri?: string) {\r\n  const [color, setColor] = useState('#2172E5')\r\n\r\n  useLayoutEffect(() => {\r\n    let stale = false\r\n\r\n    if (listImageUri) {\r\n      getColorFromUriPath(listImageUri).then((color) => {\r\n        if (!stale && color !== null) {\r\n          setColor(color)\r\n        }\r\n      })\r\n    }\r\n\r\n    return () => {\r\n      stale = true\r\n      setColor('#2172E5')\r\n    }\r\n  }, [listImageUri])\r\n\r\n  return color\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst ToggleElement = styled.span<{ isActive?: boolean; isOnSwitch?: boolean }>`\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 14px;\r\n  background: ${({ theme, isActive, isOnSwitch }) => (isActive ? (isOnSwitch ? theme.primary1 : theme.text4) : 'none')};\r\n  color: ${({ theme, isActive, isOnSwitch }) => (isActive ? (isOnSwitch ? theme.white : theme.text2) : theme.text3)};\r\n  font-size: 1rem;\r\n  font-weight: 400;\r\n\r\n  padding: 0.35rem 0.6rem;\r\n  border-radius: 12px;\r\n  background: ${({ theme, isActive, isOnSwitch }) => (isActive ? (isOnSwitch ? theme.primary1 : theme.text4) : 'none')};\r\n  color: ${({ theme, isActive, isOnSwitch }) => (isActive ? (isOnSwitch ? theme.white : theme.text2) : theme.text2)};\r\n  font-size: 1rem;\r\n  font-weight: ${({ isOnSwitch }) => (isOnSwitch ? '500' : '400')};\r\n  :hover {\r\n    user-select: ${({ isOnSwitch }) => (isOnSwitch ? 'none' : 'initial')};\r\n    background: ${({ theme, isActive, isOnSwitch }) =>\r\n      isActive ? (isOnSwitch ? theme.primary1 : theme.text3) : 'none'};\r\n    color: ${({ theme, isActive, isOnSwitch }) => (isActive ? (isOnSwitch ? theme.white : theme.text2) : theme.text3)};\r\n  }\r\n`\r\n\r\nconst StyledToggle = styled.button<{ isActive?: boolean; activeElement?: boolean }>`\r\n  border-radius: 12px;\r\n  border: none;\r\n  background: ${({ theme }) => theme.bg3};\r\n  display: flex;\r\n  width: fit-content;\r\n  cursor: pointer;\r\n  outline: none;\r\n  padding: 0;\r\n`\r\n\r\nexport interface ToggleProps {\r\n  id?: string\r\n  isActive: boolean\r\n  toggle: () => void\r\n}\r\n\r\nexport default function Toggle({ id, isActive, toggle }: ToggleProps) {\r\n  return (\r\n    <StyledToggle id={id} isActive={isActive} onClick={toggle}>\r\n      <ToggleElement isActive={isActive} isOnSwitch={true}>\r\n        On\r\n      </ToggleElement>\r\n      <ToggleElement isActive={!isActive} isOnSwitch={false}>\r\n        Off\r\n      </ToggleElement>\r\n    </StyledToggle>\r\n  )\r\n}\r\n\r\nexport const ToggleWrapper = styled.button<{ width?: string }>`\r\n  display: flex;\r\n  align-items: center;\r\n  width: ${({ width }) => width ?? '100%'}\r\n  padding: 1px;\r\n  background: ${({ theme }) => theme.bg2};\r\n  border-radius: 12px;\r\n  border: ${({ theme }) => '2px solid ' + theme.bg2};\r\n  cursor: pointer;\r\n  outline: none;\r\n  color: ${({ theme }) => theme.text2};\r\n\r\n`\r\n\r\nexport const ToggleElementFree = styled.span<{ isActive?: boolean; fontSize?: string }>`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 2px 10px;\r\n  border-radius: 12px;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: ${({ theme, isActive }) => (isActive ? theme.black : 'none')};\r\n  color: ${({ theme, isActive }) => (isActive ? theme.text1 : theme.text2)};\r\n  font-size: ${({ fontSize }) => fontSize ?? '1rem'};\r\n  font-weight: 600;\r\n  white-space: nowrap;\r\n  :hover {\r\n    user-select: initial;\r\n    color: ${({ theme, isActive }) => (isActive ? theme.text2 : theme.text3)};\r\n  }\r\n  margin-top: 0.5px;\r\n`\r\n","import React, { useRef, useState, useEffect, useCallback, Dispatch, SetStateAction, ReactNode } from 'react'\r\nimport { createChart, IChartApi } from 'lightweight-charts'\r\nimport { RowBetween } from 'components/Row'\r\nimport Card from '../Card'\r\nimport styled from 'styled-components'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport useTheme from 'hooks/useTheme'\r\n\r\ndayjs.extend(utc)\r\n\r\nconst Wrapper = styled(Card)`\r\n  width: 100%;\r\n  padding: 1rem;\r\n  display: flex;\r\n  background-color: ${({ theme }) => theme.bg0}\r\n  flex-direction: column;\r\n  > * {\r\n    font-size: 1rem;\r\n  }\r\n`\r\n\r\nconst DEFAULT_HEIGHT = 300\r\n\r\nexport type LineChartProps = {\r\n  data: any[]\r\n  color?: string | undefined\r\n  height?: number | undefined\r\n  minHeight?: number\r\n  setValue?: Dispatch<SetStateAction<number | undefined>> // used for value on hover\r\n  setLabel?: Dispatch<SetStateAction<string | undefined>> // used for value label on hover\r\n  topLeft?: ReactNode | undefined\r\n  topRight?: ReactNode | undefined\r\n  bottomLeft?: ReactNode | undefined\r\n  bottomRight?: ReactNode | undefined\r\n} & React.HTMLAttributes<HTMLDivElement>\r\n\r\nconst CandleChart = ({\r\n  data,\r\n  color = '#56B2A4',\r\n  setValue,\r\n  setLabel,\r\n  topLeft,\r\n  topRight,\r\n  bottomLeft,\r\n  bottomRight,\r\n  height = DEFAULT_HEIGHT,\r\n  minHeight = DEFAULT_HEIGHT,\r\n  ...rest\r\n}: LineChartProps) => {\r\n  const theme = useTheme()\r\n  const textColor = theme.text3\r\n  const chartRef = useRef<HTMLDivElement>(null)\r\n  const [chartCreated, setChart] = useState<IChartApi | undefined>()\r\n\r\n  const handleResize = useCallback(() => {\r\n    if (chartCreated && chartRef?.current?.parentElement) {\r\n      chartCreated.resize(chartRef.current.parentElement.clientWidth - 32, height)\r\n      chartCreated.timeScale().fitContent()\r\n      chartCreated.timeScale().scrollToPosition(0, false)\r\n    }\r\n  }, [chartCreated, chartRef, height])\r\n\r\n  // add event listener for resize\r\n  const isClient = typeof window === 'object'\r\n  useEffect(() => {\r\n    if (!isClient) {\r\n      return\r\n    }\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [isClient, chartRef, handleResize]) // Empty array ensures that effect is only run on mount and unmount\r\n\r\n  // if chart not instantiated in canvas, create it\r\n  useEffect(() => {\r\n    if (!chartCreated && data && !!chartRef?.current?.parentElement) {\r\n      const chart = createChart(chartRef.current, {\r\n        height: height,\r\n        width: chartRef.current.parentElement.clientWidth - 32,\r\n        layout: {\r\n          backgroundColor: 'transparent',\r\n          textColor: '#565A69',\r\n          fontFamily: 'Inter var',\r\n        },\r\n        rightPriceScale: {\r\n          scaleMargins: {\r\n            top: 0.1,\r\n            bottom: 0.1,\r\n          },\r\n          borderVisible: false,\r\n        },\r\n        timeScale: {\r\n          borderVisible: false,\r\n          secondsVisible: true,\r\n          tickMarkFormatter: (unixTime: number) => {\r\n            return dayjs.unix(unixTime).format('MM/DD h:mm A')\r\n          },\r\n        },\r\n        watermark: {\r\n          visible: false,\r\n        },\r\n        grid: {\r\n          horzLines: {\r\n            visible: false,\r\n          },\r\n          vertLines: {\r\n            visible: false,\r\n          },\r\n        },\r\n        crosshair: {\r\n          horzLine: {\r\n            visible: false,\r\n            labelVisible: false,\r\n          },\r\n          mode: 1,\r\n          vertLine: {\r\n            visible: true,\r\n            labelVisible: false,\r\n            style: 3,\r\n            width: 1,\r\n            color: '#505050',\r\n            labelBackgroundColor: color,\r\n          },\r\n        },\r\n      })\r\n\r\n      chart.timeScale().fitContent()\r\n      setChart(chart)\r\n    }\r\n  }, [color, chartCreated, data, height, setValue, textColor, theme])\r\n\r\n  useEffect(() => {\r\n    if (chartCreated && data) {\r\n      const series = chartCreated.addCandlestickSeries({\r\n        upColor: 'green',\r\n        downColor: 'red',\r\n        borderDownColor: 'red',\r\n        borderUpColor: 'green',\r\n        wickDownColor: 'red',\r\n        wickUpColor: 'green',\r\n      })\r\n\r\n      series.setData(data)\r\n\r\n      // update the title when hovering on the chart\r\n      chartCreated.subscribeCrosshairMove(function (param) {\r\n        if (\r\n          chartRef?.current &&\r\n          (param === undefined ||\r\n            param.time === undefined ||\r\n            (param && param.point && param.point.x < 0) ||\r\n            (param && param.point && param.point.x > chartRef.current.clientWidth) ||\r\n            (param && param.point && param.point.y < 0) ||\r\n            (param && param.point && param.point.y > height))\r\n        ) {\r\n          // reset values\r\n          setValue && setValue(undefined)\r\n          setLabel && setLabel(undefined)\r\n        } else if (series && param) {\r\n          const timestamp = param.time as number\r\n          const time = dayjs.unix(timestamp).utc().format('MMM D, YYYY h:mm A') + ' (UTC)'\r\n          const parsed = param.seriesPrices.get(series) as { open: number } | undefined\r\n          setValue && setValue(parsed?.open)\r\n          setLabel && setLabel(time)\r\n        }\r\n      })\r\n    }\r\n  }, [chartCreated, color, data, height, setValue, setLabel, theme.bg0])\r\n\r\n  return (\r\n    <Wrapper minHeight={minHeight}>\r\n      <RowBetween>\r\n        {topLeft ?? null}\r\n        {topRight ?? null}\r\n      </RowBetween>\r\n      <div ref={chartRef} id={'candle-chart'} {...rest} />\r\n      <RowBetween>\r\n        {bottomLeft ?? null}\r\n        {bottomRight ?? null}\r\n      </RowBetween>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default CandleChart\r\n","import { useState, useEffect } from 'react'\r\n\r\n// endpoint to check asset exists\r\nconst cmcEndpoint = 'https://3rdparty-apis.coinmarketcap.com/v1/cryptocurrency/contract?address='\r\n\r\n// page to view assets\r\nconst cmcAssetUrl = 'https://coinmarketcap.com/currencies/'\r\n\r\n/**\r\n * Check if asset exists on CMC, if exists\r\n * return  url, if not return undefined\r\n * @param address token address\r\n */\r\nexport function useCMCLink(address: string): string | undefined {\r\n  const [link, setLink] = useState<string | undefined>(undefined)\r\n\r\n  useEffect(() => {\r\n    async function fetchLink() {\r\n      const result = await fetch(cmcEndpoint + address)\r\n      // if link exists, format the url\r\n      if (result.status === 200) {\r\n        result.json().then(({ data }) => {\r\n          setLink(data.url)\r\n        })\r\n      }\r\n    }\r\n    if (address) {\r\n      fetchLink()\r\n    }\r\n  }, [address])\r\n\r\n  return link\r\n}\r\n","export default \"data:image/png;base64,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\"","import React, { useMemo, useState, useEffect } from 'react'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport {\r\n  useTokenData,\r\n  usePoolsForToken,\r\n  useTokenChartData,\r\n  useTokenPriceData,\r\n  useTokenTransactions,\r\n} from 'state/tokens/hooks'\r\nimport styled from 'styled-components'\r\nimport { useColor } from 'hooks/useColor'\r\nimport ReactGA from 'react-ga'\r\nimport { ThemedBackground, PageWrapper } from 'pages/styled'\r\nimport { shortenAddress, getEtherscanLink, currentTimestamp } from 'utils'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { RowBetween, RowFixed, AutoRow, RowFlat } from 'components/Row'\r\nimport { TYPE, StyledInternalLink } from 'theme'\r\nimport Loader, { LocalLoader } from 'components/Loader'\r\nimport { ExternalLink, Download } from 'react-feather'\r\nimport { ExternalLink as StyledExternalLink } from '../../theme/components'\r\nimport useTheme from 'hooks/useTheme'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\nimport Percent from 'components/Percent'\r\nimport { ButtonPrimary, ButtonGray, SavedIcon } from 'components/Button'\r\nimport { DarkGreyCard, LightGreyCard } from 'components/Card'\r\nimport { usePoolDatas } from 'state/pools/hooks'\r\nimport PoolTable from 'components/pools/PoolTable'\r\nimport LineChart from 'components/LineChart/alt'\r\nimport { unixToDate } from 'utils/date'\r\nimport { ToggleWrapper, ToggleElementFree } from 'components/Toggle/index'\r\nimport BarChart from 'components/BarChart/alt'\r\nimport CandleChart from 'components/CandleChart'\r\nimport TransactionTable from 'components/TransactionsTable'\r\nimport { useSavedTokens } from 'state/user/hooks'\r\nimport { ONE_HOUR_SECONDS, TimeWindow } from 'constants/intervals'\r\nimport { MonoSpace } from 'components/shared'\r\nimport dayjs from 'dayjs'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { networkPrefix } from 'utils/networkPrefix'\r\nimport { EthereumNetworkInfo } from 'constants/networks'\r\nimport { GenericImageWrapper } from 'components/Logo'\r\n// import { SmallOptionButton } from '../../components/Button'\r\nimport { useCMCLink } from 'hooks/useCMCLink'\r\nimport CMCLogo from '../../assets/images/cmc.png'\r\n\r\nconst PriceText = styled(TYPE.label)`\r\n  font-size: 36px;\r\n  line-height: 0.8;\r\n`\r\n\r\nconst ContentLayout = styled.div`\r\n  margin-top: 16px;\r\n  display: grid;\r\n  grid-template-columns: 260px 1fr;\r\n  grid-gap: 1em;\r\n\r\n  @media screen and (max-width: 800px) {\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 1fr 1fr;\r\n  }\r\n`\r\n\r\nconst ResponsiveRow = styled(RowBetween)`\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    row-gap: 24px;\r\n    width: 100%:\r\n  `};\r\n`\r\n\r\nconst StyledCMCLogo = styled.img`\r\n  height: 16px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nenum ChartView {\r\n  TVL,\r\n  VOL,\r\n  PRICE,\r\n}\r\n\r\nconst DEFAULT_TIME_WINDOW = TimeWindow.WEEK\r\n\r\nexport default function TokenPage({\r\n  match: {\r\n    params: { address },\r\n  },\r\n}: RouteComponentProps<{ address: string }>) {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  address = address.toLowerCase()\r\n  // theming\r\n  const backgroundColor = useColor(address)\r\n  const theme = useTheme()\r\n\r\n  // scroll on page view\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  const tokenData = useTokenData(address)\r\n  const poolsForToken = usePoolsForToken(address)\r\n  const poolDatas = usePoolDatas(poolsForToken ?? [])\r\n  const transactions = useTokenTransactions(address)\r\n  const chartData = useTokenChartData(address)\r\n\r\n  // check for link to CMC\r\n  const cmcLink = useCMCLink(address)\r\n\r\n  // format for chart component\r\n  const formattedTvlData = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.totalValueLockedUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  const formattedVolumeData = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.volumeUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  // chart labels\r\n  const [view, setView] = useState(ChartView.PRICE)\r\n  const [latestValue, setLatestValue] = useState<number | undefined>()\r\n  const [valueLabel, setValueLabel] = useState<string | undefined>()\r\n  const [timeWindow] = useState(DEFAULT_TIME_WINDOW)\r\n\r\n  // pricing data\r\n  const priceData = useTokenPriceData(address, ONE_HOUR_SECONDS, timeWindow)\r\n  const adjustedToCurrent = useMemo(() => {\r\n    if (priceData && tokenData && priceData.length > 0) {\r\n      const adjusted = Object.assign([], priceData)\r\n      adjusted.push({\r\n        time: currentTimestamp() / 1000,\r\n        open: priceData[priceData.length - 1].close,\r\n        close: tokenData?.priceUSD,\r\n        high: tokenData?.priceUSD,\r\n        low: priceData[priceData.length - 1].close,\r\n      })\r\n      return adjusted\r\n    } else {\r\n      return undefined\r\n    }\r\n  }, [priceData, tokenData])\r\n\r\n  // watchlist\r\n  const [savedTokens, addSavedToken] = useSavedTokens()\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <ThemedBackground backgroundColor={backgroundColor} />\r\n      {tokenData ? (\r\n        !tokenData.exists ? (\r\n          <LightGreyCard style={{ textAlign: 'center' }}>\r\n            No pool has been created with this token yet. Create one\r\n            <StyledExternalLink style={{ marginLeft: '4px' }} href={`https://app.uniswap.org/#/add/${address}`}>\r\n              here.\r\n            </StyledExternalLink>\r\n          </LightGreyCard>\r\n        ) : (\r\n          <AutoColumn gap=\"32px\">\r\n            <AutoColumn gap=\"32px\">\r\n              <RowBetween>\r\n                <AutoRow gap=\"4px\">\r\n                  <StyledInternalLink to={networkPrefix(activeNetwork)}>\r\n                    <TYPE.main>{`Home > `}</TYPE.main>\r\n                  </StyledInternalLink>\r\n                  <StyledInternalLink to={networkPrefix(activeNetwork) + 'tokens'}>\r\n                    <TYPE.label>{` Tokens `}</TYPE.label>\r\n                  </StyledInternalLink>\r\n                  <TYPE.main>{` > `}</TYPE.main>\r\n                  <TYPE.label>{` ${tokenData.symbol} `}</TYPE.label>\r\n                  <StyledExternalLink href={getEtherscanLink(1, address, 'address', activeNetwork)}>\r\n                    <TYPE.main>{` (${shortenAddress(address)}) `}</TYPE.main>\r\n                  </StyledExternalLink>\r\n                </AutoRow>\r\n                <RowFixed align=\"center\" justify=\"center\">\r\n                  <SavedIcon fill={savedTokens.includes(address)} onClick={() => addSavedToken(address)} />\r\n                  {cmcLink && (\r\n                    <StyledExternalLink\r\n                      href={cmcLink}\r\n                      style={{ marginLeft: '12px' }}\r\n                      onClickCapture={() => {\r\n                        ReactGA.event({\r\n                          category: 'CMC',\r\n                          action: 'CMC token page click',\r\n                        })\r\n                      }}\r\n                    >\r\n                      <StyledCMCLogo src={CMCLogo} />\r\n                    </StyledExternalLink>\r\n                  )}\r\n                  <StyledExternalLink href={getEtherscanLink(1, address, 'address', activeNetwork)}>\r\n                    <ExternalLink stroke={theme.text2} size={'17px'} style={{ marginLeft: '12px' }} />\r\n                  </StyledExternalLink>\r\n                </RowFixed>\r\n              </RowBetween>\r\n              <ResponsiveRow align=\"flex-end\">\r\n                <AutoColumn gap=\"md\">\r\n                  <RowFixed gap=\"lg\">\r\n                    <CurrencyLogo address={address} />\r\n                    <TYPE.label ml={'10px'} fontSize=\"20px\">\r\n                      {tokenData.name}\r\n                    </TYPE.label>\r\n                    <TYPE.main ml={'6px'} fontSize=\"20px\">\r\n                      ({tokenData.symbol})\r\n                    </TYPE.main>\r\n                    {activeNetwork === EthereumNetworkInfo ? null : (\r\n                      <GenericImageWrapper src={activeNetwork.imageURL} style={{ marginLeft: '8px' }} size={'26px'} />\r\n                    )}\r\n                  </RowFixed>\r\n                  <RowFlat style={{ marginTop: '8px' }}>\r\n                    <PriceText mr=\"10px\"> {formatDollarAmount(tokenData.priceUSD)}</PriceText>\r\n                    (<Percent value={tokenData.priceUSDChange} />)\r\n                  </RowFlat>\r\n                </AutoColumn>\r\n                {activeNetwork !== EthereumNetworkInfo ? null : (\r\n                  <RowFixed>\r\n                    <StyledExternalLink href={`https://app.uniswap.org/#/add/${address}`}>\r\n                      <ButtonGray width=\"170px\" mr=\"12px\" height={'100%'} style={{ height: '44px' }}>\r\n                        <RowBetween>\r\n                          <Download size={24} />\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>Add Liquidity</div>\r\n                        </RowBetween>\r\n                      </ButtonGray>\r\n                    </StyledExternalLink>\r\n                    <StyledExternalLink href={`https://app.uniswap.org/#/swap?inputCurrency=${address}`}>\r\n                      <ButtonPrimary width=\"100px\" bgColor={backgroundColor} style={{ height: '44px' }}>\r\n                        Trade\r\n                      </ButtonPrimary>\r\n                    </StyledExternalLink>\r\n                  </RowFixed>\r\n                )}\r\n              </ResponsiveRow>\r\n            </AutoColumn>\r\n            <ContentLayout>\r\n              <DarkGreyCard>\r\n                <AutoColumn gap=\"lg\">\r\n                  <AutoColumn gap=\"4px\">\r\n                    <TYPE.main fontWeight={400}>TVL</TYPE.main>\r\n                    <TYPE.label fontSize=\"24px\">{formatDollarAmount(tokenData.tvlUSD)}</TYPE.label>\r\n                    <Percent value={tokenData.tvlUSDChange} />\r\n                  </AutoColumn>\r\n                  <AutoColumn gap=\"4px\">\r\n                    <TYPE.main fontWeight={400}>24h Trading Vol</TYPE.main>\r\n                    <TYPE.label fontSize=\"24px\">{formatDollarAmount(tokenData.volumeUSD)}</TYPE.label>\r\n                    <Percent value={tokenData.volumeUSDChange} />\r\n                  </AutoColumn>\r\n                  <AutoColumn gap=\"4px\">\r\n                    <TYPE.main fontWeight={400}>7d Trading Vol</TYPE.main>\r\n                    <TYPE.label fontSize=\"24px\">{formatDollarAmount(tokenData.volumeUSDWeek)}</TYPE.label>\r\n                  </AutoColumn>\r\n                  <AutoColumn gap=\"4px\">\r\n                    <TYPE.main fontWeight={400}>24h Fees</TYPE.main>\r\n                    <TYPE.label fontSize=\"24px\">{formatDollarAmount(tokenData.feesUSD)}</TYPE.label>\r\n                  </AutoColumn>\r\n                </AutoColumn>\r\n              </DarkGreyCard>\r\n              <DarkGreyCard>\r\n                <RowBetween align=\"flex-start\">\r\n                  <AutoColumn>\r\n                    <RowFixed>\r\n                      <TYPE.label fontSize=\"24px\" height=\"30px\">\r\n                        <MonoSpace>\r\n                          {latestValue\r\n                            ? formatDollarAmount(latestValue, 2)\r\n                            : view === ChartView.VOL\r\n                            ? formatDollarAmount(formattedVolumeData[formattedVolumeData.length - 1]?.value)\r\n                            : view === ChartView.TVL\r\n                            ? formatDollarAmount(formattedTvlData[formattedTvlData.length - 1]?.value)\r\n                            : formatDollarAmount(tokenData.priceUSD, 2)}\r\n                        </MonoSpace>\r\n                      </TYPE.label>\r\n                    </RowFixed>\r\n                    <TYPE.main height=\"20px\" fontSize=\"12px\">\r\n                      {valueLabel ? (\r\n                        <MonoSpace>{valueLabel} (UTC)</MonoSpace>\r\n                      ) : (\r\n                        <MonoSpace>{dayjs.utc().format('MMM D, YYYY')}</MonoSpace>\r\n                      )}\r\n                    </TYPE.main>\r\n                  </AutoColumn>\r\n                  <ToggleWrapper width=\"180px\">\r\n                    <ToggleElementFree\r\n                      isActive={view === ChartView.VOL}\r\n                      fontSize=\"12px\"\r\n                      onClick={() => (view === ChartView.VOL ? setView(ChartView.TVL) : setView(ChartView.VOL))}\r\n                    >\r\n                      Volume\r\n                    </ToggleElementFree>\r\n                    <ToggleElementFree\r\n                      isActive={view === ChartView.TVL}\r\n                      fontSize=\"12px\"\r\n                      onClick={() => (view === ChartView.TVL ? setView(ChartView.PRICE) : setView(ChartView.TVL))}\r\n                    >\r\n                      TVL\r\n                    </ToggleElementFree>\r\n                    <ToggleElementFree\r\n                      isActive={view === ChartView.PRICE}\r\n                      fontSize=\"12px\"\r\n                      onClick={() => setView(ChartView.PRICE)}\r\n                    >\r\n                      Price\r\n                    </ToggleElementFree>\r\n                  </ToggleWrapper>\r\n                </RowBetween>\r\n                {view === ChartView.TVL ? (\r\n                  <LineChart\r\n                    data={formattedTvlData}\r\n                    color={backgroundColor}\r\n                    minHeight={340}\r\n                    value={latestValue}\r\n                    label={valueLabel}\r\n                    setValue={setLatestValue}\r\n                    setLabel={setValueLabel}\r\n                  />\r\n                ) : view === ChartView.VOL ? (\r\n                  <BarChart\r\n                    data={formattedVolumeData}\r\n                    color={backgroundColor}\r\n                    minHeight={340}\r\n                    value={latestValue}\r\n                    label={valueLabel}\r\n                    setValue={setLatestValue}\r\n                    setLabel={setValueLabel}\r\n                  />\r\n                ) : view === ChartView.PRICE ? (\r\n                  adjustedToCurrent ? (\r\n                    <CandleChart\r\n                      data={adjustedToCurrent}\r\n                      setValue={setLatestValue}\r\n                      setLabel={setValueLabel}\r\n                      color={backgroundColor}\r\n                    />\r\n                  ) : (\r\n                    <LocalLoader fill={false} />\r\n                  )\r\n                ) : null}\r\n                {/* <RowBetween width=\"100%\">\r\n                  <div> </div>\r\n                  <AutoRow gap=\"4px\" width=\"fit-content\">\r\n                    <SmallOptionButton\r\n                      active={timeWindow === TimeWindow.DAY}\r\n                      onClick={() => setTimeWindow(TimeWindow.DAY)}\r\n                    >\r\n                      24H\r\n                    </SmallOptionButton>\r\n                    <SmallOptionButton\r\n                      active={timeWindow === TimeWindow.WEEK}\r\n                      onClick={() => setTimeWindow(TimeWindow.WEEK)}\r\n                    >\r\n                      1W\r\n                    </SmallOptionButton>\r\n                    <SmallOptionButton\r\n                      active={timeWindow === TimeWindow.MONTH}\r\n                      onClick={() => setTimeWindow(TimeWindow.MONTH)}\r\n                    >\r\n                      1M\r\n                    </SmallOptionButton>\r\n                    <SmallOptionButton\r\n                      active={timeWindow === TimeWindow.DAY}\r\n                      onClick={() => setTimeWindow(TimeWindow.DAY)}\r\n                    >\r\n                      All\r\n                    </SmallOptionButton>\r\n                  </AutoRow>\r\n                </RowBetween> */}\r\n              </DarkGreyCard>\r\n            </ContentLayout>\r\n            <TYPE.main>Pools</TYPE.main>\r\n            <DarkGreyCard>\r\n              <PoolTable poolDatas={poolDatas} />\r\n            </DarkGreyCard>\r\n            <TYPE.main>Transactions</TYPE.main>\r\n            <DarkGreyCard>\r\n              {transactions ? (\r\n                <TransactionTable transactions={transactions} color={backgroundColor} />\r\n              ) : (\r\n                <LocalLoader fill={false} />\r\n              )}\r\n            </DarkGreyCard>\r\n          </AutoColumn>\r\n        )\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </PageWrapper>\r\n  )\r\n}\r\n","/**\r\n * Constanst for historical data fetching.\r\n *\r\n */\r\n\r\nimport { OpUnitType } from 'dayjs'\r\n\r\nexport const ONE_HOUR_SECONDS = 3600\r\n\r\nexport const TimeWindow: {\r\n  [key: string]: OpUnitType\r\n} = {\r\n  DAY: 'day',\r\n  WEEK: 'week',\r\n  MONTH: 'month',\r\n}\r\n","import React from 'react'\r\nimport { Redirect, RouteComponentProps } from 'react-router-dom'\r\nimport TokenPage from './TokenPage'\r\nimport { isAddress } from 'ethers/lib/utils'\r\n\r\nexport function RedirectInvalidToken(props: RouteComponentProps<{ address: string }>) {\r\n  const {\r\n    match: {\r\n      params: { address },\r\n    },\r\n  } = props\r\n\r\n  if (!isAddress(address)) {\r\n    return <Redirect to={`/`} />\r\n  }\r\n  return <TokenPage {...props} />\r\n}\r\n","import gql from 'graphql-tag'\r\nimport JSBI from 'jsbi'\r\nimport keyBy from 'lodash.keyby'\r\nimport { TickMath, tickToPrice } from '@uniswap/v3-sdk'\r\nimport { Token } from '@uniswap/sdk-core'\r\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\n\r\nconst PRICE_FIXED_DIGITS = 4\r\nconst DEFAULT_SURROUNDING_TICKS = 300\r\nconst FEE_TIER_TO_TICK_SPACING = (feeTier: string): number => {\r\n  switch (feeTier) {\r\n    case '10000':\r\n      return 200\r\n    case '3000':\r\n      return 60\r\n    case '500':\r\n      return 10\r\n    case '100':\r\n      return 1\r\n    default:\r\n      throw Error(`Tick spacing for fee tier ${feeTier} undefined.`)\r\n  }\r\n}\r\n\r\ninterface TickPool {\r\n  tick: string\r\n  feeTier: string\r\n  token0: {\r\n    symbol: string\r\n    id: string\r\n    decimals: string\r\n  }\r\n  token1: {\r\n    symbol: string\r\n    id: string\r\n    decimals: string\r\n  }\r\n  sqrtPrice: string\r\n  liquidity: string\r\n}\r\n\r\ninterface PoolResult {\r\n  pool: TickPool\r\n}\r\n\r\n// Raw tick returned from GQL\r\ninterface Tick {\r\n  tickIdx: string\r\n  liquidityGross: string\r\n  liquidityNet: string\r\n  price0: string\r\n  price1: string\r\n}\r\n\r\ninterface SurroundingTicksResult {\r\n  ticks: Tick[]\r\n}\r\n\r\n// Tick with fields parsed to JSBIs, and active liquidity computed.\r\nexport interface TickProcessed {\r\n  liquidityGross: JSBI\r\n  liquidityNet: JSBI\r\n  tickIdx: number\r\n  liquidityActive: JSBI\r\n  price0: string\r\n  price1: string\r\n}\r\n\r\nconst fetchInitializedTicks = async (\r\n  poolAddress: string,\r\n  tickIdxLowerBound: number,\r\n  tickIdxUpperBound: number,\r\n  client: ApolloClient<NormalizedCacheObject>\r\n): Promise<{ loading?: boolean; error?: boolean; ticks?: Tick[] }> => {\r\n  const tickQuery = gql`\r\n    query surroundingTicks(\r\n      $poolAddress: String!\r\n      $tickIdxLowerBound: BigInt!\r\n      $tickIdxUpperBound: BigInt!\r\n      $skip: Int!\r\n    ) {\r\n      ticks(\r\n        subgraphError: allow\r\n        first: 1000\r\n        skip: $skip\r\n        where: { poolAddress: $poolAddress, tickIdx_lte: $tickIdxUpperBound, tickIdx_gte: $tickIdxLowerBound }\r\n      ) {\r\n        tickIdx\r\n        liquidityGross\r\n        liquidityNet\r\n        price0\r\n        price1\r\n      }\r\n    }\r\n  `\r\n\r\n  let surroundingTicks: Tick[] = []\r\n  let surroundingTicksResult: Tick[] = []\r\n  let skip = 0\r\n  do {\r\n    const { data, error, loading } = await client.query<SurroundingTicksResult>({\r\n      query: tickQuery,\r\n      fetchPolicy: 'cache-first',\r\n      variables: {\r\n        poolAddress,\r\n        tickIdxLowerBound,\r\n        tickIdxUpperBound,\r\n        skip,\r\n      },\r\n    })\r\n\r\n    // console.log({ data, error, loading }, 'Result. Skip: ' + skip)\r\n\r\n    if (loading) {\r\n      continue\r\n    }\r\n\r\n    if (error) {\r\n      return { error: Boolean(error), loading, ticks: surroundingTicksResult }\r\n    }\r\n\r\n    surroundingTicks = data.ticks\r\n    surroundingTicksResult = surroundingTicksResult.concat(surroundingTicks)\r\n    skip += 1000\r\n  } while (surroundingTicks.length > 0)\r\n\r\n  return { ticks: surroundingTicksResult, loading: false, error: false }\r\n}\r\n\r\nexport interface PoolTickData {\r\n  ticksProcessed: TickProcessed[]\r\n  feeTier: string\r\n  tickSpacing: number\r\n  activeTickIdx: number\r\n}\r\n\r\nconst poolQuery = gql`\r\n  query pool($poolAddress: String!) {\r\n    pool(id: $poolAddress) {\r\n      tick\r\n      token0 {\r\n        symbol\r\n        id\r\n        decimals\r\n      }\r\n      token1 {\r\n        symbol\r\n        id\r\n        decimals\r\n      }\r\n      feeTier\r\n      sqrtPrice\r\n      liquidity\r\n    }\r\n  }\r\n`\r\n\r\nexport const fetchTicksSurroundingPrice = async (\r\n  poolAddress: string,\r\n  client: ApolloClient<NormalizedCacheObject>,\r\n  numSurroundingTicks = DEFAULT_SURROUNDING_TICKS\r\n): Promise<{\r\n  loading?: boolean\r\n  error?: boolean\r\n  data?: PoolTickData\r\n}> => {\r\n  const { data: poolResult, error, loading } = await client.query<PoolResult>({\r\n    query: poolQuery,\r\n    variables: {\r\n      poolAddress,\r\n    },\r\n  })\r\n\r\n  if (loading || error || !poolResult) {\r\n    return {\r\n      loading,\r\n      error: Boolean(error),\r\n      data: undefined,\r\n    }\r\n  }\r\n\r\n  const {\r\n    pool: {\r\n      tick: poolCurrentTick,\r\n      feeTier,\r\n      liquidity,\r\n      token0: { id: token0Address, decimals: token0Decimals },\r\n      token1: { id: token1Address, decimals: token1Decimals },\r\n    },\r\n  } = poolResult\r\n\r\n  const poolCurrentTickIdx = parseInt(poolCurrentTick)\r\n  const tickSpacing = FEE_TIER_TO_TICK_SPACING(feeTier)\r\n\r\n  // The pools current tick isn't necessarily a tick that can actually be initialized.\r\n  // Find the nearest valid tick given the tick spacing.\r\n  const activeTickIdx = Math.floor(poolCurrentTickIdx / tickSpacing) * tickSpacing\r\n\r\n  // Our search bounds must take into account fee spacing. i.e. for fee tier 1%, only\r\n  // ticks with index 200, 400, 600, etc can be active.\r\n  const tickIdxLowerBound = activeTickIdx - numSurroundingTicks * tickSpacing\r\n  const tickIdxUpperBound = activeTickIdx + numSurroundingTicks * tickSpacing\r\n\r\n  const initializedTicksResult = await fetchInitializedTicks(poolAddress, tickIdxLowerBound, tickIdxUpperBound, client)\r\n  if (initializedTicksResult.error || initializedTicksResult.loading) {\r\n    return {\r\n      error: initializedTicksResult.error,\r\n      loading: initializedTicksResult.loading,\r\n    }\r\n  }\r\n\r\n  const { ticks: initializedTicks } = initializedTicksResult\r\n\r\n  const tickIdxToInitializedTick = keyBy(initializedTicks, 'tickIdx')\r\n\r\n  const token0 = new Token(1, token0Address, parseInt(token0Decimals))\r\n  const token1 = new Token(1, token1Address, parseInt(token1Decimals))\r\n\r\n  // console.log({ activeTickIdx, poolCurrentTickIdx }, 'Active ticks')\r\n\r\n  // If the pool's tick is MIN_TICK (-887272), then when we find the closest\r\n  // initializable tick to its left, the value would be smaller than MIN_TICK.\r\n  // In this case we must ensure that the prices shown never go below/above.\r\n  // what actual possible from the protocol.\r\n  let activeTickIdxForPrice = activeTickIdx\r\n  if (activeTickIdxForPrice < TickMath.MIN_TICK) {\r\n    activeTickIdxForPrice = TickMath.MIN_TICK\r\n  }\r\n  if (activeTickIdxForPrice > TickMath.MAX_TICK) {\r\n    activeTickIdxForPrice = TickMath.MAX_TICK\r\n  }\r\n\r\n  const activeTickProcessed: TickProcessed = {\r\n    liquidityActive: JSBI.BigInt(liquidity),\r\n    tickIdx: activeTickIdx,\r\n    liquidityNet: JSBI.BigInt(0),\r\n    price0: tickToPrice(token0, token1, activeTickIdxForPrice).toFixed(PRICE_FIXED_DIGITS),\r\n    price1: tickToPrice(token1, token0, activeTickIdxForPrice).toFixed(PRICE_FIXED_DIGITS),\r\n    liquidityGross: JSBI.BigInt(0),\r\n  }\r\n\r\n  // If our active tick happens to be initialized (i.e. there is a position that starts or\r\n  // ends at that tick), ensure we set the gross and net.\r\n  // correctly.\r\n  const activeTick = tickIdxToInitializedTick[activeTickIdx]\r\n  if (activeTick) {\r\n    activeTickProcessed.liquidityGross = JSBI.BigInt(activeTick.liquidityGross)\r\n    activeTickProcessed.liquidityNet = JSBI.BigInt(activeTick.liquidityNet)\r\n  }\r\n\r\n  enum Direction {\r\n    ASC,\r\n    DESC,\r\n  }\r\n\r\n  // Computes the numSurroundingTicks above or below the active tick.\r\n  const computeSurroundingTicks = (\r\n    activeTickProcessed: TickProcessed,\r\n    tickSpacing: number,\r\n    numSurroundingTicks: number,\r\n    direction: Direction\r\n  ) => {\r\n    let previousTickProcessed: TickProcessed = {\r\n      ...activeTickProcessed,\r\n    }\r\n\r\n    // Iterate outwards (either up or down depending on 'Direction') from the active tick,\r\n    // building active liquidity for every tick.\r\n    let processedTicks: TickProcessed[] = []\r\n    for (let i = 0; i < numSurroundingTicks; i++) {\r\n      const currentTickIdx =\r\n        direction == Direction.ASC\r\n          ? previousTickProcessed.tickIdx + tickSpacing\r\n          : previousTickProcessed.tickIdx - tickSpacing\r\n\r\n      if (currentTickIdx < TickMath.MIN_TICK || currentTickIdx > TickMath.MAX_TICK) {\r\n        break\r\n      }\r\n\r\n      const currentTickProcessed: TickProcessed = {\r\n        liquidityActive: previousTickProcessed.liquidityActive,\r\n        tickIdx: currentTickIdx,\r\n        liquidityNet: JSBI.BigInt(0),\r\n        price0: tickToPrice(token0, token1, currentTickIdx).toFixed(PRICE_FIXED_DIGITS),\r\n        price1: tickToPrice(token1, token0, currentTickIdx).toFixed(PRICE_FIXED_DIGITS),\r\n        liquidityGross: JSBI.BigInt(0),\r\n      }\r\n\r\n      // Check if there is an initialized tick at our current tick.\r\n      // If so copy the gross and net liquidity from the initialized tick.\r\n      const currentInitializedTick = tickIdxToInitializedTick[currentTickIdx.toString()]\r\n      if (currentInitializedTick) {\r\n        currentTickProcessed.liquidityGross = JSBI.BigInt(currentInitializedTick.liquidityGross)\r\n        currentTickProcessed.liquidityNet = JSBI.BigInt(currentInitializedTick.liquidityNet)\r\n      }\r\n\r\n      // Update the active liquidity.\r\n      // If we are iterating ascending and we found an initialized tick we immediately apply\r\n      // it to the current processed tick we are building.\r\n      // If we are iterating descending, we don't want to apply the net liquidity until the following tick.\r\n      if (direction == Direction.ASC && currentInitializedTick) {\r\n        currentTickProcessed.liquidityActive = JSBI.add(\r\n          previousTickProcessed.liquidityActive,\r\n          JSBI.BigInt(currentInitializedTick.liquidityNet)\r\n        )\r\n      } else if (direction == Direction.DESC && JSBI.notEqual(previousTickProcessed.liquidityNet, JSBI.BigInt(0))) {\r\n        // We are iterating descending, so look at the previous tick and apply any net liquidity.\r\n        currentTickProcessed.liquidityActive = JSBI.subtract(\r\n          previousTickProcessed.liquidityActive,\r\n          previousTickProcessed.liquidityNet\r\n        )\r\n      }\r\n\r\n      processedTicks.push(currentTickProcessed)\r\n      previousTickProcessed = currentTickProcessed\r\n    }\r\n\r\n    if (direction == Direction.DESC) {\r\n      processedTicks = processedTicks.reverse()\r\n    }\r\n\r\n    return processedTicks\r\n  }\r\n\r\n  const subsequentTicks: TickProcessed[] = computeSurroundingTicks(\r\n    activeTickProcessed,\r\n    tickSpacing,\r\n    numSurroundingTicks,\r\n    Direction.ASC\r\n  )\r\n\r\n  const previousTicks: TickProcessed[] = computeSurroundingTicks(\r\n    activeTickProcessed,\r\n    tickSpacing,\r\n    numSurroundingTicks,\r\n    Direction.DESC\r\n  )\r\n\r\n  const ticksProcessed = previousTicks.concat(activeTickProcessed).concat(subsequentTicks)\r\n\r\n  return {\r\n    data: {\r\n      ticksProcessed,\r\n      feeTier,\r\n      tickSpacing,\r\n      activeTickIdx,\r\n    },\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { ChartEntry } from './index'\r\nimport { PoolData } from 'state/pools/reducer'\r\nimport useTheme from 'hooks/useTheme'\r\nimport styled from 'styled-components'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { RowFixed } from 'components/Row'\r\nimport { TYPE } from 'theme'\r\n\r\nconst Wrapper = styled.div`\r\n  border-radius: 8px;\r\n  padding: 6px 12px;\r\n  color: white;\r\n  width: fit-content;\r\n  font-size: 14px;\r\n  background-color: ${({ theme }) => theme.bg2};\r\n`\r\n\r\ninterface LabelProps {\r\n  x: number\r\n  y: number\r\n  index: number\r\n}\r\n\r\ninterface CurrentPriceLabelProps {\r\n  data: ChartEntry[] | undefined\r\n  chartProps: any\r\n  poolData: PoolData\r\n}\r\n\r\nexport function CurrentPriceLabel({ data, chartProps, poolData }: CurrentPriceLabelProps) {\r\n  const theme = useTheme()\r\n  const labelData = chartProps as LabelProps\r\n  const entryData = data?.[labelData.index]\r\n  if (entryData?.isCurrent) {\r\n    const price0 = entryData.price0\r\n    const price1 = entryData.price1\r\n    return (\r\n      <g>\r\n        <foreignObject x={labelData.x - 80} y={318} width={'100%'} height={100}>\r\n          <Wrapper>\r\n            <AutoColumn gap=\"6px\">\r\n              <RowFixed align=\"center\">\r\n                <TYPE.main mr=\"6px\">Current Price</TYPE.main>\r\n                <div\r\n                  style={{\r\n                    marginTop: '2px',\r\n                    height: '6px',\r\n                    width: '6px',\r\n                    borderRadius: '50%',\r\n                    backgroundColor: theme.pink1,\r\n                  }}\r\n                ></div>\r\n              </RowFixed>\r\n              <TYPE.label>{`1 ${poolData.token0.symbol} = ${Number(price0).toLocaleString(undefined, {\r\n                minimumSignificantDigits: 1,\r\n              })} ${poolData.token1.symbol}`}</TYPE.label>\r\n              <TYPE.label>{`1 ${poolData.token1.symbol} = ${Number(price1).toLocaleString(undefined, {\r\n                minimumSignificantDigits: 1,\r\n              })} ${poolData.token0.symbol}`}</TYPE.label>\r\n            </AutoColumn>\r\n          </Wrapper>\r\n        </foreignObject>\r\n      </g>\r\n    )\r\n  }\r\n  return null\r\n}\r\n","import React from 'react'\r\nimport { PoolData } from 'state/pools/reducer'\r\nimport styled from 'styled-components'\r\nimport { LightCard } from 'components/Card'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { TYPE } from 'theme'\r\nimport { RowBetween } from 'components/Row'\r\nimport { formatAmount } from 'utils/numbers'\r\n\r\nconst TooltipWrapper = styled(LightCard)`\r\n  padding: 12px;\r\n  width: 320px;\r\n  opacity: 0.6;\r\n  font-size: 12px;\r\n  z-index: 10;\r\n`\r\n\r\ninterface CustomToolTipProps {\r\n  chartProps: any\r\n  poolData: PoolData\r\n  currentPrice: number | undefined\r\n}\r\n\r\nexport function CustomToolTip({ chartProps, poolData, currentPrice }: CustomToolTipProps) {\r\n  const theme = useTheme()\r\n  const price0 = chartProps?.payload?.[0]?.payload.price0\r\n  const price1 = chartProps?.payload?.[0]?.payload.price1\r\n  const tvlToken0 = chartProps?.payload?.[0]?.payload.tvlToken0\r\n  const tvlToken1 = chartProps?.payload?.[0]?.payload.tvlToken1\r\n\r\n  return (\r\n    <TooltipWrapper>\r\n      <AutoColumn gap=\"sm\">\r\n        <TYPE.main color={theme.text3}>Tick stats</TYPE.main>\r\n        <RowBetween>\r\n          <TYPE.label>{poolData?.token0?.symbol} Price: </TYPE.label>\r\n          <TYPE.label>\r\n            {price0\r\n              ? Number(price0).toLocaleString(undefined, {\r\n                  minimumSignificantDigits: 1,\r\n                })\r\n              : ''}{' '}\r\n            {poolData?.token1?.symbol}\r\n          </TYPE.label>\r\n        </RowBetween>\r\n        <RowBetween>\r\n          <TYPE.label>{poolData?.token1?.symbol} Price: </TYPE.label>\r\n          <TYPE.label>\r\n            {price1\r\n              ? Number(price1).toLocaleString(undefined, {\r\n                  minimumSignificantDigits: 1,\r\n                })\r\n              : ''}{' '}\r\n            {poolData?.token0?.symbol}\r\n          </TYPE.label>\r\n        </RowBetween>\r\n        {currentPrice && price0 && currentPrice > price1 ? (\r\n          <RowBetween>\r\n            <TYPE.label>{poolData?.token0?.symbol} Locked: </TYPE.label>\r\n            <TYPE.label>\r\n              {tvlToken0 ? formatAmount(tvlToken0) : ''} {poolData?.token0?.symbol}\r\n            </TYPE.label>\r\n          </RowBetween>\r\n        ) : (\r\n          <RowBetween>\r\n            <TYPE.label>{poolData?.token1?.symbol} Locked: </TYPE.label>\r\n            <TYPE.label>\r\n              {tvlToken1 ? formatAmount(tvlToken1) : ''} {poolData?.token1?.symbol}\r\n            </TYPE.label>\r\n          </RowBetween>\r\n        )}\r\n      </AutoColumn>\r\n    </TooltipWrapper>\r\n  )\r\n}\r\n\r\nexport default CustomToolTip\r\n","import { fetchTicksSurroundingPrice, TickProcessed } from 'data/pools/tickData'\r\nimport React, { useEffect, useMemo, useState, useCallback } from 'react'\r\nimport { BarChart, Bar, LabelList, XAxis, Tooltip, ResponsiveContainer, Cell } from 'recharts'\r\nimport Loader from 'components/Loader'\r\nimport styled from 'styled-components'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { usePoolDatas, usePoolTickData } from 'state/pools/hooks'\r\nimport { MAX_UINT128 } from '../../constants/index'\r\nimport { isAddress } from 'utils'\r\nimport { Pool, TickMath, TICK_SPACINGS, FeeAmount } from '@uniswap/v3-sdk'\r\nimport { PoolData } from 'state/pools/reducer'\r\nimport { CurrentPriceLabel } from './CurrentPriceLabel'\r\nimport CustomToolTip from './CustomToolTip'\r\nimport { Token, CurrencyAmount } from '@uniswap/sdk-core'\r\nimport JSBI from 'jsbi'\r\nimport { useClients } from 'state/application/hooks'\r\n\r\nconst Wrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 400px;\r\n`\r\n\r\nconst ControlsWrapper = styled.div`\r\n  position: absolute;\r\n  right: 40px;\r\n  bottom: 100px;\r\n  padding: 4px;\r\n  border-radius: 8px;\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  grid-column-gap: 6px;\r\n`\r\n\r\nconst ActionButton = styled.div<{ disabled?: boolean }>`\r\n  width: 32x;\r\n  border-radius: 50%;\r\n  background-color: black;\r\n  padding: 4px 8px;\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  align-items: center;\r\n  opacity: ${({ disabled }) => (disabled ? 0.4 : 0.9)};\r\n  background-color: ${({ theme, disabled }) => (disabled ? theme.bg3 : theme.bg2)};\r\n  user-select: none;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.4;\r\n  }\r\n`\r\n\r\ninterface DensityChartProps {\r\n  address: string\r\n}\r\n\r\nexport interface ChartEntry {\r\n  index: number\r\n  isCurrent: boolean\r\n  activeLiquidity: number\r\n  price0: number\r\n  price1: number\r\n  tvlToken0: number\r\n  tvlToken1: number\r\n}\r\n\r\ninterface ZoomStateProps {\r\n  left: number\r\n  right: number\r\n  refAreaLeft: string | number\r\n  refAreaRight: string | number\r\n}\r\n\r\nconst INITIAL_TICKS_TO_FETCH = 200\r\nconst ZOOM_INTERVAL = 20\r\n\r\nconst initialState = {\r\n  left: 0,\r\n  right: INITIAL_TICKS_TO_FETCH * 2 + 1,\r\n  refAreaLeft: '',\r\n  refAreaRight: '',\r\n}\r\n\r\nexport default function DensityChart({ address }: DensityChartProps) {\r\n  const theme = useTheme()\r\n  const { dataClient } = useClients()\r\n\r\n  // poolData\r\n  const poolData: PoolData = usePoolDatas([address])[0]\r\n  const formattedAddress0 = isAddress(poolData.token0.address)\r\n  const formattedAddress1 = isAddress(poolData.token1.address)\r\n  const feeTier = poolData?.feeTier\r\n\r\n  // parsed tokens\r\n  const token0 = useMemo(() => {\r\n    return poolData && formattedAddress0 && formattedAddress1\r\n      ? new Token(1, formattedAddress0, poolData.token0.decimals)\r\n      : undefined\r\n  }, [formattedAddress0, formattedAddress1, poolData])\r\n  const token1 = useMemo(() => {\r\n    return poolData && formattedAddress1 && formattedAddress1\r\n      ? new Token(1, formattedAddress1, poolData.token1.decimals)\r\n      : undefined\r\n  }, [formattedAddress1, poolData])\r\n\r\n  // tick data tracking\r\n  const [poolTickData, updatePoolTickData] = usePoolTickData(address)\r\n  const [ticksToFetch, setTicksToFetch] = useState(INITIAL_TICKS_TO_FETCH)\r\n  const amountTicks = ticksToFetch * 2 + 1\r\n\r\n  const [loading, setLoading] = useState(false)\r\n  const [zoomState, setZoomState] = useState<ZoomStateProps>(initialState)\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { data } = await fetchTicksSurroundingPrice(address, dataClient, ticksToFetch)\r\n      if (data) {\r\n        updatePoolTickData(address, data)\r\n      }\r\n    }\r\n    if (!poolTickData || (poolTickData && poolTickData.ticksProcessed.length < amountTicks)) {\r\n      fetch()\r\n    }\r\n  }, [address, poolTickData, updatePoolTickData, ticksToFetch, amountTicks, dataClient])\r\n\r\n  const [formattedData, setFormattedData] = useState<ChartEntry[] | undefined>()\r\n  useEffect(() => {\r\n    async function formatData() {\r\n      if (poolTickData) {\r\n        const newData = await Promise.all(\r\n          poolTickData.ticksProcessed.map(async (t: TickProcessed, i) => {\r\n            const active = t.tickIdx === poolTickData.activeTickIdx\r\n            const sqrtPriceX96 = TickMath.getSqrtRatioAtTick(t.tickIdx)\r\n            const feeAmount: FeeAmount = poolData.feeTier\r\n            const mockTicks = [\r\n              {\r\n                index: t.tickIdx - TICK_SPACINGS[feeAmount],\r\n                liquidityGross: t.liquidityGross,\r\n                liquidityNet: JSBI.multiply(t.liquidityNet, JSBI.BigInt('-1')),\r\n              },\r\n              {\r\n                index: t.tickIdx,\r\n                liquidityGross: t.liquidityGross,\r\n                liquidityNet: t.liquidityNet,\r\n              },\r\n            ]\r\n            const pool =\r\n              token0 && token1 && feeTier\r\n                ? new Pool(token0, token1, feeTier, sqrtPriceX96, t.liquidityActive, t.tickIdx, mockTicks)\r\n                : undefined\r\n            const nextSqrtX96 = poolTickData.ticksProcessed[i - 1]\r\n              ? TickMath.getSqrtRatioAtTick(poolTickData.ticksProcessed[i - 1].tickIdx)\r\n              : undefined\r\n            const maxAmountToken0 = token0 ? CurrencyAmount.fromRawAmount(token0, MAX_UINT128.toString()) : undefined\r\n            const outputRes0 =\r\n              pool && maxAmountToken0 ? await pool.getOutputAmount(maxAmountToken0, nextSqrtX96) : undefined\r\n\r\n            const token1Amount = outputRes0?.[0] as CurrencyAmount<Token> | undefined\r\n\r\n            const amount0 = token1Amount ? parseFloat(token1Amount.toExact()) * parseFloat(t.price1) : 0\r\n            const amount1 = token1Amount ? parseFloat(token1Amount.toExact()) : 0\r\n\r\n            return {\r\n              index: i,\r\n              isCurrent: active,\r\n              activeLiquidity: parseFloat(t.liquidityActive.toString()),\r\n              price0: parseFloat(t.price0),\r\n              price1: parseFloat(t.price1),\r\n              tvlToken0: amount0,\r\n              tvlToken1: amount1,\r\n            }\r\n          })\r\n        )\r\n        // offset the values to line off bars with TVL used to swap across bar\r\n        newData?.map((entry, i) => {\r\n          if (i > 0) {\r\n            newData[i - 1].tvlToken0 = entry.tvlToken0\r\n            newData[i - 1].tvlToken1 = entry.tvlToken1\r\n          }\r\n        })\r\n\r\n        if (newData) {\r\n          if (loading) {\r\n            setLoading(false)\r\n          }\r\n          setFormattedData(newData)\r\n        }\r\n        return\r\n      } else {\r\n        return []\r\n      }\r\n    }\r\n    if (!formattedData) {\r\n      formatData()\r\n    }\r\n  }, [feeTier, formattedData, loading, poolData.feeTier, poolTickData, token0, token1])\r\n\r\n  const atZoomMax = zoomState.left + ZOOM_INTERVAL >= zoomState.right - ZOOM_INTERVAL - 1\r\n  const atZoomMin = zoomState.left - ZOOM_INTERVAL < 0\r\n\r\n  const handleZoomIn = useCallback(() => {\r\n    !atZoomMax &&\r\n      setZoomState({\r\n        ...zoomState,\r\n        left: zoomState.left + ZOOM_INTERVAL,\r\n        right: zoomState.right - ZOOM_INTERVAL,\r\n      })\r\n  }, [zoomState, atZoomMax])\r\n\r\n  const handleZoomOut = useCallback(() => {\r\n    if (atZoomMin) {\r\n      setLoading(true)\r\n      setTicksToFetch(ticksToFetch + ZOOM_INTERVAL)\r\n      setFormattedData(undefined)\r\n      setZoomState({\r\n        ...zoomState,\r\n        left: 0,\r\n        right: amountTicks,\r\n      })\r\n    } else {\r\n      setZoomState({\r\n        ...zoomState,\r\n        left: zoomState.left - ZOOM_INTERVAL,\r\n        right: zoomState.right + ZOOM_INTERVAL,\r\n      })\r\n    }\r\n  }, [amountTicks, atZoomMin, ticksToFetch, zoomState])\r\n\r\n  const zoomedData = useMemo(() => {\r\n    if (formattedData) {\r\n      return formattedData.slice(zoomState.left, zoomState.right)\r\n    }\r\n    return undefined\r\n  }, [formattedData, zoomState.left, zoomState.right])\r\n\r\n  // reset data on address change\r\n  useEffect(() => {\r\n    setFormattedData(undefined)\r\n  }, [address])\r\n\r\n  if (!poolTickData) {\r\n    return <Loader />\r\n  }\r\n\r\n  const CustomBar = ({\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    fill,\r\n  }: {\r\n    x: number\r\n    y: number\r\n    width: number\r\n    height: number\r\n    fill: string\r\n  }) => {\r\n    return (\r\n      <g>\r\n        <rect x={x} y={y} fill={fill} width={width} height={height} rx=\"2\" />\r\n      </g>\r\n    )\r\n  }\r\n  return (\r\n    <Wrapper>\r\n      {!loading ? (\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <BarChart\r\n            width={500}\r\n            height={300}\r\n            data={zoomedData}\r\n            margin={{\r\n              top: 5,\r\n              right: 30,\r\n              left: 20,\r\n              bottom: 60,\r\n            }}\r\n          >\r\n            <Tooltip\r\n              content={(props) => (\r\n                <CustomToolTip chartProps={props} poolData={poolData} currentPrice={poolData.token0Price} />\r\n              )}\r\n            />\r\n            <XAxis reversed={true} tick={false} />\r\n            <Bar\r\n              dataKey=\"activeLiquidity\"\r\n              fill=\"#2172E5\"\r\n              isAnimationActive={false}\r\n              shape={(props) => {\r\n                // eslint-disable-next-line react/prop-types\r\n                return <CustomBar height={props.height} width={props.width} x={props.x} y={props.y} fill={props.fill} />\r\n              }}\r\n            >\r\n              {zoomedData?.map((entry, index) => {\r\n                return <Cell key={`cell-${index}`} fill={entry.isCurrent ? theme.pink1 : theme.blue1} />\r\n              })}\r\n              <LabelList\r\n                dataKey=\"activeLiquidity\"\r\n                position=\"inside\"\r\n                content={(props) => <CurrentPriceLabel chartProps={props} poolData={poolData} data={zoomedData} />}\r\n              />\r\n            </Bar>\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n      <ControlsWrapper>\r\n        <ActionButton disabled={false} onClick={handleZoomOut}>\r\n          -\r\n        </ActionButton>\r\n        <ActionButton disabled={atZoomMax} onClick={handleZoomIn}>\r\n          +\r\n        </ActionButton>\r\n      </ControlsWrapper>\r\n    </Wrapper>\r\n  )\r\n}\r\n","import React, { useMemo, useState, useEffect } from 'react'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { useColor } from 'hooks/useColor'\r\nimport { ThemedBackground, PageWrapper } from 'pages/styled'\r\nimport { feeTierPercent, getEtherscanLink } from 'utils'\r\nimport { AutoColumn } from 'components/Column'\r\nimport { RowBetween, RowFixed, AutoRow } from 'components/Row'\r\nimport { TYPE, StyledInternalLink } from 'theme'\r\nimport Loader, { LocalLoader } from 'components/Loader'\r\nimport { ExternalLink, Download } from 'react-feather'\r\nimport { ExternalLink as StyledExternalLink } from '../../theme/components'\r\nimport useTheme from 'hooks/useTheme'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport { formatDollarAmount, formatAmount } from 'utils/numbers'\r\nimport Percent from 'components/Percent'\r\nimport { ButtonPrimary, ButtonGray, SavedIcon } from 'components/Button'\r\nimport { DarkGreyCard, GreyCard, GreyBadge } from 'components/Card'\r\nimport { usePoolDatas, usePoolChartData, usePoolTransactions } from 'state/pools/hooks'\r\nimport LineChart from 'components/LineChart/alt'\r\nimport { unixToDate } from 'utils/date'\r\nimport { ToggleWrapper, ToggleElementFree } from 'components/Toggle/index'\r\nimport BarChart from 'components/BarChart/alt'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport TransactionTable from 'components/TransactionsTable'\r\nimport { useSavedPools } from 'state/user/hooks'\r\nimport DensityChart from 'components/DensityChart'\r\nimport { MonoSpace } from 'components/shared'\r\nimport { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { networkPrefix } from 'utils/networkPrefix'\r\nimport { ArbitrumNetworkInfo, EthereumNetworkInfo } from 'constants/networks'\r\nimport { GenericImageWrapper } from 'components/Logo'\r\n\r\nconst ContentLayout = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 300px 1fr;\r\n  grid-gap: 1em;\r\n\r\n  @media screen and (max-width: 800px) {\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 1fr 1fr;\r\n  }\r\n`\r\n\r\nconst TokenButton = styled(GreyCard)`\r\n  padding: 8px 12px;\r\n  border-radius: 10px;\r\n  :hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n`\r\n\r\nconst ResponsiveRow = styled(RowBetween)`\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    row-gap: 24px;\r\n    width: 100%:\r\n  `};\r\n`\r\n\r\nconst ToggleRow = styled(RowBetween)`\r\n  @media screen and (max-width: 600px) {\r\n    flex-direction: column;\r\n  }\r\n`\r\n\r\nenum ChartView {\r\n  TVL,\r\n  VOL,\r\n  PRICE,\r\n  DENSITY,\r\n  FEES,\r\n}\r\n\r\nexport default function PoolPage({\r\n  match: {\r\n    params: { address },\r\n  },\r\n}: RouteComponentProps<{ address: string }>) {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  // theming\r\n  const backgroundColor = useColor()\r\n  const theme = useTheme()\r\n\r\n  // token data\r\n  const poolData = usePoolDatas([address])[0]\r\n  const chartData = usePoolChartData(address)\r\n  const transactions = usePoolTransactions(address)\r\n\r\n  const [view, setView] = useState(ChartView.VOL)\r\n  const [latestValue, setLatestValue] = useState<number | undefined>()\r\n  const [valueLabel, setValueLabel] = useState<string | undefined>()\r\n\r\n  const formattedTvlData = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.totalValueLockedUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  const formattedVolumeData = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.volumeUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  const formattedFeesUSD = useMemo(() => {\r\n    if (chartData) {\r\n      return chartData.map((day) => {\r\n        return {\r\n          time: unixToDate(day.date),\r\n          value: day.feesUSD,\r\n        }\r\n      })\r\n    } else {\r\n      return []\r\n    }\r\n  }, [chartData])\r\n\r\n  //watchlist\r\n  const [savedPools, addSavedPool] = useSavedPools()\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <ThemedBackground backgroundColor={backgroundColor} />\r\n      {poolData ? (\r\n        <AutoColumn gap=\"32px\">\r\n          <RowBetween>\r\n            <AutoRow gap=\"4px\">\r\n              <StyledInternalLink to={networkPrefix(activeNetwork)}>\r\n                <TYPE.main>{`Home > `}</TYPE.main>\r\n              </StyledInternalLink>\r\n              <StyledInternalLink to={networkPrefix(activeNetwork) + 'pools'}>\r\n                <TYPE.label>{` Pools `}</TYPE.label>\r\n              </StyledInternalLink>\r\n              <TYPE.main>{` > `}</TYPE.main>\r\n              <TYPE.label>{` ${poolData.token0.symbol} / ${poolData.token1.symbol} ${feeTierPercent(\r\n                poolData.feeTier\r\n              )} `}</TYPE.label>\r\n            </AutoRow>\r\n            <RowFixed gap=\"10px\" align=\"center\">\r\n              <SavedIcon fill={savedPools.includes(address)} onClick={() => addSavedPool(address)} />\r\n              <StyledExternalLink href={getEtherscanLink(1, address, 'address', activeNetwork)}>\r\n                <ExternalLink stroke={theme.text2} size={'17px'} style={{ marginLeft: '12px' }} />\r\n              </StyledExternalLink>\r\n            </RowFixed>\r\n          </RowBetween>\r\n          <ResponsiveRow align=\"flex-end\">\r\n            <AutoColumn gap=\"lg\">\r\n              <RowFixed>\r\n                <DoubleCurrencyLogo address0={poolData.token0.address} address1={poolData.token1.address} size={24} />\r\n                <TYPE.label\r\n                  ml=\"8px\"\r\n                  mr=\"8px\"\r\n                  fontSize=\"24px\"\r\n                >{` ${poolData.token0.symbol} / ${poolData.token1.symbol} `}</TYPE.label>\r\n                <GreyBadge>{feeTierPercent(poolData.feeTier)}</GreyBadge>\r\n                {activeNetwork === EthereumNetworkInfo ? null : (\r\n                  <GenericImageWrapper src={activeNetwork.imageURL} style={{ marginLeft: '8px' }} size={'26px'} />\r\n                )}\r\n              </RowFixed>\r\n              <ResponsiveRow>\r\n                <StyledInternalLink to={networkPrefix(activeNetwork) + 'tokens/' + poolData.token0.address}>\r\n                  <TokenButton>\r\n                    <RowFixed>\r\n                      <CurrencyLogo address={poolData.token0.address} size={'20px'} />\r\n                      <TYPE.label fontSize=\"16px\" ml=\"4px\" style={{ whiteSpace: 'nowrap' }} width={'fit-content'}>\r\n                        {`1 ${poolData.token0.symbol} =  ${formatAmount(poolData.token1Price, 4)} ${\r\n                          poolData.token1.symbol\r\n                        }`}\r\n                      </TYPE.label>\r\n                    </RowFixed>\r\n                  </TokenButton>\r\n                </StyledInternalLink>\r\n                <StyledInternalLink to={networkPrefix(activeNetwork) + 'tokens/' + poolData.token1.address}>\r\n                  <TokenButton ml=\"10px\">\r\n                    <RowFixed>\r\n                      <CurrencyLogo address={poolData.token1.address} size={'20px'} />\r\n                      <TYPE.label fontSize=\"16px\" ml=\"4px\" style={{ whiteSpace: 'nowrap' }} width={'fit-content'}>\r\n                        {`1 ${poolData.token1.symbol} =  ${formatAmount(poolData.token0Price, 4)} ${\r\n                          poolData.token0.symbol\r\n                        }`}\r\n                      </TYPE.label>\r\n                    </RowFixed>\r\n                  </TokenButton>\r\n                </StyledInternalLink>\r\n              </ResponsiveRow>\r\n            </AutoColumn>\r\n            {activeNetwork !== EthereumNetworkInfo ? null : (\r\n              <RowFixed>\r\n                <StyledExternalLink\r\n                  href={`https://app.uniswap.org/#/add/${poolData.token0.address}/${poolData.token1.address}/${poolData.feeTier}`}\r\n                >\r\n                  <ButtonGray width=\"170px\" mr=\"12px\" style={{ height: '44px' }}>\r\n                    <RowBetween>\r\n                      <Download size={24} />\r\n                      <div style={{ display: 'flex', alignItems: 'center' }}>Add Liquidity</div>\r\n                    </RowBetween>\r\n                  </ButtonGray>\r\n                </StyledExternalLink>\r\n                <StyledExternalLink\r\n                  href={`https://app.uniswap.org/#/swap?inputCurrency=${poolData.token0.address}&outputCurrency=${poolData.token1.address}`}\r\n                >\r\n                  <ButtonPrimary width=\"100px\" style={{ height: '44px' }}>\r\n                    Trade\r\n                  </ButtonPrimary>\r\n                </StyledExternalLink>\r\n              </RowFixed>\r\n            )}\r\n          </ResponsiveRow>\r\n          <ContentLayout>\r\n            <DarkGreyCard>\r\n              <AutoColumn gap=\"lg\">\r\n                <GreyCard padding=\"16px\">\r\n                  <AutoColumn gap=\"md\">\r\n                    <TYPE.main>Total Tokens Locked</TYPE.main>\r\n                    <RowBetween>\r\n                      <RowFixed>\r\n                        <CurrencyLogo address={poolData.token0.address} size={'20px'} />\r\n                        <TYPE.label fontSize=\"14px\" ml=\"8px\">\r\n                          {poolData.token0.symbol}\r\n                        </TYPE.label>\r\n                      </RowFixed>\r\n                      <TYPE.label fontSize=\"14px\">{formatAmount(poolData.tvlToken0)}</TYPE.label>\r\n                    </RowBetween>\r\n                    <RowBetween>\r\n                      <RowFixed>\r\n                        <CurrencyLogo address={poolData.token1.address} size={'20px'} />\r\n                        <TYPE.label fontSize=\"14px\" ml=\"8px\">\r\n                          {poolData.token1.symbol}\r\n                        </TYPE.label>\r\n                      </RowFixed>\r\n                      <TYPE.label fontSize=\"14px\">{formatAmount(poolData.tvlToken1)}</TYPE.label>\r\n                    </RowBetween>\r\n                  </AutoColumn>\r\n                </GreyCard>\r\n                <AutoColumn gap=\"4px\">\r\n                  <TYPE.main fontWeight={400}>TVL</TYPE.main>\r\n                  <TYPE.label fontSize=\"24px\">{formatDollarAmount(poolData.tvlUSD)}</TYPE.label>\r\n                  <Percent value={poolData.tvlUSDChange} />\r\n                </AutoColumn>\r\n                <AutoColumn gap=\"4px\">\r\n                  <TYPE.main fontWeight={400}>Volume 24h</TYPE.main>\r\n                  <TYPE.label fontSize=\"24px\">{formatDollarAmount(poolData.volumeUSD)}</TYPE.label>\r\n                  <Percent value={poolData.volumeUSDChange} />\r\n                </AutoColumn>\r\n                <AutoColumn gap=\"4px\">\r\n                  <TYPE.main fontWeight={400}>24h Fees</TYPE.main>\r\n                  <TYPE.label fontSize=\"24px\">\r\n                    {formatDollarAmount(poolData.volumeUSD * (poolData.feeTier / 1000000))}\r\n                  </TYPE.label>\r\n                </AutoColumn>\r\n              </AutoColumn>\r\n            </DarkGreyCard>\r\n            <DarkGreyCard>\r\n              <ToggleRow align=\"flex-start\">\r\n                <AutoColumn>\r\n                  <TYPE.label fontSize=\"24px\" height=\"30px\">\r\n                    <MonoSpace>\r\n                      {latestValue\r\n                        ? formatDollarAmount(latestValue)\r\n                        : view === ChartView.VOL\r\n                        ? formatDollarAmount(formattedVolumeData[formattedVolumeData.length - 1]?.value)\r\n                        : view === ChartView.DENSITY\r\n                        ? ''\r\n                        : formatDollarAmount(formattedTvlData[formattedTvlData.length - 1]?.value)}{' '}\r\n                    </MonoSpace>\r\n                  </TYPE.label>\r\n                  <TYPE.main height=\"20px\" fontSize=\"12px\">\r\n                    {valueLabel ? <MonoSpace>{valueLabel} (UTC)</MonoSpace> : ''}\r\n                  </TYPE.main>\r\n                </AutoColumn>\r\n                <ToggleWrapper width=\"240px\">\r\n                  <ToggleElementFree\r\n                    isActive={view === ChartView.VOL}\r\n                    fontSize=\"12px\"\r\n                    onClick={() => (view === ChartView.VOL ? setView(ChartView.TVL) : setView(ChartView.VOL))}\r\n                  >\r\n                    Volume\r\n                  </ToggleElementFree>\r\n                  <ToggleElementFree\r\n                    isActive={view === ChartView.TVL}\r\n                    fontSize=\"12px\"\r\n                    onClick={() => (view === ChartView.TVL ? setView(ChartView.DENSITY) : setView(ChartView.TVL))}\r\n                  >\r\n                    TVL\r\n                  </ToggleElementFree>\r\n                  {activeNetwork === ArbitrumNetworkInfo ? null : (\r\n                    <ToggleElementFree\r\n                      isActive={view === ChartView.DENSITY}\r\n                      fontSize=\"12px\"\r\n                      onClick={() => (view === ChartView.DENSITY ? setView(ChartView.VOL) : setView(ChartView.DENSITY))}\r\n                    >\r\n                      Liquidity\r\n                    </ToggleElementFree>\r\n                  )}\r\n                  <ToggleElementFree\r\n                    isActive={view === ChartView.FEES}\r\n                    fontSize=\"12px\"\r\n                    onClick={() => (view === ChartView.FEES ? setView(ChartView.TVL) : setView(ChartView.FEES))}\r\n                  >\r\n                    Fees\r\n                  </ToggleElementFree>\r\n                </ToggleWrapper>\r\n              </ToggleRow>\r\n              {view === ChartView.TVL ? (\r\n                <LineChart\r\n                  data={formattedTvlData}\r\n                  setLabel={setValueLabel}\r\n                  color={backgroundColor}\r\n                  minHeight={340}\r\n                  setValue={setLatestValue}\r\n                  value={latestValue}\r\n                  label={valueLabel}\r\n                />\r\n              ) : view === ChartView.VOL ? (\r\n                <BarChart\r\n                  data={formattedVolumeData}\r\n                  color={backgroundColor}\r\n                  minHeight={340}\r\n                  setValue={setLatestValue}\r\n                  setLabel={setValueLabel}\r\n                  value={latestValue}\r\n                  label={valueLabel}\r\n                />\r\n              ) : view === ChartView.FEES ? (\r\n                <BarChart\r\n                  data={formattedFeesUSD}\r\n                  color={backgroundColor}\r\n                  minHeight={340}\r\n                  setValue={setLatestValue}\r\n                  setLabel={setValueLabel}\r\n                  value={latestValue}\r\n                  label={valueLabel}\r\n                />\r\n              ) : (\r\n                <DensityChart address={address} />\r\n              )}\r\n            </DarkGreyCard>\r\n          </ContentLayout>\r\n          <TYPE.main fontSize=\"24px\">Transactions</TYPE.main>\r\n          <DarkGreyCard>\r\n            {transactions ? <TransactionTable transactions={transactions} /> : <LocalLoader fill={false} />}\r\n          </DarkGreyCard>\r\n        </AutoColumn>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </PageWrapper>\r\n  )\r\n}\r\n","import React, { Suspense, useState, useEffect } from 'react'\r\nimport { Route, Switch, useLocation } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport GoogleAnalyticsReporter from '../components/analytics/GoogleAnalyticsReporter'\r\nimport Header from '../components/Header'\r\nimport URLWarning from '../components/Header/URLWarning'\r\nimport Popups from '../components/Popups'\r\nimport DarkModeQueryParamReader from '../theme/DarkModeQueryParamReader'\r\nimport Home from './Home'\r\nimport PoolsOverview from './Pool/PoolsOverview'\r\nimport TokensOverview from './Token/TokensOverview'\r\nimport TopBar from 'components/Header/TopBar'\r\nimport { RedirectInvalidToken } from './Token/redirects'\r\nimport { LocalLoader } from 'components/Loader'\r\nimport PoolPage from './Pool/PoolPage'\r\nimport { ExternalLink, TYPE } from 'theme'\r\nimport { useActiveNetworkVersion, useSubgraphStatus } from 'state/application/hooks'\r\nimport { DarkGreyCard } from 'components/Card'\r\nimport { SUPPORTED_NETWORK_VERSIONS, EthereumNetworkInfo, OptimismNetworkInfo } from 'constants/networks'\r\n\r\nconst AppWrapper = styled.div`\r\n  display: flex;\r\n  flex-flow: column;\r\n  align-items: center;\r\n  overflow-x: hidden;\r\n  min-height: 100vh;\r\n`\r\n\r\nconst HeaderWrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  width: 100%;\r\n  position: fixed;\r\n  justify-content: space-between;\r\n  z-index: 2;\r\n`\r\n\r\nconst BodyWrapper = styled.div<{ warningActive?: boolean }>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding-top: 40px;\r\n  margin-top: ${({ warningActive }) => (warningActive ? '140px' : '100px')};\r\n  align-items: center;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  z-index: 1;\r\n\r\n  > * {\r\n    max-width: 1200px;\r\n  }\r\n\r\n  @media (max-width: 1080px) {\r\n    padding-top: 2rem;\r\n    margin-top: 140px;\r\n  }\r\n`\r\n\r\nconst Marginer = styled.div`\r\n  margin-top: 5rem;\r\n`\r\n\r\nconst Hide1080 = styled.div`\r\n  @media (max-width: 1080px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst WarningWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n`\r\n\r\nconst WarningBanner = styled.div`\r\n  background-color: ${({ theme }) => theme.bg3};\r\n  padding: 1rem;\r\n  color: white;\r\n  font-size: 14px;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-weight: 500;\r\n`\r\n\r\nconst BLOCK_DIFFERENCE_THRESHOLD = 30\r\n\r\nexport default function App() {\r\n  // pretend load buffer\r\n  const [loading, setLoading] = useState(true)\r\n  useEffect(() => {\r\n    setTimeout(() => setLoading(false), 1300)\r\n  }, [])\r\n\r\n  // update network based on route\r\n  // TEMP - find better way to do this\r\n  const location = useLocation()\r\n  const [activeNetwork, setActiveNetwork] = useActiveNetworkVersion()\r\n  useEffect(() => {\r\n    if (location.pathname === '/') {\r\n      setActiveNetwork(EthereumNetworkInfo)\r\n    } else {\r\n      SUPPORTED_NETWORK_VERSIONS.map((n) => {\r\n        if (location.pathname.includes(n.route.toLocaleLowerCase())) {\r\n          setActiveNetwork(n)\r\n        }\r\n      })\r\n    }\r\n  }, [location.pathname, setActiveNetwork])\r\n\r\n  // subgraph health\r\n  const [subgraphStatus] = useSubgraphStatus()\r\n\r\n  const showNotSyncedWarning =\r\n    subgraphStatus.headBlock && subgraphStatus.syncedBlock && activeNetwork === OptimismNetworkInfo\r\n      ? subgraphStatus.headBlock - subgraphStatus.syncedBlock > BLOCK_DIFFERENCE_THRESHOLD\r\n      : false\r\n\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <Route component={GoogleAnalyticsReporter} />\r\n      <Route component={DarkModeQueryParamReader} />\r\n      {loading ? (\r\n        <LocalLoader fill={true} />\r\n      ) : (\r\n        <AppWrapper>\r\n          <URLWarning />\r\n          <HeaderWrapper>\r\n            {showNotSyncedWarning && (\r\n              <WarningWrapper>\r\n                <WarningBanner>\r\n                  {`Warning: \r\n                  Data has only synced to  block ${subgraphStatus.syncedBlock} (out of ${subgraphStatus.headBlock}). Please check back soon.`}\r\n                </WarningBanner>\r\n              </WarningWrapper>\r\n            )}\r\n            <Hide1080>\r\n              <TopBar />\r\n            </Hide1080>\r\n            <Header />\r\n          </HeaderWrapper>\r\n          {subgraphStatus.available === false ? (\r\n            <AppWrapper>\r\n              <BodyWrapper>\r\n                <DarkGreyCard style={{ maxWidth: '340px' }}>\r\n                  <TYPE.label>\r\n                    The Graph hosted network which provides data for this site is temporarily experiencing issues. Check\r\n                    current status{' '}\r\n                    <ExternalLink href=\"https://thegraph.com/hosted-service/subgraph/uniswap/uniswap-v3\">\r\n                      here.\r\n                    </ExternalLink>\r\n                  </TYPE.label>\r\n                </DarkGreyCard>\r\n              </BodyWrapper>\r\n            </AppWrapper>\r\n          ) : (\r\n            <BodyWrapper warningActive={showNotSyncedWarning}>\r\n              <Popups />\r\n              <Switch>\r\n                <Route exact strict path=\"/:networkID?/pools/:address\" component={PoolPage} />\r\n                <Route exact strict path=\"/:networkID?/pools\" component={PoolsOverview} />\r\n                <Route exact strict path=\"/:networkID?/tokens/:address\" component={RedirectInvalidToken} />\r\n                <Route exact strict path=\"/:networkID?/tokens\" component={TokensOverview} />\r\n                <Route exact path=\"/:networkID?\" component={Home} />\r\n              </Switch>\r\n              <Marginer />\r\n            </BodyWrapper>\r\n          )}\r\n        </AppWrapper>\r\n      )}\r\n    </Suspense>\r\n  )\r\n}\r\n","import { createReducer, nanoid } from '@reduxjs/toolkit'\r\nimport { NetworkInfo } from 'constants/networks'\r\nimport {\r\n  addPopup,\r\n  PopupContent,\r\n  removePopup,\r\n  updateBlockNumber,\r\n  updateSubgraphStatus,\r\n  ApplicationModal,\r\n  setOpenModal,\r\n  updateActiveNetworkVersion,\r\n} from './actions'\r\nimport { EthereumNetworkInfo } from '../../constants/networks'\r\n\r\ntype PopupList = Array<{ key: string; show: boolean; content: PopupContent; removeAfterMs: number | null }>\r\n\r\nexport interface ApplicationState {\r\n  readonly blockNumber: { readonly [chainId: number]: number }\r\n  readonly popupList: PopupList\r\n  readonly openModal: ApplicationModal | null\r\n  readonly subgraphStatus: {\r\n    available: boolean | null\r\n    syncedBlock: number | undefined\r\n    headBlock: number | undefined\r\n  }\r\n  readonly activeNetworkVersion: NetworkInfo\r\n}\r\n\r\nconst initialState: ApplicationState = {\r\n  blockNumber: {},\r\n  popupList: [],\r\n  openModal: null,\r\n  subgraphStatus: {\r\n    available: null,\r\n    syncedBlock: undefined,\r\n    headBlock: undefined,\r\n  },\r\n  activeNetworkVersion: EthereumNetworkInfo,\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(updateBlockNumber, (state, action) => {\r\n      const { chainId, blockNumber } = action.payload\r\n      if (typeof state.blockNumber[chainId] !== 'number') {\r\n        state.blockNumber[chainId] = blockNumber\r\n      } else {\r\n        state.blockNumber[chainId] = Math.max(blockNumber, state.blockNumber[chainId])\r\n      }\r\n    })\r\n    .addCase(setOpenModal, (state, action) => {\r\n      state.openModal = action.payload\r\n    })\r\n    .addCase(addPopup, (state, { payload: { content, key, removeAfterMs = 15000 } }) => {\r\n      state.popupList = (key ? state.popupList.filter((popup) => popup.key !== key) : state.popupList).concat([\r\n        {\r\n          key: key || nanoid(),\r\n          show: true,\r\n          content,\r\n          removeAfterMs,\r\n        },\r\n      ])\r\n    })\r\n    .addCase(removePopup, (state, { payload: { key } }) => {\r\n      state.popupList.forEach((p) => {\r\n        if (p.key === key) {\r\n          p.show = false\r\n        }\r\n      })\r\n    })\r\n    .addCase(updateSubgraphStatus, (state, { payload: { available, syncedBlock, headBlock } }) => {\r\n      state.subgraphStatus = {\r\n        available,\r\n        syncedBlock,\r\n        headBlock,\r\n      }\r\n    })\r\n    .addCase(updateActiveNetworkVersion, (state, { payload: { activeNetworkVersion } }) => {\r\n      state.activeNetworkVersion = activeNetworkVersion\r\n    })\r\n)\r\n","import { createAction } from '@reduxjs/toolkit'\r\n\r\n// fired once when the app reloads but before the app renders\r\n// allows any updates to be applied to store data loaded from localStorage\r\nexport const updateVersion = createAction<void>('global/updateVersion')\r\n","import { createReducer } from '@reduxjs/toolkit'\r\nimport { updateVersion } from '../global/actions'\r\nimport {\r\n  addSerializedPair,\r\n  addSerializedToken,\r\n  removeSerializedPair,\r\n  removeSerializedToken,\r\n  SerializedPair,\r\n  SerializedToken,\r\n  updateMatchesDarkMode,\r\n  updateUserDarkMode,\r\n  toggleURLWarning,\r\n  addSavedToken,\r\n  addSavedPool,\r\n} from './actions'\r\n\r\nconst currentTimestamp = () => new Date().getTime()\r\n\r\nexport interface UserState {\r\n  // the timestamp of the last updateVersion action\r\n  lastUpdateVersionTimestamp?: number\r\n\r\n  userDarkMode: boolean | null // the user's choice for dark mode or light mode\r\n  matchesDarkMode: boolean // whether the dark mode media query matches\r\n\r\n  tokens: {\r\n    [chainId: number]: {\r\n      [address: string]: SerializedToken\r\n    }\r\n  }\r\n\r\n  pairs: {\r\n    [chainId: number]: {\r\n      // keyed by token0Address:token1Address\r\n      [key: string]: SerializedPair\r\n    }\r\n  }\r\n\r\n  savedTokens: string[]\r\n  savedPools: string[]\r\n\r\n  timestamp: number\r\n  URLWarningVisible: boolean\r\n}\r\n\r\nfunction pairKey(token0Address: string, token1Address: string) {\r\n  return `${token0Address};${token1Address}`\r\n}\r\n\r\nexport const initialState: UserState = {\r\n  userDarkMode: true,\r\n  matchesDarkMode: false,\r\n  tokens: {},\r\n  pairs: {},\r\n  savedTokens: [],\r\n  savedPools: [],\r\n  timestamp: currentTimestamp(),\r\n  URLWarningVisible: true,\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(updateVersion, (state) => {\r\n      state.lastUpdateVersionTimestamp = currentTimestamp()\r\n    })\r\n    .addCase(updateUserDarkMode, (state, action) => {\r\n      state.userDarkMode = action.payload.userDarkMode\r\n      state.timestamp = currentTimestamp()\r\n    })\r\n    .addCase(updateMatchesDarkMode, (state, action) => {\r\n      state.matchesDarkMode = action.payload.matchesDarkMode\r\n      state.timestamp = currentTimestamp()\r\n    })\r\n    .addCase(addSerializedToken, (state, { payload: { serializedToken } }) => {\r\n      state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {}\r\n      state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken\r\n      state.timestamp = currentTimestamp()\r\n    })\r\n    .addCase(removeSerializedToken, (state, { payload: { address, chainId } }) => {\r\n      state.tokens[chainId] = state.tokens[chainId] || {}\r\n      delete state.tokens[chainId][address]\r\n      state.timestamp = currentTimestamp()\r\n    })\r\n    .addCase(addSavedToken, (state, { payload: { address } }) => {\r\n      if (!state.savedTokens || !state.savedTokens.includes(address)) {\r\n        const newTokens = state.savedTokens ?? []\r\n        newTokens.push(address)\r\n        state.savedTokens = newTokens\r\n      }\r\n      // toggle for delete\r\n      else if (state.savedTokens && state.savedTokens.includes(address)) {\r\n        const newTokens = state.savedTokens.filter((x) => x !== address)\r\n        state.savedTokens = newTokens\r\n      }\r\n    })\r\n    .addCase(addSavedPool, (state, { payload: { address } }) => {\r\n      if (!state.savedPools || !state.savedPools.includes(address)) {\r\n        const newPools = state.savedPools ?? []\r\n        newPools.push(address)\r\n        state.savedPools = newPools\r\n      } else if (state.savedPools && state.savedPools.includes(address)) {\r\n        const newPools = state.savedPools.filter((x) => x !== address)\r\n        state.savedPools = newPools\r\n      }\r\n    })\r\n    .addCase(addSerializedPair, (state, { payload: { serializedPair } }) => {\r\n      if (\r\n        serializedPair.token0.chainId === serializedPair.token1.chainId &&\r\n        serializedPair.token0.address !== serializedPair.token1.address\r\n      ) {\r\n        const chainId = serializedPair.token0.chainId\r\n        state.pairs[chainId] = state.pairs[chainId] || {}\r\n        state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair\r\n      }\r\n      state.timestamp = currentTimestamp()\r\n    })\r\n    .addCase(removeSerializedPair, (state, { payload: { chainId, tokenAAddress, tokenBAddress } }) => {\r\n      if (state.pairs[chainId]) {\r\n        // just delete both keys if either exists\r\n        delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)]\r\n        delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)]\r\n      }\r\n      state.timestamp = currentTimestamp()\r\n    })\r\n    .addCase(toggleURLWarning, (state) => {\r\n      state.URLWarningVisible = !state.URLWarningVisible\r\n    })\r\n)\r\n","import { DEFAULT_ACTIVE_LIST_URLS, UNSUPPORTED_LIST_URLS } from './../../constants/lists'\r\nimport { createReducer } from '@reduxjs/toolkit'\r\nimport { getVersionUpgrade, VersionUpgrade } from '@uniswap/token-lists'\r\nimport { TokenList } from '@uniswap/token-lists/dist/types'\r\nimport { DEFAULT_LIST_OF_LISTS } from '../../constants/lists'\r\nimport { updateVersion } from '../global/actions'\r\nimport { acceptListUpdate, addList, fetchTokenList, removeList, enableList, disableList } from './actions'\r\n\r\nexport interface ListsState {\r\n  readonly byUrl: {\r\n    readonly [url: string]: {\r\n      readonly current: TokenList | null\r\n      readonly pendingUpdate: TokenList | null\r\n      readonly loadingRequestId: string | null\r\n      readonly error: string | null\r\n    }\r\n  }\r\n  // this contains the default list of lists from the last time the updateVersion was called, i.e. the app was reloaded\r\n  readonly lastInitializedDefaultListOfLists?: string[]\r\n\r\n  // currently active lists\r\n  readonly activeListUrls: string[] | undefined\r\n}\r\n\r\ntype ListState = ListsState['byUrl'][string]\r\n\r\nconst NEW_LIST_STATE: ListState = {\r\n  error: null,\r\n  current: null,\r\n  loadingRequestId: null,\r\n  pendingUpdate: null,\r\n}\r\n\r\ntype Mutable<T> = { -readonly [P in keyof T]: T[P] extends ReadonlyArray<infer U> ? U[] : T[P] }\r\n\r\nconst initialState: ListsState = {\r\n  lastInitializedDefaultListOfLists: DEFAULT_LIST_OF_LISTS,\r\n  byUrl: {\r\n    ...DEFAULT_LIST_OF_LISTS.concat(UNSUPPORTED_LIST_URLS).reduce<Mutable<ListsState['byUrl']>>((memo, listUrl) => {\r\n      memo[listUrl] = NEW_LIST_STATE\r\n      return memo\r\n    }, {}),\r\n  },\r\n  activeListUrls: DEFAULT_ACTIVE_LIST_URLS,\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(fetchTokenList.pending, (state, { payload: { requestId, url } }) => {\r\n      state.byUrl[url] = {\r\n        current: null,\r\n        pendingUpdate: null,\r\n        ...state.byUrl[url],\r\n        loadingRequestId: requestId,\r\n        error: null,\r\n      }\r\n    })\r\n    .addCase(fetchTokenList.fulfilled, (state, { payload: { requestId, tokenList, url } }) => {\r\n      const current = state.byUrl[url]?.current\r\n      const loadingRequestId = state.byUrl[url]?.loadingRequestId\r\n\r\n      // no-op if update does nothing\r\n      if (current) {\r\n        const upgradeType = getVersionUpgrade(current.version, tokenList.version)\r\n\r\n        if (upgradeType === VersionUpgrade.NONE) return\r\n        if (loadingRequestId === null || loadingRequestId === requestId) {\r\n          state.byUrl[url] = {\r\n            ...state.byUrl[url],\r\n            loadingRequestId: null,\r\n            error: null,\r\n            current: current,\r\n            pendingUpdate: tokenList,\r\n          }\r\n        }\r\n      } else {\r\n        // activate if on default active\r\n        if (DEFAULT_ACTIVE_LIST_URLS.includes(url)) {\r\n          state.activeListUrls?.push(url)\r\n        }\r\n\r\n        state.byUrl[url] = {\r\n          ...state.byUrl[url],\r\n          loadingRequestId: null,\r\n          error: null,\r\n          current: tokenList,\r\n          pendingUpdate: null,\r\n        }\r\n      }\r\n    })\r\n    .addCase(fetchTokenList.rejected, (state, { payload: { url, requestId, errorMessage } }) => {\r\n      if (state.byUrl[url]?.loadingRequestId !== requestId) {\r\n        // no-op since it's not the latest request\r\n        return\r\n      }\r\n\r\n      state.byUrl[url] = {\r\n        ...state.byUrl[url],\r\n        loadingRequestId: null,\r\n        error: errorMessage,\r\n        current: null,\r\n        pendingUpdate: null,\r\n      }\r\n    })\r\n    .addCase(addList, (state, { payload: url }) => {\r\n      if (!state.byUrl[url]) {\r\n        state.byUrl[url] = NEW_LIST_STATE\r\n      }\r\n    })\r\n    .addCase(removeList, (state, { payload: url }) => {\r\n      if (state.byUrl[url]) {\r\n        delete state.byUrl[url]\r\n      }\r\n      // remove list from active urls if needed\r\n      if (state.activeListUrls && state.activeListUrls.includes(url)) {\r\n        state.activeListUrls = state.activeListUrls.filter((u) => u !== url)\r\n      }\r\n    })\r\n    .addCase(enableList, (state, { payload: url }) => {\r\n      if (!state.byUrl[url]) {\r\n        state.byUrl[url] = NEW_LIST_STATE\r\n      }\r\n\r\n      if (state.activeListUrls && !state.activeListUrls.includes(url)) {\r\n        state.activeListUrls.push(url)\r\n      }\r\n\r\n      if (!state.activeListUrls) {\r\n        state.activeListUrls = [url]\r\n      }\r\n    })\r\n    .addCase(disableList, (state, { payload: url }) => {\r\n      if (state.activeListUrls && state.activeListUrls.includes(url)) {\r\n        state.activeListUrls = state.activeListUrls.filter((u) => u !== url)\r\n      }\r\n    })\r\n    .addCase(acceptListUpdate, (state, { payload: url }) => {\r\n      if (!state.byUrl[url]?.pendingUpdate) {\r\n        throw new Error('accept list update called without pending update')\r\n      }\r\n      state.byUrl[url] = {\r\n        ...state.byUrl[url],\r\n        pendingUpdate: null,\r\n        current: state.byUrl[url].pendingUpdate,\r\n      }\r\n    })\r\n    .addCase(updateVersion, (state) => {\r\n      // state loaded from localStorage, but new lists have never been initialized\r\n      if (!state.lastInitializedDefaultListOfLists) {\r\n        state.byUrl = initialState.byUrl\r\n        state.activeListUrls = initialState.activeListUrls\r\n      } else if (state.lastInitializedDefaultListOfLists) {\r\n        const lastInitializedSet = state.lastInitializedDefaultListOfLists.reduce<Set<string>>(\r\n          (s, l) => s.add(l),\r\n          new Set()\r\n        )\r\n        const newListOfListsSet = DEFAULT_LIST_OF_LISTS.reduce<Set<string>>((s, l) => s.add(l), new Set())\r\n\r\n        DEFAULT_LIST_OF_LISTS.forEach((listUrl) => {\r\n          if (!lastInitializedSet.has(listUrl)) {\r\n            state.byUrl[listUrl] = NEW_LIST_STATE\r\n          }\r\n        })\r\n\r\n        state.lastInitializedDefaultListOfLists.forEach((listUrl) => {\r\n          if (!newListOfListsSet.has(listUrl)) {\r\n            delete state.byUrl[listUrl]\r\n          }\r\n        })\r\n      }\r\n\r\n      state.lastInitializedDefaultListOfLists = DEFAULT_LIST_OF_LISTS\r\n\r\n      // if no active lists, activate defaults\r\n      if (!state.activeListUrls) {\r\n        state.activeListUrls = DEFAULT_ACTIVE_LIST_URLS\r\n\r\n        // for each list on default list, initialize if needed\r\n        DEFAULT_ACTIVE_LIST_URLS.map((listUrl: string) => {\r\n          if (!state.byUrl[listUrl]) {\r\n            state.byUrl[listUrl] = NEW_LIST_STATE\r\n          }\r\n          return true\r\n        })\r\n      }\r\n    })\r\n)\r\n","import { createAction } from '@reduxjs/toolkit'\r\n\r\nexport interface Call {\r\n  address: string\r\n  callData: string\r\n}\r\n\r\nconst ADDRESS_REGEX = /^0x[a-fA-F0-9]{40}$/\r\nconst LOWER_HEX_REGEX = /^0x[a-f0-9]*$/\r\nexport function toCallKey(call: Call): string {\r\n  if (!ADDRESS_REGEX.test(call.address)) {\r\n    throw new Error(`Invalid address: ${call.address}`)\r\n  }\r\n  if (!LOWER_HEX_REGEX.test(call.callData)) {\r\n    throw new Error(`Invalid hex: ${call.callData}`)\r\n  }\r\n  return `${call.address}-${call.callData}`\r\n}\r\n\r\nexport function parseCallKey(callKey: string): Call {\r\n  const pcs = callKey.split('-')\r\n  if (pcs.length !== 2) {\r\n    throw new Error(`Invalid call key: ${callKey}`)\r\n  }\r\n  return {\r\n    address: pcs[0],\r\n    callData: pcs[1],\r\n  }\r\n}\r\n\r\nexport interface ListenerOptions {\r\n  // how often this data should be fetched, by default 1\r\n  readonly blocksPerFetch?: number\r\n}\r\n\r\nexport const addMulticallListeners = createAction<{ chainId: number; calls: Call[]; options?: ListenerOptions }>(\r\n  'multicall/addMulticallListeners'\r\n)\r\nexport const removeMulticallListeners = createAction<{ chainId: number; calls: Call[]; options?: ListenerOptions }>(\r\n  'multicall/removeMulticallListeners'\r\n)\r\nexport const fetchingMulticallResults = createAction<{ chainId: number; calls: Call[]; fetchingBlockNumber: number }>(\r\n  'multicall/fetchingMulticallResults'\r\n)\r\nexport const errorFetchingMulticallResults = createAction<{\r\n  chainId: number\r\n  calls: Call[]\r\n  fetchingBlockNumber: number\r\n}>('multicall/errorFetchingMulticallResults')\r\nexport const updateMulticallResults = createAction<{\r\n  chainId: number\r\n  blockNumber: number\r\n  results: {\r\n    [callKey: string]: string | null\r\n  }\r\n}>('multicall/updateMulticallResults')\r\n","import { createReducer } from '@reduxjs/toolkit'\r\nimport {\r\n  addMulticallListeners,\r\n  errorFetchingMulticallResults,\r\n  fetchingMulticallResults,\r\n  removeMulticallListeners,\r\n  toCallKey,\r\n  updateMulticallResults,\r\n} from './actions'\r\n\r\nexport interface MulticallState {\r\n  callListeners?: {\r\n    // on a per-chain basis\r\n    [chainId: number]: {\r\n      // stores for each call key the listeners' preferences\r\n      [callKey: string]: {\r\n        // stores how many listeners there are per each blocks per fetch preference\r\n        [blocksPerFetch: number]: number\r\n      }\r\n    }\r\n  }\r\n\r\n  callResults: {\r\n    [chainId: number]: {\r\n      [callKey: string]: {\r\n        data?: string | null\r\n        blockNumber?: number\r\n        fetchingBlockNumber?: number\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst initialState: MulticallState = {\r\n  callResults: {},\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(addMulticallListeners, (state, { payload: { calls, chainId, options: { blocksPerFetch = 1 } = {} } }) => {\r\n      const listeners: MulticallState['callListeners'] = state.callListeners\r\n        ? state.callListeners\r\n        : (state.callListeners = {})\r\n      listeners[chainId] = listeners[chainId] ?? {}\r\n      calls.forEach((call) => {\r\n        const callKey = toCallKey(call)\r\n        listeners[chainId][callKey] = listeners[chainId][callKey] ?? {}\r\n        listeners[chainId][callKey][blocksPerFetch] = (listeners[chainId][callKey][blocksPerFetch] ?? 0) + 1\r\n      })\r\n    })\r\n    .addCase(\r\n      removeMulticallListeners,\r\n      (state, { payload: { chainId, calls, options: { blocksPerFetch = 1 } = {} } }) => {\r\n        const listeners: MulticallState['callListeners'] = state.callListeners\r\n          ? state.callListeners\r\n          : (state.callListeners = {})\r\n\r\n        if (!listeners[chainId]) return\r\n        calls.forEach((call) => {\r\n          const callKey = toCallKey(call)\r\n          if (!listeners[chainId][callKey]) return\r\n          if (!listeners[chainId][callKey][blocksPerFetch]) return\r\n\r\n          if (listeners[chainId][callKey][blocksPerFetch] === 1) {\r\n            delete listeners[chainId][callKey][blocksPerFetch]\r\n          } else {\r\n            listeners[chainId][callKey][blocksPerFetch]--\r\n          }\r\n        })\r\n      }\r\n    )\r\n    .addCase(fetchingMulticallResults, (state, { payload: { chainId, fetchingBlockNumber, calls } }) => {\r\n      state.callResults[chainId] = state.callResults[chainId] ?? {}\r\n      calls.forEach((call) => {\r\n        const callKey = toCallKey(call)\r\n        const current = state.callResults[chainId][callKey]\r\n        if (!current) {\r\n          state.callResults[chainId][callKey] = {\r\n            fetchingBlockNumber,\r\n          }\r\n        } else {\r\n          if ((current.fetchingBlockNumber ?? 0) >= fetchingBlockNumber) return\r\n          state.callResults[chainId][callKey].fetchingBlockNumber = fetchingBlockNumber\r\n        }\r\n      })\r\n    })\r\n    .addCase(errorFetchingMulticallResults, (state, { payload: { fetchingBlockNumber, chainId, calls } }) => {\r\n      state.callResults[chainId] = state.callResults[chainId] ?? {}\r\n      calls.forEach((call) => {\r\n        const callKey = toCallKey(call)\r\n        const current = state.callResults[chainId][callKey]\r\n        if (!current) return // only should be dispatched if we are already fetching\r\n        if (current.fetchingBlockNumber === fetchingBlockNumber) {\r\n          delete current.fetchingBlockNumber\r\n          current.data = null\r\n          current.blockNumber = fetchingBlockNumber\r\n        }\r\n      })\r\n    })\r\n    .addCase(updateMulticallResults, (state, { payload: { chainId, results, blockNumber } }) => {\r\n      state.callResults[chainId] = state.callResults[chainId] ?? {}\r\n      Object.keys(results).forEach((callKey) => {\r\n        const current = state.callResults[chainId][callKey]\r\n        if ((current?.blockNumber ?? 0) > blockNumber) return\r\n        state.callResults[chainId][callKey] = {\r\n          data: results[callKey],\r\n          blockNumber,\r\n        }\r\n      })\r\n    })\r\n)\r\n","import { currentTimestamp } from './../../utils/index'\r\nimport { updateProtocolData, updateChartData, updateTransactions } from './actions'\r\nimport { createReducer } from '@reduxjs/toolkit'\r\nimport { ChartDayData, Transaction } from 'types'\r\nimport { SupportedNetwork } from 'constants/networks'\r\n\r\nexport interface ProtocolData {\r\n  // volume\r\n  volumeUSD: number\r\n  volumeUSDChange: number\r\n\r\n  // in range liquidity\r\n  tvlUSD: number\r\n  tvlUSDChange: number\r\n\r\n  // fees\r\n  feesUSD: number\r\n  feeChange: number\r\n\r\n  // transactions\r\n  txCount: number\r\n  txCountChange: number\r\n}\r\n\r\nexport interface ProtocolState {\r\n  [networkId: string]: {\r\n    // timestamp for last updated fetch\r\n    readonly lastUpdated: number | undefined\r\n    // overview data\r\n    readonly data: ProtocolData | undefined\r\n    readonly chartData: ChartDayData[] | undefined\r\n    readonly transactions: Transaction[] | undefined\r\n  }\r\n}\r\n\r\nexport const initialState: ProtocolState = {\r\n  [SupportedNetwork.ETHEREUM]: {\r\n    data: undefined,\r\n    chartData: undefined,\r\n    transactions: undefined,\r\n    lastUpdated: undefined,\r\n  },\r\n  [SupportedNetwork.ARBITRUM]: {\r\n    data: undefined,\r\n    chartData: undefined,\r\n    transactions: undefined,\r\n    lastUpdated: undefined,\r\n  },\r\n  [SupportedNetwork.OPTIMISM]: {\r\n    data: undefined,\r\n    chartData: undefined,\r\n    transactions: undefined,\r\n    lastUpdated: undefined,\r\n  },\r\n  [SupportedNetwork.POLYGON]: {\r\n    data: undefined,\r\n    chartData: undefined,\r\n    transactions: undefined,\r\n    lastUpdated: undefined,\r\n  },\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(updateProtocolData, (state, { payload: { protocolData, networkId } }) => {\r\n      state[networkId].data = protocolData\r\n      // mark when last updated\r\n      state[networkId].lastUpdated = currentTimestamp()\r\n    })\r\n    .addCase(updateChartData, (state, { payload: { chartData, networkId } }) => {\r\n      state[networkId].chartData = chartData\r\n    })\r\n    .addCase(updateTransactions, (state, { payload: { transactions, networkId } }) => {\r\n      state[networkId].transactions = transactions\r\n    })\r\n)\r\n","import { currentTimestamp } from './../../utils/index'\r\nimport {\r\n  updateTokenData,\r\n  addTokenKeys,\r\n  addPoolAddresses,\r\n  updateChartData,\r\n  updatePriceData,\r\n  updateTransactions,\r\n} from './actions'\r\nimport { createReducer } from '@reduxjs/toolkit'\r\nimport { PriceChartEntry, Transaction } from 'types'\r\nimport { SupportedNetwork } from 'constants/networks'\r\n\r\nexport type TokenData = {\r\n  // token is in some pool on uniswap\r\n  exists: boolean\r\n\r\n  // basic token info\r\n  name: string\r\n  symbol: string\r\n  address: string\r\n\r\n  // volume\r\n  volumeUSD: number\r\n  volumeUSDChange: number\r\n  volumeUSDWeek: number\r\n  txCount: number\r\n\r\n  //fees\r\n  feesUSD: number\r\n\r\n  // tvl\r\n  tvlToken: number\r\n  tvlUSD: number\r\n  tvlUSDChange: number\r\n\r\n  priceUSD: number\r\n  priceUSDChange: number\r\n  priceUSDChangeWeek: number\r\n}\r\n\r\nexport interface TokenChartEntry {\r\n  date: number\r\n  volumeUSD: number\r\n  totalValueLockedUSD: number\r\n}\r\n\r\nexport interface TokensState {\r\n  // analytics data from\r\n  byAddress: {\r\n    [networkId: string]: {\r\n      [address: string]: {\r\n        data: TokenData | undefined\r\n        poolAddresses: string[] | undefined\r\n        chartData: TokenChartEntry[] | undefined\r\n        priceData: {\r\n          oldestFetchedTimestamp?: number | undefined\r\n          [secondsInterval: number]: PriceChartEntry[] | undefined\r\n        }\r\n        transactions: Transaction[] | undefined\r\n        lastUpdated: number | undefined\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const initialState: TokensState = {\r\n  byAddress: {\r\n    [SupportedNetwork.ETHEREUM]: {},\r\n    [SupportedNetwork.ARBITRUM]: {},\r\n    [SupportedNetwork.OPTIMISM]: {},\r\n    [SupportedNetwork.POLYGON]: {},\r\n  },\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(updateTokenData, (state, { payload: { tokens, networkId } }) => {\r\n      tokens.map(\r\n        (tokenData) =>\r\n          (state.byAddress[networkId][tokenData.address] = {\r\n            ...state.byAddress[networkId][tokenData.address],\r\n            data: tokenData,\r\n            lastUpdated: currentTimestamp(),\r\n          })\r\n      )\r\n    }) // add address to byAddress keys if not included yet\r\n    .addCase(addTokenKeys, (state, { payload: { tokenAddresses, networkId } }) => {\r\n      tokenAddresses.map((address) => {\r\n        if (!state.byAddress[networkId][address]) {\r\n          state.byAddress[networkId][address] = {\r\n            poolAddresses: undefined,\r\n            data: undefined,\r\n            chartData: undefined,\r\n            priceData: {},\r\n            transactions: undefined,\r\n            lastUpdated: undefined,\r\n          }\r\n        }\r\n      })\r\n    })\r\n    // add list of pools the token is included in\r\n    .addCase(addPoolAddresses, (state, { payload: { tokenAddress, poolAddresses, networkId } }) => {\r\n      state.byAddress[networkId][tokenAddress] = { ...state.byAddress[networkId][tokenAddress], poolAddresses }\r\n    })\r\n    // add list of pools the token is included in\r\n    .addCase(updateChartData, (state, { payload: { tokenAddress, chartData, networkId } }) => {\r\n      state.byAddress[networkId][tokenAddress] = { ...state.byAddress[networkId][tokenAddress], chartData }\r\n    })\r\n    // add list of pools the token is included in\r\n    .addCase(updateTransactions, (state, { payload: { tokenAddress, transactions, networkId } }) => {\r\n      state.byAddress[networkId][tokenAddress] = { ...state.byAddress[networkId][tokenAddress], transactions }\r\n    })\r\n    // update historical price volume based on interval size\r\n    .addCase(\r\n      updatePriceData,\r\n      (state, { payload: { tokenAddress, secondsInterval, priceData, oldestFetchedTimestamp, networkId } }) => {\r\n        state.byAddress[networkId][tokenAddress] = {\r\n          ...state.byAddress[networkId][tokenAddress],\r\n          priceData: {\r\n            ...state.byAddress[networkId][tokenAddress].priceData,\r\n            [secondsInterval]: priceData,\r\n            oldestFetchedTimestamp,\r\n          },\r\n        }\r\n      }\r\n    )\r\n)\r\n","import { currentTimestamp } from './../../utils/index'\r\nimport { updatePoolData, addPoolKeys, updatePoolChartData, updatePoolTransactions, updateTickData } from './actions'\r\nimport { createReducer } from '@reduxjs/toolkit'\r\nimport { SerializedToken } from 'state/user/actions'\r\nimport { Transaction } from 'types'\r\nimport { PoolTickData } from 'data/pools/tickData'\r\nimport { SupportedNetwork } from 'constants/networks'\r\n\r\nexport interface Pool {\r\n  address: string\r\n  token0: SerializedToken\r\n  token1: SerializedToken\r\n}\r\n\r\nexport interface PoolData {\r\n  // basic token info\r\n  address: string\r\n  feeTier: number\r\n\r\n  token0: {\r\n    name: string\r\n    symbol: string\r\n    address: string\r\n    decimals: number\r\n    derivedETH: number\r\n  }\r\n\r\n  token1: {\r\n    name: string\r\n    symbol: string\r\n    address: string\r\n    decimals: number\r\n    derivedETH: number\r\n  }\r\n\r\n  // for tick math\r\n  liquidity: number\r\n  sqrtPrice: number\r\n  tick: number\r\n\r\n  // volume\r\n  volumeUSD: number\r\n  volumeUSDChange: number\r\n  volumeUSDWeek: number\r\n\r\n  // liquidity\r\n  tvlUSD: number\r\n  tvlUSDChange: number\r\n\r\n  // prices\r\n  token0Price: number\r\n  token1Price: number\r\n\r\n  // token amounts\r\n  tvlToken0: number\r\n  tvlToken1: number\r\n}\r\n\r\nexport type PoolChartEntry = {\r\n  date: number\r\n  volumeUSD: number\r\n  totalValueLockedUSD: number\r\n  feesUSD: number\r\n}\r\n\r\nexport interface PoolsState {\r\n  // analytics data from\r\n  byAddress: {\r\n    [networkId: string]: {\r\n      [address: string]: {\r\n        data: PoolData | undefined\r\n        chartData: PoolChartEntry[] | undefined\r\n        transactions: Transaction[] | undefined\r\n        lastUpdated: number | undefined\r\n        tickData: PoolTickData | undefined\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const initialState: PoolsState = {\r\n  byAddress: {\r\n    [SupportedNetwork.ETHEREUM]: {},\r\n    [SupportedNetwork.ARBITRUM]: {},\r\n    [SupportedNetwork.OPTIMISM]: {},\r\n    [SupportedNetwork.POLYGON]: {},\r\n  },\r\n}\r\n\r\nexport default createReducer(initialState, (builder) =>\r\n  builder\r\n    .addCase(updatePoolData, (state, { payload: { pools, networkId } }) => {\r\n      pools.map(\r\n        (poolData) =>\r\n          (state.byAddress[networkId][poolData.address] = {\r\n            ...state.byAddress[networkId][poolData.address],\r\n            data: poolData,\r\n            lastUpdated: currentTimestamp(),\r\n          })\r\n      )\r\n    })\r\n    // add address to byAddress keys if not included yet\r\n    .addCase(addPoolKeys, (state, { payload: { poolAddresses, networkId } }) => {\r\n      poolAddresses.map((address) => {\r\n        if (!state.byAddress[networkId][address]) {\r\n          state.byAddress[networkId][address] = {\r\n            data: undefined,\r\n            chartData: undefined,\r\n            transactions: undefined,\r\n            lastUpdated: undefined,\r\n            tickData: undefined,\r\n          }\r\n        }\r\n      })\r\n    })\r\n    .addCase(updatePoolChartData, (state, { payload: { poolAddress, chartData, networkId } }) => {\r\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], chartData: chartData }\r\n    })\r\n    .addCase(updatePoolTransactions, (state, { payload: { poolAddress, transactions, networkId } }) => {\r\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], transactions }\r\n    })\r\n    .addCase(updateTickData, (state, { payload: { poolAddress, tickData, networkId } }) => {\r\n      state.byAddress[networkId][poolAddress] = { ...state.byAddress[networkId][poolAddress], tickData }\r\n    })\r\n)\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit'\r\nimport { save, load } from 'redux-localstorage-simple'\r\n\r\nimport application from './application/reducer'\r\nimport { updateVersion } from './global/actions'\r\nimport user from './user/reducer'\r\nimport lists from './lists/reducer'\r\nimport multicall from './multicall/reducer'\r\nimport protocol from './protocol/reducer'\r\nimport tokens from './tokens/reducer'\r\nimport pools from './pools/reducer'\r\n\r\nconst PERSISTED_KEYS: string[] = ['user', 'lists']\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    application,\r\n    user,\r\n    multicall,\r\n    lists,\r\n    protocol,\r\n    tokens,\r\n    pools,\r\n  },\r\n  middleware: [...getDefaultMiddleware({ thunk: false, immutableCheck: false }), save({ states: PERSISTED_KEYS })],\r\n  preloadedState: load({ states: PERSISTED_KEYS }),\r\n})\r\n\r\nstore.dispatch(updateVersion())\r\n\r\nexport default store\r\n\r\nexport type AppState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch\r\n","import { useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { AppDispatch } from '../index'\r\nimport { updateMatchesDarkMode } from './actions'\r\n\r\nexport default function Updater(): null {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n\r\n  // keep dark mode in sync with the system\r\n  useEffect(() => {\r\n    const darkHandler = (match: MediaQueryListEvent) => {\r\n      dispatch(updateMatchesDarkMode({ matchesDarkMode: match.matches }))\r\n    }\r\n\r\n    const match = window?.matchMedia('(prefers-color-scheme: dark)')\r\n    dispatch(updateMatchesDarkMode({ matchesDarkMode: match.matches }))\r\n\r\n    if (match?.addListener) {\r\n      match?.addListener(darkHandler)\r\n    } else if (match?.addEventListener) {\r\n      match?.addEventListener('change', darkHandler)\r\n    }\r\n\r\n    return () => {\r\n      if (match?.removeListener) {\r\n        match?.removeListener(darkHandler)\r\n      } else if (match?.removeEventListener) {\r\n        match?.removeEventListener('change', darkHandler)\r\n      }\r\n    }\r\n  }, [dispatch])\r\n\r\n  return null\r\n}\r\n","import { getPercentChange } from '../../utils/data'\r\nimport { ProtocolData } from '../../state/protocol/reducer'\r\nimport gql from 'graphql-tag'\r\nimport { useQuery, ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport { useDeltaTimestamps } from 'utils/queries'\r\nimport { useBlocksFromTimestamps } from 'hooks/useBlocksFromTimestamps'\r\nimport { useMemo } from 'react'\r\nimport { useClients } from 'state/application/hooks'\r\n\r\nexport const GLOBAL_DATA = (block?: string) => {\r\n  const queryString = ` query uniswapFactories {\r\n      factories(\r\n       ${block !== undefined ? `block: { number: ${block}}` : ``} \r\n       first: 1, subgraphError: allow) {\r\n        txCount\r\n        totalVolumeUSD\r\n        totalFeesUSD\r\n        totalValueLockedUSD\r\n      }\r\n    }`\r\n  return gql(queryString)\r\n}\r\n\r\ninterface GlobalResponse {\r\n  factories: {\r\n    txCount: string\r\n    totalVolumeUSD: string\r\n    totalFeesUSD: string\r\n    totalValueLockedUSD: string\r\n  }[]\r\n}\r\n\r\nexport function useFetchProtocolData(\r\n  dataClientOverride?: ApolloClient<NormalizedCacheObject>,\r\n  blockClientOverride?: ApolloClient<NormalizedCacheObject>\r\n): {\r\n  loading: boolean\r\n  error: boolean\r\n  data: ProtocolData | undefined\r\n} {\r\n  // get appropriate clients if override needed\r\n  const { dataClient, blockClient } = useClients()\r\n  const activeDataClient = dataClientOverride ?? dataClient\r\n  const activeBlockClient = blockClientOverride ?? blockClient\r\n\r\n  // get blocks from historic timestamps\r\n  const [t24, t48] = useDeltaTimestamps()\r\n  const { blocks, error: blockError } = useBlocksFromTimestamps([t24, t48], activeBlockClient)\r\n  const [block24, block48] = blocks ?? []\r\n\r\n  // fetch all data\r\n  const { loading, error, data } = useQuery<GlobalResponse>(GLOBAL_DATA(), { client: activeDataClient })\r\n\r\n  const { loading: loading24, error: error24, data: data24 } = useQuery<GlobalResponse>(\r\n    GLOBAL_DATA(block24?.number ?? 0),\r\n    { client: activeDataClient }\r\n  )\r\n\r\n  const { loading: loading48, error: error48, data: data48 } = useQuery<GlobalResponse>(\r\n    GLOBAL_DATA(block48?.number ?? 0),\r\n    { client: activeDataClient }\r\n  )\r\n\r\n  const anyError = Boolean(error || error24 || error48 || blockError)\r\n  const anyLoading = Boolean(loading || loading24 || loading48)\r\n\r\n  const parsed = data?.factories?.[0]\r\n  const parsed24 = data24?.factories?.[0]\r\n  const parsed48 = data48?.factories?.[0]\r\n\r\n  const formattedData: ProtocolData | undefined = useMemo(() => {\r\n    if (anyError || anyLoading || !parsed || !blocks) {\r\n      return undefined\r\n    }\r\n\r\n    // volume data\r\n    const volumeUSD =\r\n      parsed && parsed24\r\n        ? parseFloat(parsed.totalVolumeUSD) - parseFloat(parsed24.totalVolumeUSD)\r\n        : parseFloat(parsed.totalVolumeUSD)\r\n\r\n    const volumeOneWindowAgo =\r\n      parsed24?.totalVolumeUSD && parsed48?.totalVolumeUSD\r\n        ? parseFloat(parsed24.totalVolumeUSD) - parseFloat(parsed48.totalVolumeUSD)\r\n        : undefined\r\n\r\n    const volumeUSDChange =\r\n      volumeUSD && volumeOneWindowAgo ? ((volumeUSD - volumeOneWindowAgo) / volumeOneWindowAgo) * 100 : 0\r\n\r\n    // total value locked\r\n    const tvlUSDChange = getPercentChange(parsed?.totalValueLockedUSD, parsed24?.totalValueLockedUSD)\r\n\r\n    // 24H transactions\r\n    const txCount =\r\n      parsed && parsed24 ? parseFloat(parsed.txCount) - parseFloat(parsed24.txCount) : parseFloat(parsed.txCount)\r\n\r\n    const txCountOneWindowAgo =\r\n      parsed24 && parsed48 ? parseFloat(parsed24.txCount) - parseFloat(parsed48.txCount) : undefined\r\n\r\n    const txCountChange =\r\n      txCount && txCountOneWindowAgo ? getPercentChange(txCount.toString(), txCountOneWindowAgo.toString()) : 0\r\n\r\n    const feesOneWindowAgo =\r\n      parsed24 && parsed48 ? parseFloat(parsed24.totalFeesUSD) - parseFloat(parsed48.totalFeesUSD) : undefined\r\n\r\n    const feesUSD =\r\n      parsed && parsed24\r\n        ? parseFloat(parsed.totalFeesUSD) - parseFloat(parsed24.totalFeesUSD)\r\n        : parseFloat(parsed.totalFeesUSD)\r\n\r\n    const feeChange =\r\n      feesUSD && feesOneWindowAgo ? getPercentChange(feesUSD.toString(), feesOneWindowAgo.toString()) : 0\r\n\r\n    return {\r\n      volumeUSD,\r\n      volumeUSDChange: typeof volumeUSDChange === 'number' ? volumeUSDChange : 0,\r\n      tvlUSD: parseFloat(parsed?.totalValueLockedUSD),\r\n      tvlUSDChange,\r\n      feesUSD,\r\n      feeChange,\r\n      txCount,\r\n      txCountChange,\r\n    }\r\n  }, [anyError, anyLoading, blocks, parsed, parsed24, parsed48])\r\n\r\n  return {\r\n    loading: anyLoading,\r\n    error: anyError,\r\n    data: formattedData,\r\n  }\r\n}\r\n","import { ChartDayData } from '../../types/index'\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\r\nimport gql from 'graphql-tag'\r\nimport { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\nimport { arbitrumClient, optimismClient } from 'apollo/client'\r\nimport { EthereumNetworkInfo } from 'constants/networks'\r\n\r\n// format dayjs with the libraries that we need\r\ndayjs.extend(utc)\r\ndayjs.extend(weekOfYear)\r\nconst ONE_DAY_UNIX = 24 * 60 * 60\r\n\r\nconst GLOBAL_CHART = gql`\r\n  query uniswapDayDatas($startTime: Int!, $skip: Int!) {\r\n    uniswapDayDatas(\r\n      first: 1000\r\n      skip: $skip\r\n      subgraphError: allow\r\n      where: { date_gt: $startTime }\r\n      orderBy: date\r\n      orderDirection: asc\r\n    ) {\r\n      id\r\n      date\r\n      volumeUSD\r\n      tvlUSD\r\n    }\r\n  }\r\n`\r\n\r\ninterface ChartResults {\r\n  uniswapDayDatas: {\r\n    date: number\r\n    volumeUSD: string\r\n    tvlUSD: string\r\n  }[]\r\n}\r\n\r\nasync function fetchChartData(client: ApolloClient<NormalizedCacheObject>) {\r\n  let data: {\r\n    date: number\r\n    volumeUSD: string\r\n    tvlUSD: string\r\n  }[] = []\r\n  const startTimestamp = client === arbitrumClient ? 1630423606 : client === optimismClient ? 1636697130 : 1619170975\r\n  const endTimestamp = dayjs.utc().unix()\r\n\r\n  let error = false\r\n  let skip = 0\r\n  let allFound = false\r\n\r\n  try {\r\n    while (!allFound) {\r\n      const { data: chartResData, error, loading } = await client.query<ChartResults>({\r\n        query: GLOBAL_CHART,\r\n        variables: {\r\n          startTime: startTimestamp,\r\n          skip,\r\n        },\r\n        fetchPolicy: 'cache-first',\r\n      })\r\n      if (!loading) {\r\n        skip += 1000\r\n        if (chartResData.uniswapDayDatas.length < 1000 || error) {\r\n          allFound = true\r\n        }\r\n        if (chartResData) {\r\n          data = data.concat(chartResData.uniswapDayDatas)\r\n        }\r\n      }\r\n    }\r\n  } catch {\r\n    error = true\r\n  }\r\n\r\n  if (data) {\r\n    const formattedExisting = data.reduce((accum: { [date: number]: ChartDayData }, dayData) => {\r\n      const roundedDate = parseInt((dayData.date / ONE_DAY_UNIX).toFixed(0))\r\n      accum[roundedDate] = {\r\n        date: dayData.date,\r\n        volumeUSD: parseFloat(dayData.volumeUSD),\r\n        tvlUSD: parseFloat(dayData.tvlUSD),\r\n      }\r\n      return accum\r\n    }, {})\r\n\r\n    const firstEntry = formattedExisting[parseInt(Object.keys(formattedExisting)[0])]\r\n\r\n    // fill in empty days ( there will be no day datas if no trades made that day )\r\n    let timestamp = firstEntry?.date ?? startTimestamp\r\n    let latestTvl = firstEntry?.tvlUSD ?? 0\r\n    while (timestamp < endTimestamp - ONE_DAY_UNIX) {\r\n      const nextDay = timestamp + ONE_DAY_UNIX\r\n      const currentDayIndex = parseInt((nextDay / ONE_DAY_UNIX).toFixed(0))\r\n      if (!Object.keys(formattedExisting).includes(currentDayIndex.toString())) {\r\n        formattedExisting[currentDayIndex] = {\r\n          date: nextDay,\r\n          volumeUSD: 0,\r\n          tvlUSD: latestTvl,\r\n        }\r\n      } else {\r\n        latestTvl = formattedExisting[currentDayIndex].tvlUSD\r\n      }\r\n      timestamp = nextDay\r\n    }\r\n\r\n    if (client === optimismClient) {\r\n      formattedExisting[18855] = {\r\n        ...formattedExisting[18855],\r\n        tvlUSD: 13480000,\r\n      }\r\n      formattedExisting[18856] = {\r\n        ...formattedExisting[18856],\r\n        tvlUSD: 13480000,\r\n      }\r\n    }\r\n\r\n    return {\r\n      data: Object.values(formattedExisting),\r\n      error: false,\r\n    }\r\n  } else {\r\n    return {\r\n      data: undefined,\r\n      error,\r\n    }\r\n  }\r\n}\r\n\r\nfunction useAdjustedData(indexedData: ChartDayData[] | undefined): ChartDayData[] | undefined {\r\n  const formattedData = useMemo(() => {\r\n    if (indexedData) {\r\n      return indexedData.map((dayData) => {\r\n        const adjustedData = {\r\n          ...dayData,\r\n          volumeUSD: dayData.volumeUSD,\r\n          tvlUSD: dayData.tvlUSD,\r\n        }\r\n        return adjustedData\r\n      })\r\n    } else {\r\n      return undefined\r\n    }\r\n  }, [indexedData])\r\n\r\n  return formattedData\r\n}\r\n\r\n/**\r\n * Fetch historic chart data\r\n */\r\nexport function useFetchGlobalChartData(): {\r\n  error: boolean\r\n  data: ChartDayData[] | undefined\r\n} {\r\n  const [data, setData] = useState<{ [network: string]: ChartDayData[] | undefined }>()\r\n  const [error, setError] = useState(false)\r\n  const { dataClient } = useClients()\r\n\r\n  const [activeNetworkVersion] = useActiveNetworkVersion()\r\n  const onEthereum = activeNetworkVersion === EthereumNetworkInfo\r\n  const indexedData = data?.[activeNetworkVersion.id]\r\n\r\n  // @TODO: remove this once we have fix for mainnet TVL issue\r\n  const adjustedData = useAdjustedData(indexedData)\r\n  const formattedData = onEthereum ? adjustedData : indexedData\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const { data, error } = await fetchChartData(dataClient)\r\n      if (data && !error) {\r\n        setData({\r\n          [activeNetworkVersion.id]: data,\r\n        })\r\n      } else if (error) {\r\n        setError(true)\r\n      }\r\n    }\r\n    if (!indexedData && !error) {\r\n      fetch()\r\n    }\r\n  }, [data, error, dataClient, indexedData, activeNetworkVersion.id])\r\n\r\n  return {\r\n    error,\r\n    data: formattedData,\r\n  }\r\n}\r\n","import { ApolloClient, NormalizedCacheObject } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { Transaction, TransactionType } from 'types'\r\nimport { formatTokenSymbol } from 'utils/tokens'\r\n\r\nconst GLOBAL_TRANSACTIONS = gql`\r\n  query transactions {\r\n    transactions(first: 500, orderBy: timestamp, orderDirection: desc, subgraphError: allow) {\r\n      id\r\n      timestamp\r\n      mints {\r\n        pool {\r\n          token0 {\r\n            id\r\n            symbol\r\n          }\r\n          token1 {\r\n            id\r\n            symbol\r\n          }\r\n        }\r\n        owner\r\n        sender\r\n        origin\r\n        amount0\r\n        amount1\r\n        amountUSD\r\n      }\r\n      swaps {\r\n        pool {\r\n          token0 {\r\n            id\r\n            symbol\r\n          }\r\n          token1 {\r\n            id\r\n            symbol\r\n          }\r\n        }\r\n        origin\r\n        amount0\r\n        amount1\r\n        amountUSD\r\n      }\r\n      burns {\r\n        pool {\r\n          token0 {\r\n            id\r\n            symbol\r\n          }\r\n          token1 {\r\n            id\r\n            symbol\r\n          }\r\n        }\r\n        owner\r\n        origin\r\n        amount0\r\n        amount1\r\n        amountUSD\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\ntype TransactionEntry = {\r\n  timestamp: string\r\n  id: string\r\n  mints: {\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  swaps: {\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n  burns: {\r\n    pool: {\r\n      token0: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n      token1: {\r\n        id: string\r\n        symbol: string\r\n      }\r\n    }\r\n    owner: string\r\n    origin: string\r\n    amount0: string\r\n    amount1: string\r\n    amountUSD: string\r\n  }[]\r\n}\r\n\r\ninterface TransactionResults {\r\n  transactions: TransactionEntry[]\r\n}\r\n\r\nexport async function fetchTopTransactions(\r\n  client: ApolloClient<NormalizedCacheObject>\r\n): Promise<Transaction[] | undefined> {\r\n  try {\r\n    const { data, error, loading } = await client.query<TransactionResults>({\r\n      query: GLOBAL_TRANSACTIONS,\r\n      fetchPolicy: 'cache-first',\r\n    })\r\n\r\n    if (error || loading || !data) {\r\n      return undefined\r\n    }\r\n\r\n    const formatted = data.transactions.reduce((accum: Transaction[], t: TransactionEntry) => {\r\n      const mintEntries = t.mints.map((m) => {\r\n        return {\r\n          type: TransactionType.MINT,\r\n          hash: t.id,\r\n          timestamp: t.timestamp,\r\n          sender: m.origin,\r\n          token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n          token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n          token0Address: m.pool.token0.id,\r\n          token1Address: m.pool.token1.id,\r\n          amountUSD: parseFloat(m.amountUSD),\r\n          amountToken0: parseFloat(m.amount0),\r\n          amountToken1: parseFloat(m.amount1),\r\n        }\r\n      })\r\n      const burnEntries = t.burns.map((m) => {\r\n        return {\r\n          type: TransactionType.BURN,\r\n          hash: t.id,\r\n          timestamp: t.timestamp,\r\n          sender: m.origin,\r\n          token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n          token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n          token0Address: m.pool.token0.id,\r\n          token1Address: m.pool.token1.id,\r\n          amountUSD: parseFloat(m.amountUSD),\r\n          amountToken0: parseFloat(m.amount0),\r\n          amountToken1: parseFloat(m.amount1),\r\n        }\r\n      })\r\n\r\n      const swapEntries = t.swaps.map((m) => {\r\n        return {\r\n          hash: t.id,\r\n          type: TransactionType.SWAP,\r\n          timestamp: t.timestamp,\r\n          sender: m.origin,\r\n          token0Symbol: formatTokenSymbol(m.pool.token0.id, m.pool.token0.symbol),\r\n          token1Symbol: formatTokenSymbol(m.pool.token1.id, m.pool.token1.symbol),\r\n          token0Address: m.pool.token0.id,\r\n          token1Address: m.pool.token1.id,\r\n          amountUSD: parseFloat(m.amountUSD),\r\n          amountToken0: parseFloat(m.amount0),\r\n          amountToken1: parseFloat(m.amount1),\r\n        }\r\n      })\r\n      accum = [...accum, ...mintEntries, ...burnEntries, ...swapEntries]\r\n      return accum\r\n    }, [])\r\n\r\n    return formatted\r\n  } catch {\r\n    return undefined\r\n  }\r\n}\r\n","import { useProtocolData, useProtocolChartData, useProtocolTransactions } from './hooks'\r\nimport { useEffect } from 'react'\r\nimport { useFetchProtocolData } from 'data/protocol/overview'\r\nimport { useFetchGlobalChartData } from 'data/protocol/chart'\r\nimport { fetchTopTransactions } from 'data/protocol/transactions'\r\nimport { useClients } from 'state/application/hooks'\r\n\r\nexport default function Updater(): null {\r\n  // client for data fetching\r\n  const { dataClient } = useClients()\r\n\r\n  const [protocolData, updateProtocolData] = useProtocolData()\r\n  const { data: fetchedProtocolData, error, loading } = useFetchProtocolData()\r\n\r\n  const [chartData, updateChartData] = useProtocolChartData()\r\n  const { data: fetchedChartData, error: chartError } = useFetchGlobalChartData()\r\n\r\n  const [transactions, updateTransactions] = useProtocolTransactions()\r\n\r\n  // update overview data if available and not set\r\n  useEffect(() => {\r\n    if (protocolData === undefined && fetchedProtocolData && !loading && !error) {\r\n      updateProtocolData(fetchedProtocolData)\r\n    }\r\n  }, [error, fetchedProtocolData, loading, protocolData, updateProtocolData])\r\n\r\n  // update global chart data if available and not set\r\n  useEffect(() => {\r\n    if (chartData === undefined && fetchedChartData && !chartError) {\r\n      updateChartData(fetchedChartData)\r\n    }\r\n  }, [chartData, chartError, fetchedChartData, updateChartData])\r\n\r\n  useEffect(() => {\r\n    async function fetch() {\r\n      const data = await fetchTopTransactions(dataClient)\r\n      if (data) {\r\n        updateTransactions(data)\r\n      }\r\n    }\r\n    if (!transactions) {\r\n      fetch()\r\n    }\r\n  }, [transactions, updateTransactions, dataClient])\r\n\r\n  return null\r\n}\r\n","import { useMemo } from 'react'\r\nimport { useQuery } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { useClients } from 'state/application/hooks'\r\n\r\nexport const TOP_TOKENS = gql`\r\n  query topPools {\r\n    tokens(first: 50, orderBy: totalValueLockedUSD, orderDirection: desc, subgraphError: allow) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\ninterface TopTokensResponse {\r\n  tokens: {\r\n    id: string\r\n  }[]\r\n}\r\n\r\n/**\r\n * Fetch top addresses by volume\r\n */\r\nexport function useTopTokenAddresses(): {\r\n  loading: boolean\r\n  error: boolean\r\n  addresses: string[] | undefined\r\n} {\r\n  const { dataClient } = useClients()\r\n\r\n  const { loading, error, data } = useQuery<TopTokensResponse>(TOP_TOKENS, { client: dataClient })\r\n\r\n  const formattedData = useMemo(() => {\r\n    if (data) {\r\n      return data.tokens.map((t) => t.id)\r\n    } else {\r\n      return undefined\r\n    }\r\n  }, [data])\r\n\r\n  return {\r\n    loading: loading,\r\n    error: Boolean(error),\r\n    addresses: formattedData,\r\n  }\r\n}\r\n","import { useAllTokenData, useUpdateTokenData, useAddTokenKeys } from './hooks'\r\nimport { useEffect, useMemo } from 'react'\r\nimport { useTopTokenAddresses } from '../../data/tokens/topTokens'\r\nimport { useFetchedTokenDatas } from 'data/tokens/tokenData'\r\n\r\nexport default function Updater(): null {\r\n  // updaters\r\n  const updateTokenDatas = useUpdateTokenData()\r\n  const addTokenKeys = useAddTokenKeys()\r\n\r\n  // intitial data\r\n  const allTokenData = useAllTokenData()\r\n  const { loading, error, addresses } = useTopTokenAddresses()\r\n\r\n  // add top pools on first load\r\n  useEffect(() => {\r\n    if (addresses && !error && !loading) {\r\n      addTokenKeys(addresses)\r\n    }\r\n  }, [addTokenKeys, addresses, error, loading])\r\n\r\n  // detect for which addresses we havent loaded token data yet\r\n  const unfetchedTokenAddresses = useMemo(() => {\r\n    return Object.keys(allTokenData).reduce((accum: string[], key) => {\r\n      const tokenData = allTokenData[key]\r\n      if (!tokenData || !tokenData.data || !tokenData.lastUpdated) {\r\n        accum.push(key)\r\n      }\r\n      return accum\r\n    }, [])\r\n  }, [allTokenData])\r\n\r\n  // update unloaded pool entries with fetched data\r\n  const { error: tokenDataError, loading: tokenDataLoading, data: tokenDatas } = useFetchedTokenDatas(\r\n    unfetchedTokenAddresses\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (tokenDatas && !tokenDataError && !tokenDataLoading) {\r\n      updateTokenDatas(Object.values(tokenDatas))\r\n    }\r\n  }, [tokenDataError, tokenDataLoading, tokenDatas, updateTokenDatas])\r\n\r\n  return null\r\n}\r\n","import { useMemo } from 'react'\r\nimport { useQuery } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { useClients } from 'state/application/hooks'\r\n\r\nexport const TOP_POOLS = gql`\r\n  query topPools {\r\n    pools(first: 50, orderBy: totalValueLockedUSD, orderDirection: desc, subgraphError: allow) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\ninterface TopPoolsResponse {\r\n  pools: {\r\n    id: string\r\n  }[]\r\n}\r\n\r\n/**\r\n * Fetch top addresses by volume\r\n */\r\nexport function useTopPoolAddresses(): {\r\n  loading: boolean\r\n  error: boolean\r\n  addresses: string[] | undefined\r\n} {\r\n  const { dataClient } = useClients()\r\n  const { loading, error, data } = useQuery<TopPoolsResponse>(TOP_POOLS, {\r\n    client: dataClient,\r\n    fetchPolicy: 'cache-first',\r\n  })\r\n\r\n  const formattedData = useMemo(() => {\r\n    if (data) {\r\n      return data.pools.map((p) => p.id)\r\n    } else {\r\n      return undefined\r\n    }\r\n  }, [data])\r\n\r\n  return {\r\n    loading: loading,\r\n    error: Boolean(error),\r\n    addresses: formattedData,\r\n  }\r\n}\r\n","import { useQuery } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { useDeltaTimestamps } from 'utils/queries'\r\nimport { useBlocksFromTimestamps } from 'hooks/useBlocksFromTimestamps'\r\nimport { PoolData } from 'state/pools/reducer'\r\nimport { get2DayChange } from 'utils/data'\r\nimport { formatTokenName, formatTokenSymbol } from 'utils/tokens'\r\nimport { useActiveNetworkVersion, useClients } from 'state/application/hooks'\r\n\r\nexport const POOLS_BULK = (block: number | undefined, pools: string[]) => {\r\n  let poolString = `[`\r\n  pools.map((address) => {\r\n    return (poolString += `\"${address}\",`)\r\n  })\r\n  poolString += ']'\r\n  const queryString =\r\n    `\r\n    query pools {\r\n      pools(where: {id_in: ${poolString}},` +\r\n    (block ? `block: {number: ${block}} ,` : ``) +\r\n    ` orderBy: totalValueLockedUSD, orderDirection: desc, subgraphError: allow) {\r\n        id\r\n        feeTier\r\n        liquidity\r\n        sqrtPrice\r\n        tick\r\n        token0 {\r\n            id\r\n            symbol \r\n            name\r\n            decimals\r\n            derivedETH\r\n        }\r\n        token1 {\r\n            id\r\n            symbol \r\n            name\r\n            decimals\r\n            derivedETH\r\n        }\r\n        token0Price\r\n        token1Price\r\n        volumeUSD\r\n        txCount\r\n        totalValueLockedToken0\r\n        totalValueLockedToken1\r\n        totalValueLockedUSD\r\n      }\r\n    }\r\n    `\r\n  return gql(queryString)\r\n}\r\n\r\ninterface PoolFields {\r\n  id: string\r\n  feeTier: string\r\n  liquidity: string\r\n  sqrtPrice: string\r\n  tick: string\r\n  token0: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n    decimals: string\r\n    derivedETH: string\r\n  }\r\n  token1: {\r\n    id: string\r\n    symbol: string\r\n    name: string\r\n    decimals: string\r\n    derivedETH: string\r\n  }\r\n  token0Price: string\r\n  token1Price: string\r\n  volumeUSD: string\r\n  txCount: string\r\n  totalValueLockedToken0: string\r\n  totalValueLockedToken1: string\r\n  totalValueLockedUSD: string\r\n}\r\n\r\ninterface PoolDataResponse {\r\n  pools: PoolFields[]\r\n}\r\n\r\n/**\r\n * Fetch top addresses by volume\r\n */\r\nexport function usePoolDatas(\r\n  poolAddresses: string[]\r\n): {\r\n  loading: boolean\r\n  error: boolean\r\n  data:\r\n    | {\r\n        [address: string]: PoolData\r\n      }\r\n    | undefined\r\n} {\r\n  // get client\r\n  const { dataClient } = useClients()\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  // get blocks from historic timestamps\r\n  const [t24, t48, tWeek] = useDeltaTimestamps()\r\n  const { blocks, error: blockError } = useBlocksFromTimestamps([t24, t48, tWeek])\r\n  const [block24, block48, blockWeek] = blocks ?? []\r\n\r\n  const { loading, error, data } = useQuery<PoolDataResponse>(POOLS_BULK(undefined, poolAddresses), {\r\n    client: dataClient,\r\n  })\r\n\r\n  const { loading: loading24, error: error24, data: data24 } = useQuery<PoolDataResponse>(\r\n    POOLS_BULK(block24?.number, poolAddresses),\r\n    { client: dataClient }\r\n  )\r\n  const { loading: loading48, error: error48, data: data48 } = useQuery<PoolDataResponse>(\r\n    POOLS_BULK(block48?.number, poolAddresses),\r\n    { client: dataClient }\r\n  )\r\n  const { loading: loadingWeek, error: errorWeek, data: dataWeek } = useQuery<PoolDataResponse>(\r\n    POOLS_BULK(blockWeek?.number, poolAddresses),\r\n    { client: dataClient }\r\n  )\r\n\r\n  const anyError = Boolean(error || error24 || error48 || blockError || errorWeek)\r\n  const anyLoading = Boolean(loading || loading24 || loading48 || loadingWeek)\r\n\r\n  // return early if not all data yet\r\n  if (anyError || anyLoading) {\r\n    return {\r\n      loading: anyLoading,\r\n      error: anyError,\r\n      data: undefined,\r\n    }\r\n  }\r\n\r\n  const parsed = data?.pools\r\n    ? data.pools.reduce((accum: { [address: string]: PoolFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n  const parsed24 = data24?.pools\r\n    ? data24.pools.reduce((accum: { [address: string]: PoolFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n  const parsed48 = data48?.pools\r\n    ? data48.pools.reduce((accum: { [address: string]: PoolFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n  const parsedWeek = dataWeek?.pools\r\n    ? dataWeek.pools.reduce((accum: { [address: string]: PoolFields }, poolData) => {\r\n        accum[poolData.id] = poolData\r\n        return accum\r\n      }, {})\r\n    : {}\r\n\r\n  // format data and calculate daily changes\r\n  const formatted = poolAddresses.reduce((accum: { [address: string]: PoolData }, address) => {\r\n    const current: PoolFields | undefined = parsed[address]\r\n    const oneDay: PoolFields | undefined = parsed24[address]\r\n    const twoDay: PoolFields | undefined = parsed48[address]\r\n    const week: PoolFields | undefined = parsedWeek[address]\r\n\r\n    const [volumeUSD, volumeUSDChange] =\r\n      current && oneDay && twoDay\r\n        ? get2DayChange(current.volumeUSD, oneDay.volumeUSD, twoDay.volumeUSD)\r\n        : current\r\n        ? [parseFloat(current.volumeUSD), 0]\r\n        : [0, 0]\r\n\r\n    const volumeUSDWeek =\r\n      current && week\r\n        ? parseFloat(current.volumeUSD) - parseFloat(week.volumeUSD)\r\n        : current\r\n        ? parseFloat(current.volumeUSD)\r\n        : 0\r\n\r\n    const tvlUSD = current ? parseFloat(current.totalValueLockedUSD) : 0\r\n\r\n    const tvlUSDChange =\r\n      current && oneDay\r\n        ? ((parseFloat(current.totalValueLockedUSD) - parseFloat(oneDay.totalValueLockedUSD)) /\r\n            parseFloat(oneDay.totalValueLockedUSD === '0' ? '1' : oneDay.totalValueLockedUSD)) *\r\n          100\r\n        : 0\r\n\r\n    const tvlToken0 = current ? parseFloat(current.totalValueLockedToken0) : 0\r\n    const tvlToken1 = current ? parseFloat(current.totalValueLockedToken1) : 0\r\n\r\n    const feeTier = current ? parseInt(current.feeTier) : 0\r\n\r\n    if (current) {\r\n      accum[address] = {\r\n        address,\r\n        feeTier,\r\n        liquidity: parseFloat(current.liquidity),\r\n        sqrtPrice: parseFloat(current.sqrtPrice),\r\n        tick: parseFloat(current.tick),\r\n        token0: {\r\n          address: current.token0.id,\r\n          name: formatTokenName(current.token0.id, current.token0.name, activeNetwork),\r\n          symbol: formatTokenSymbol(current.token0.id, current.token0.symbol, activeNetwork),\r\n          decimals: parseInt(current.token0.decimals),\r\n          derivedETH: parseFloat(current.token0.derivedETH),\r\n        },\r\n        token1: {\r\n          address: current.token1.id,\r\n          name: formatTokenName(current.token1.id, current.token1.name, activeNetwork),\r\n          symbol: formatTokenSymbol(current.token1.id, current.token1.symbol, activeNetwork),\r\n          decimals: parseInt(current.token1.decimals),\r\n          derivedETH: parseFloat(current.token1.derivedETH),\r\n        },\r\n        token0Price: parseFloat(current.token0Price),\r\n        token1Price: parseFloat(current.token1Price),\r\n        volumeUSD,\r\n        volumeUSDChange,\r\n        volumeUSDWeek,\r\n        tvlUSD,\r\n        tvlUSDChange,\r\n        tvlToken0,\r\n        tvlToken1,\r\n      }\r\n    }\r\n\r\n    return accum\r\n  }, {})\r\n\r\n  return {\r\n    loading: anyLoading,\r\n    error: anyError,\r\n    data: formatted,\r\n  }\r\n}\r\n","import { useUpdatePoolData, useAllPoolData, useAddPoolKeys } from './hooks'\r\nimport { useEffect, useMemo } from 'react'\r\nimport { useTopPoolAddresses } from 'data/pools/topPools'\r\nimport { usePoolDatas } from 'data/pools/poolData'\r\n\r\nexport default function Updater(): null {\r\n  // updaters\r\n  const updatePoolData = useUpdatePoolData()\r\n  const addPoolKeys = useAddPoolKeys()\r\n\r\n  // data\r\n  const allPoolData = useAllPoolData()\r\n  const { loading, error, addresses } = useTopPoolAddresses()\r\n\r\n  // add top pools on first load\r\n  useEffect(() => {\r\n    if (addresses && !error && !loading) {\r\n      addPoolKeys(addresses)\r\n    }\r\n  }, [addPoolKeys, addresses, error, loading])\r\n\r\n  // detect for which addresses we havent loaded pool data yet\r\n  const unfetchedPoolAddresses = useMemo(() => {\r\n    return Object.keys(allPoolData).reduce((accum: string[], key) => {\r\n      const poolData = allPoolData[key]\r\n      if (!poolData.data || !poolData.lastUpdated) {\r\n        accum.push(key)\r\n      }\r\n      return accum\r\n    }, [])\r\n  }, [allPoolData])\r\n\r\n  // update unloaded pool entries with fetched data\r\n  const { error: poolDataError, loading: poolDataLoading, data: poolDatas } = usePoolDatas(unfetchedPoolAddresses)\r\n\r\n  useEffect(() => {\r\n    if (poolDatas && !poolDataError && !poolDataLoading) {\r\n      updatePoolData(Object.values(poolDatas))\r\n    }\r\n  }, [poolDataError, poolDataLoading, poolDatas, updatePoolData])\r\n\r\n  return null\r\n}\r\n","import { useActiveNetworkVersion } from 'state/application/hooks'\r\nimport { healthClient } from './../../apollo/client'\r\nimport { useQuery } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport { ArbitrumNetworkInfo, EthereumNetworkInfo } from 'constants/networks'\r\n\r\nexport const SUBGRAPH_HEALTH = gql`\r\n  query health($name: Bytes) {\r\n    indexingStatusForCurrentVersion(subgraphName: $name, subgraphError: allow) {\r\n      synced\r\n      health\r\n      chains {\r\n        chainHeadBlock {\r\n          number\r\n        }\r\n        latestBlock {\r\n          number\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\ninterface HealthResponse {\r\n  indexingStatusForCurrentVersion: {\r\n    chains: {\r\n      chainHeadBlock: {\r\n        number: string\r\n      }\r\n      latestBlock: {\r\n        number: string\r\n      }\r\n    }[]\r\n    synced: boolean\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch top addresses by volume\r\n */\r\nexport function useFetchedSubgraphStatus(): {\r\n  available: boolean | null\r\n  syncedBlock: number | undefined\r\n  headBlock: number | undefined\r\n} {\r\n  const [activeNetwork] = useActiveNetworkVersion()\r\n\r\n  const { loading, error, data } = useQuery<HealthResponse>(SUBGRAPH_HEALTH, {\r\n    client: healthClient,\r\n    fetchPolicy: 'network-only',\r\n    variables: {\r\n      name:\r\n        activeNetwork === EthereumNetworkInfo\r\n          ? 'uniswap/uniswap-v3'\r\n          : activeNetwork === ArbitrumNetworkInfo\r\n          ? 'ianlapham/uniswap-arbitrum-one'\r\n          : 'ianlapham/uniswap-optimism',\r\n    },\r\n  })\r\n\r\n  const parsed = data?.indexingStatusForCurrentVersion\r\n\r\n  if (loading) {\r\n    return {\r\n      available: null,\r\n      syncedBlock: undefined,\r\n      headBlock: undefined,\r\n    }\r\n  }\r\n\r\n  if ((!loading && !parsed) || error) {\r\n    return {\r\n      available: false,\r\n      syncedBlock: undefined,\r\n      headBlock: undefined,\r\n    }\r\n  }\r\n\r\n  const syncedBlock = parsed?.chains[0].latestBlock.number\r\n  const headBlock = parsed?.chains[0].chainHeadBlock.number\r\n\r\n  return {\r\n    available: true,\r\n    syncedBlock: syncedBlock ? parseFloat(syncedBlock) : undefined,\r\n    headBlock: headBlock ? parseFloat(headBlock) : undefined,\r\n  }\r\n}\r\n","import { useEffect } from 'react'\r\nimport { useSubgraphStatus } from './hooks'\r\nimport { useFetchedSubgraphStatus } from '../../data/application'\r\n\r\nexport default function Updater(): null {\r\n  // subgraph status\r\n  const [status, updateStatus] = useSubgraphStatus()\r\n  const { available, syncedBlock: newSyncedBlock, headBlock } = useFetchedSubgraphStatus()\r\n\r\n  const syncedBlock = status.syncedBlock\r\n\r\n  useEffect(() => {\r\n    if (status.available === null && available !== null) {\r\n      updateStatus(available, syncedBlock, headBlock)\r\n    }\r\n    if (!status.syncedBlock || (status.syncedBlock !== newSyncedBlock && syncedBlock)) {\r\n      updateStatus(status.available, newSyncedBlock, headBlock)\r\n    }\r\n  }, [available, headBlock, newSyncedBlock, status.available, status.syncedBlock, syncedBlock, updateStatus])\r\n\r\n  return null\r\n}\r\n","import { TokenList } from '@uniswap/token-lists'\r\nimport schema from '@uniswap/token-lists/src/tokenlist.schema.json'\r\nimport Ajv from 'ajv'\r\nimport uriToHttp from './uriToHttp'\r\n\r\nconst tokenListValidator = new Ajv({ allErrors: true }).compile(schema)\r\n\r\n/**\r\n * Contains the logic for resolving a list URL to a validated token list\r\n * @param listUrl list url\r\n * @param resolveENSContentHash resolves an ens name to a contenthash\r\n */\r\nexport default async function getTokenList(listUrl: string): Promise<TokenList> {\r\n  const urls = uriToHttp(listUrl)\r\n\r\n  for (let i = 0; i < urls.length; i++) {\r\n    const url = urls[i]\r\n    const isLast = i === urls.length - 1\r\n    let response\r\n    try {\r\n      response = await fetch(url)\r\n    } catch (error) {\r\n      console.debug('Failed to fetch list', listUrl, error)\r\n      if (isLast) throw new Error(`Failed to download list ${listUrl}`)\r\n      continue\r\n    }\r\n\r\n    if (!response.ok) {\r\n      if (isLast) throw new Error(`Failed to download list ${listUrl}`)\r\n      continue\r\n    }\r\n\r\n    const json = await response.json()\r\n    if (!tokenListValidator(json)) {\r\n      const validationErrors: string =\r\n        tokenListValidator.errors?.reduce<string>((memo, error) => {\r\n          const add = `${error.dataPath} ${error.message ?? ''}`\r\n          return memo.length > 0 ? `${memo}; ${add}` : `${add}`\r\n        }, '') ?? 'unknown error'\r\n      throw new Error(`Token list failed validation: ${validationErrors}`)\r\n    }\r\n    return json\r\n  }\r\n  throw new Error('Unrecognized list URL protocol.')\r\n}\r\n","import { useCallback, useEffect, useState } from 'react'\r\n\r\nconst VISIBILITY_STATE_SUPPORTED = 'visibilityState' in document\r\n\r\nfunction isWindowVisible() {\r\n  return !VISIBILITY_STATE_SUPPORTED || document.visibilityState !== 'hidden'\r\n}\r\n\r\n/**\r\n * Returns whether the window is currently visible to the user.\r\n */\r\nexport default function useIsWindowVisible(): boolean {\r\n  const [focused, setFocused] = useState<boolean>(isWindowVisible())\r\n  const listener = useCallback(() => {\r\n    setFocused(isWindowVisible())\r\n  }, [setFocused])\r\n\r\n  useEffect(() => {\r\n    if (!VISIBILITY_STATE_SUPPORTED) return undefined\r\n\r\n    document.addEventListener('visibilitychange', listener)\r\n    return () => {\r\n      document.removeEventListener('visibilitychange', listener)\r\n    }\r\n  }, [listener])\r\n\r\n  return focused\r\n}\r\n","import { getVersionUpgrade, minVersionBump, VersionUpgrade } from '@uniswap/token-lists'\r\nimport { OPTIMISM_LIST, UNSUPPORTED_LIST_URLS } from 'constants/lists'\r\nimport { useCallback, useEffect } from 'react'\r\nimport { useAllLists } from 'state/lists/hooks'\r\nimport { useFetchListCallback } from '../../hooks/useFetchListCallback'\r\nimport useInterval from '../../hooks/useInterval'\r\nimport useIsWindowVisible from '../../hooks/useIsWindowVisible'\r\nimport { acceptListUpdate, enableList } from './actions'\r\nimport { useActiveListUrls } from './hooks'\r\nimport { useAppDispatch } from 'hooks/useAppDispatch'\r\n\r\nexport default function Updater(): null {\r\n  const dispatch = useAppDispatch()\r\n  const isWindowVisible = useIsWindowVisible()\r\n\r\n  // get all loaded lists, and the active urls\r\n  const lists = useAllLists()\r\n  const activeListUrls = useActiveListUrls()\r\n\r\n  const fetchList = useFetchListCallback()\r\n  const fetchAllListsCallback = useCallback(() => {\r\n    if (!isWindowVisible) return\r\n    Object.keys(lists).forEach((url) =>\r\n      fetchList(url).catch((error) => console.debug('interval list fetching error', error))\r\n    )\r\n  }, [fetchList, isWindowVisible, lists])\r\n\r\n  dispatch(enableList(OPTIMISM_LIST))\r\n\r\n  // fetch all lists every 10 minutes, but only after we initialize library\r\n  useInterval(fetchAllListsCallback, 1000 * 60 * 10)\r\n\r\n  // whenever a list is not loaded and not loading, try again to load it\r\n  useEffect(() => {\r\n    Object.keys(lists).forEach((listUrl) => {\r\n      const list = lists[listUrl]\r\n      if (!list.current && !list.loadingRequestId && !list.error) {\r\n        fetchList(listUrl).catch((error) => console.debug('list added fetching error', error))\r\n      }\r\n    })\r\n  }, [dispatch, fetchList, lists])\r\n\r\n  // if any lists from unsupported lists are loaded, check them too (in case new updates since last visit)\r\n  useEffect(() => {\r\n    UNSUPPORTED_LIST_URLS.forEach((listUrl) => {\r\n      const list = lists[listUrl]\r\n      if (!list || (!list.current && !list.loadingRequestId && !list.error)) {\r\n        fetchList(listUrl).catch((error) => console.debug('list added fetching error', error))\r\n      }\r\n    })\r\n  }, [dispatch, fetchList, lists])\r\n\r\n  // automatically update lists if versions are minor/patch\r\n  useEffect(() => {\r\n    Object.keys(lists).forEach((listUrl) => {\r\n      const list = lists[listUrl]\r\n      if (list.current && list.pendingUpdate) {\r\n        const bump = getVersionUpgrade(list.current.version, list.pendingUpdate.version)\r\n        switch (bump) {\r\n          case VersionUpgrade.NONE:\r\n            throw new Error('unexpected no version bump')\r\n          case VersionUpgrade.PATCH:\r\n          case VersionUpgrade.MINOR:\r\n            const min = minVersionBump(list.current.tokens, list.pendingUpdate.tokens)\r\n            // automatically update minor/patch as long as bump matches the min update\r\n            if (bump >= min) {\r\n              dispatch(acceptListUpdate(listUrl))\r\n            } else {\r\n              console.error(\r\n                `List at url ${listUrl} could not automatically update because the version bump was only PATCH/MINOR while the update had breaking changes and should have been MAJOR`\r\n              )\r\n            }\r\n            break\r\n\r\n          // update any active or inactive lists\r\n          case VersionUpgrade.MAJOR:\r\n            dispatch(acceptListUpdate(listUrl))\r\n        }\r\n      }\r\n    })\r\n  }, [dispatch, lists, activeListUrls])\r\n\r\n  return null\r\n}\r\n","import { nanoid } from '@reduxjs/toolkit'\r\nimport { TokenList } from '@uniswap/token-lists'\r\nimport { useCallback } from 'react'\r\nimport { fetchTokenList } from '../state/lists/actions'\r\nimport getTokenList from '../utils/getTokenList'\r\nimport { useAppDispatch } from './useAppDispatch'\r\n\r\nexport function useFetchListCallback(): (listUrl: string, sendDispatch?: boolean) => Promise<TokenList> {\r\n  const dispatch = useAppDispatch()\r\n\r\n  // note: prevent dispatch if using for list search or unsupported list\r\n  return useCallback(\r\n    async (listUrl: string, sendDispatch = true) => {\r\n      const requestId = nanoid()\r\n      sendDispatch && dispatch(fetchTokenList.pending({ requestId, url: listUrl }))\r\n      return getTokenList(listUrl)\r\n        .then((tokenList) => {\r\n          sendDispatch && dispatch(fetchTokenList.fulfilled({ url: listUrl, tokenList, requestId }))\r\n          return tokenList\r\n        })\r\n        .catch((error) => {\r\n          console.debug(`Failed to get list at url ${listUrl}`, error)\r\n          sendDispatch && dispatch(fetchTokenList.rejected({ url: listUrl, requestId, errorMessage: error.message }))\r\n          throw error\r\n        })\r\n    },\r\n    [dispatch]\r\n  )\r\n}\r\n","import 'inter-ui'\r\nimport React, { StrictMode } from 'react'\r\nimport { isMobile } from 'react-device-detect'\r\nimport ReactDOM from 'react-dom'\r\nimport ReactGA from 'react-ga'\r\nimport { Provider } from 'react-redux'\r\nimport { HashRouter } from 'react-router-dom'\r\nimport './i18n'\r\nimport App from './pages/App'\r\nimport store from './state'\r\nimport UserUpdater from './state/user/updater'\r\nimport ProtocolUpdater from './state/protocol/updater'\r\nimport TokenUpdater from './state/tokens/updater'\r\nimport PoolUpdater from './state/pools/updater'\r\nimport ApplicationUpdater from './state/application/updater'\r\nimport ListUpdater from './state/lists/updater'\r\nimport ThemeProvider, { FixedGlobalStyle, ThemedGlobalStyle } from './theme'\r\nimport { ApolloProvider } from '@apollo/client/react'\r\nimport { client } from 'apollo/client'\r\n\r\nconst GOOGLE_ANALYTICS_ID: string | undefined = process.env.REACT_APP_GOOGLE_ANALYTICS_ID\r\nif (typeof GOOGLE_ANALYTICS_ID === 'string') {\r\n  ReactGA.initialize(GOOGLE_ANALYTICS_ID)\r\n  ReactGA.set({\r\n    customBrowserType: !isMobile\r\n      ? 'desktop'\r\n      : 'web3' in window || 'ethereum' in window\r\n      ? 'mobileWeb3'\r\n      : 'mobileRegular',\r\n  })\r\n} else {\r\n  ReactGA.initialize('test', { testMode: true, debug: true })\r\n}\r\n\r\nwindow.addEventListener('error', (error) => {\r\n  ReactGA.exception({\r\n    description: `${error.message} @ ${error.filename}:${error.lineno}:${error.colno}`,\r\n    fatal: true,\r\n  })\r\n})\r\n\r\nfunction Updaters() {\r\n  return (\r\n    <>\r\n      <ListUpdater />\r\n      <UserUpdater />\r\n      <ProtocolUpdater />\r\n      <TokenUpdater />\r\n      <PoolUpdater />\r\n      <ApplicationUpdater />\r\n    </>\r\n  )\r\n}\r\n\r\nReactDOM.render(\r\n  <StrictMode>\r\n    <FixedGlobalStyle />\r\n    <ApolloProvider client={client}>\r\n      <Provider store={store}>\r\n        <Updaters />\r\n        <ThemeProvider>\r\n          <ThemedGlobalStyle />\r\n          <HashRouter>\r\n            <App />\r\n          </HashRouter>\r\n        </ThemeProvider>\r\n      </Provider>\r\n    </ApolloProvider>\r\n  </StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}